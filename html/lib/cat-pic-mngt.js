/* ---------------------------------------------------------------------------- *\
 *  Film Aficionado is public domain software. Promotional material images,
 *  if present, are copyrighted by the respective copyright owners and should
 *  only be used under the provisions dictated by those copyright holders.
 *  There are no warranties expressed on implied.
\* ---------------------------------------------------------------------------- */
var Ajax={_http:false,_uniSeed:'',_getHttpObj:function(){var h=false;if(window.XMLHttpRequest){try{h=new XMLHttpRequest();}catch(e){h=false;}}else{if(window.ActiveXObject){try{h=new ActiveXObject("Msxml2.XMLHTTP");}catch(e){try{h=new ActiveXObject("Microsoft.XMLHTTP");}catch(e){h=false;}}}}if(h.overrideMimeType)h.overrideMimeType('text/xml');return h;},_call:function(s_file,f_callback,s_get,s_post){if(!Ajax._http)Ajax._http=Ajax._getHttpObj();if(Ajax._http){Ajax._http.abort();Ajax._http.onreadystatechange=f_callback;if(s_post){Ajax._http.open('POST','/utils/ajax-'+s_file+'.php'+s_get,true);Ajax._http.setRequestHeader("Content-type","application/x-www-form-urlencoded");Ajax._http.setRequestHeader("Content-length",s_post.length);Ajax._http.setRequestHeader("Connection","close");Ajax._http.send(s_post);}else{Ajax._http.open('GET','/utils/ajax-'+s_file+'.php'+s_get,true);Ajax._http.send(null);}}},_uniCall:function(s_file,f_callback,s_get,s_post,s_seed){if(s_seed!=Ajax._uniSeed)return;Ajax._call(s_file,f_callback,s_get,s_post);},asynch:function(s_file,s_callback,s_get,s_post,n_delay){s_file="'"+s_file+"'";s_get=typeof(s_get)=='undefined'||!s_get?0:"'"+s_get.replace(/\x27/g,"\\'")+"'";s_post=typeof(s_post)=='undefined'||!s_post?0:"'"+s_post.replace(/\x27/g,"\\'")+"'";n_delay=typeof(n_delay)=='undefined'?200:n_delay;setTimeout("Ajax._call("+s_file+","+s_callback+","+s_get+","+s_post+")",n_delay);},asynchNoDup:function(s_file,s_callback,s_get,s_post,n_delay){s_file="'"+s_file+"'";s_get=typeof(s_get)=='undefined'||!s_get?0:"'"+s_get.replace(/\x27/g,"\\'")+"'";s_post=typeof(s_post)=='undefined'||!s_post?0:"'"+s_post.replace(/\x27/g,"\\'")+"'";n_delay=typeof(n_delay)=='undefined'?200:n_delay;Ajax._uniSeed=(new Date()).getTime()+','+Math.random();setTimeout("Ajax._uniCall("+s_file+","+s_callback+","+s_get+","+s_post+",'"+Ajax._uniSeed+"')",n_delay);},ready:function(){return Ajax._http.readyState==4&&Ajax._http.status==200;},getParms:function(o){o.sta=o.msg=o.err='';if(!Ajax.ready())return false;o.lines=Ajax.getLines();o.length=o.lines.length;if(o.length<2)return false;o.line1=o.lines[1];return Ajax.statusErr(o,o.line1);},statusErr:function(o,s){o.sta=Ajax.statusTxt(s,'status');o.msg=Ajax.statusTxt(s,'msg');o.err=o.sta=='SUCCESS'?'':(o.msg?o.msg:'ERROR');return o.err=='';},statusInt:function(s,v){var re=new RegExp(v+"='([^\x27]+)'");re=re.exec(s);return re&&re.index?Dec.parse(re[1]):0;},statusTxt:function(s,v){var re=new RegExp(v+"='([^\x27]+)'");re=re.exec(s);return re&&re.index?re[1]:'';},getText:function(){return Ajax._http.responseText;},getLines:function(){return Ajax._http.responseText.split('\n');},__ignore:function(s,t){}};var Context={_isFireFox:navigator.userAgent.match(/gecko/i),_menuHandle:null,setup:function(){if(Filmaf.onPopup)Context._menuHandle=DynarchMenu.setup('context-menu',{context:true,lazy:true,onPopup:Filmaf.onPopup,ctxbutton:1});else Context._menuHandle=DynarchMenu.setup('context-menu',{context:true,lazy:true,ctxbutton:1});},attach:function(click,edit,s_menu,n_calendar_id){var e=$s(click),f=$s(edit);if(Context._menuHandle&&s_menu&&(e||f)){if(s_menu=='calendar'){if(f)f.onclick=Search.calendars[n_calendar_id];if(e)e.onclick=Search.calendars[n_calendar_id];}else{if(f)f.onclick=f.onkeydown=Context._pressButton;if(e)DynarchMenu.setupContext(e,Context._menuHandle.items[s_menu]);}}},_pressButton:function(ev){ev||(ev=window.event);if(ev.keyCode!=9){var e=ev.currentTarget||ev.srcElement;if(e&&e.tagName=='INPUT')e.setAttribute('autocomplete','off');if(e&&e.id&&(e=$('h'+e.id.substr(1))))e.onclick(ev);else alert('Please use the [...] button next to this field to select an option.');}},getPopupPos:function(e,dx,dy){var r=DynarchMenu.getWinSize(),xi=DynarchMenu.psLeft(),yi=DynarchMenu.psTop(),xf=xi+r.x,yf=yi+r.y;r=Context.getPos(e);var xe=r.x,ye=r.y,zh=e.getAttribute('zoom_hoz'),dn=e.getAttribute('zoom_ver')=='down',lf=zh=='left',lo=zh=='leftoffset';r.beg_y=yi;r.end_y=yf;r.bot_y=0;r.x=lf?xe-dx:xe+(lo?0:e.offsetWidth);r.y=ye-1;r.y+=dn?e.offsetHeight:e.offsetHeight*85/100;if(!lf&&r.x+dx>xf)r.x=lo?r.x=xf-dx-1:r.x-e.offsetWidth-dx;if(r.x<xi)r.x=xi;if(r.y+dy>yf){r.bot_y=r.y-(dn?e.offsetHeight:e.offsetHeight*70/100);r.y=r.bot_y-dy;r.bot_y=r.end_y-r.bot_y;}if(r.y<yi)r.y=yi;r.x=Math.floor(r.x);r.y=Math.floor(r.y);return r;},getPos:function(e){var r={x:0,y:0},op,pn;if(e){r.x=e.offsetLeft;r.y=e.offsetTop;op=e.offsetParent;pn=e.parentNode;while(op){r.x+=op.offsetLeft;r.y+=op.offsetTop;if(op!=document.body&&op!=document.documentElement){r.x-=op.scrollLeft;r.y-=op.scrollTop;}if(Context._isFireFox){while(pn&&op!=pn){r.x-=pn.scrollLeft;r.y-=pn.scrollTop;pn=pn.parentNode;}}pn=op.parentNode;op=op.offsetParent;}}return r;},close:function(){if(window.top&&window.top.DynarchMenu)window.top.DynarchMenu._closeOtherMenus(null);}};var Cookie={get:function(n){var c=('; '+document.cookie).replace(/;\s*([A-Za-z0-9_]+\=)/g,';$1'),i=c.indexOf(';'+n+'=');if(i>=0){i+=n.length+2;n=c.indexOf(';',i);return n>i?c.substr(i,n-i):c.substr(i);}return '';},del:function(n){var c=new Date('January 1, 2001');c='; expires='+c.toGMTString()+'; path=/; domain='+Filmaf.cookieDomain;document.cookie=n+'='+c;},set:function(n,v,d){if(typeof(v)=='string'&&!(v=Str.trim(v).replace(/^,+/,'').replace(/,+$/,''))){Cookie.del(n);return;}if(d)if(d<0)d=0;else{var x=d;d=new Date();d.setDate(d.getDate()+x);}else d=new Date(new Date().setFullYear(new Date().getFullYear()+1));d=(d?'; expires='+d.toGMTString():'')+'; path=/; domain='+Filmaf.cookieDomain;document.cookie=n+'='+v+d;},reset:function(keepers){var z=document.cookie.split(';'),i,s,n;keepers='-,'+keepers.toLowerCase()+',';for(i=0;i<z.length;i++){s=Str.trim(z[i]);n=s.indexOf('=');if(n>=0){s=s.substr(0,n);if(keepers.indexOf(','+s.toLowerCase()+',')<0)Cookie.del(s);}}},amend:function(n,k,v){var c=Cookie.get(n).split('*'),s='',b=0,m,i;if(typeof(v)=='string'){if(v.indexOf('*')>0){v=v.replace(/\*/g,'');alert("Illegal character '*' removed from ammended cookie value");}if(v.indexOf('*')>0||v.indexOf('_')>0){k=k.replace(/\*/g,'').replace(/_/g,'');alert("Illegal characters '*' and/or '_' removed from ammended cookie value");}}for(i=0;i<c.length;i++){m=c[i].split('_',1)[0];if(k==m){if(v!='')s+='*'+k+'_'+v;b=1;}else{if(m!='')s+='*'+c[i];}}if(!b&&v!='')s+='*'+k+'_'+v;if(s=='')Cookie.del(n);else Cookie.set(n,s.slice(1));},extract:function(n,k,def){var c=Cookie.get(n).split('*'),i;for(i=0;i<c.length;i++){if(k==c[i].split('_',1)[0])return c[i].slice(k.length+1);}return typeof(def)=='undefined'?'':def;},extractFromStr:function(c,k,def){var i;c=c.split('*');for(i=0;i<c.length;i++){if(k==c[i].split('_',1)[0])return c[i].slice(k.length+1);}return typeof(def)=='undefined'?'':def;},explode:function(n,ints){var c=Cookie.get(n).split('*'),a=[],i;if(c=='')return '';for(i=0;i<c.length;i++){k=c[i].split('_',1)[0];v=c[i].slice(k.length+1);if(ints)a[i]={key:k,val:v};else a[k]=v;}return a;},explodeStr:function(c,ints){var c=c.split('*'),a=[],i;if(c=='')return '';for(i=0;i<c.length;i++){k=c[i].split('_',1)[0];v=c[i].slice(k.length+1);if(ints)a[i]={key:k,val:v};else a[k]=v;}return a;},clean:function(b_all){var b=confirm(b_all?'This action will log you off FilmAf, delete your shopping\ncart and a few other options. Do you wish to proceed?\n\nOK=Yes - Cancel=No':'This action will delete your shopping cart and\na few other options. Do you wish to proceed?\n\nOK=Yes - Cancel=No');if(b)Cookie.reset(b_all?'orig':'user,parm,orig');return b;}};var DateTime={parseBounded:function(s,yy_min,yy_max,empty){var re,y,m=1,d=1,o='invalid';s=Str.trim(s);if(s=='')return empty?'':false;re=/^([0-9]{4})$/.exec(s);if(re){y=Dec.parse(re[1]);if(y>=yy_min&&y<=yy_max)o='year';}else{re=/^([0-9]{4})[-]([0-9]{2})$/.exec(s);if(re){y=Dec.parse(re[1]);m=Dec.parse(re[2]);if(y>=yy_min&&y<=yy_max){if(m==0)o='year';else if(m>=1&&m<=12)o='month';}}else{re=/^([0-9]{4})[-]([0-9]{2})[-]([0-9]{2})$/.exec(s);if(re){y=Dec.parse(re[1]);m=Dec.parse(re[2]);d=Dec.parse(re[3]);if(y>=yy_min&&y<=yy_max){if(m==0&&d==0)o='year';else if(m>=1&&m<=12){if(d==0)o='month';else if(DateTime.isValid(y,m,d,yy_min,yy_max))o='day';}}}else{return false;}}}return{day:d,month:m-1,year:y,option:o};},isLeapYear:function(y){return y%4==0&&(y%100!=0||y%400==0);},daysInMonth:function(m,y){var dm=[0,31,29,31,30,31,30,31,31,30,31,30,31];if(m==2&&y>0)return DateTime.isLeapYear(y)?29:28;return(m>=1&&m<=12)?dm[m]:false;},isStrValid:function(s,yy_min,yy_max){var re=/^([0-9]{4})[-]([0-9]{2})[-]([0-9]{2})$/.exec(s);if(re){y=Dec.parse(re[1]);m=Dec.parse(re[2]);d=Dec.parse(re[3]);return DateTime.isValid(y,m,d,yy_min,yy_max);}return false;},isValid:function(y,m,d,yy_min,yy_max){y=Dec.parse(y);m=Dec.parse(m);d=Dec.parse(d);return y>=yy_min&&y<=yy_max&&m>=1&&m<=12&&d>=1&&d<=DateTime.daysInMonth(m,y);},IntToDateStr:function(y,m,d){m=m+1;if(m<10)m='0'+m;if(d<10)d='0'+d;return y+'-'+m+'-'+d;},toDateStr:function(dt){var m=dt.getMonth()+1,d=dt.getDate();if(m<10)m='0'+m;if(d<10)d='0'+d;return dt.getFullYear()+'-'+m+'-'+d;},toTimeStr:function(dt){var m=dt.getMonth()+1,d=dt.getDate(),h=dt.getHours(),i=dt.getMinutes(),s=dt.getSeconds();if(m<10)m='0'+m;if(d<10)d='0'+d;if(h<10)h='0'+h;if(i<10)i='0'+i;if(s<10)s='0'+s;return dt.getFullYear()+'-'+m+'-'+d+' '+h+':'+i+':'+s;},toTimeHHMM:function(dt,zeroPad,ampm){var h=dt.getHours(),i=dt.getMinutes(),b=h>11,m=ampm?(b?' PM':' AM'):'';if(m&&b)h-=12;if(h<10&&zeroPad)h='0'+h;if(i<10)i='0'+i;return h+':'+i+m;},getMonth:function(n){var a=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];if(n>=1&&n<=12)return a[n-1];},validate:function(s_field,o_date,o_changed,yy_min,yy_max,b_allow_empty,s_name,b_must_change){var s,e_new,e_old,b_same;o_date.day=0;o_date.month=0;o_date.year=0;if((e_new=$(s_field))){if(o_changed&&!o_changed.b_undo&&(e_old=$('z_'+s_field.substr(2))))o_changed.b_undo=Str.trim(e_new.value)!=Str.trim(e_old.value);b_same=(e_old=$('o_'+s_field.substr(2)))&&(s=Str.trim(e_new.value))==Str.trim(e_old.value);if(b_same&&!b_must_change)return s;s=Validate.checkEmptiness(e_new,b_allow_empty,s_name);if(s===false)return false;if(!e_old&&s=='')b_same=true;s=DateTime.parseBounded(s,yy_min,yy_max,b_allow_empty);if(s===false||(s.option&&s.option!='day')){Validate.warn(e_new,true,true,s_name+' must be a valid date between '+yy_min+' and '+yy_max+' expressed as YYYY-MM-DD.\nYou entered "'+e_new.value+'".',false);return false;}o_date.day=s.day;o_date.month=s.month;o_date.year=s.year;if(o_changed&&!o_changed.b_changed)o_changed.b_changed=!b_same;if(s!='')s=DateTime.IntToDateStr(s.year,s.month,s.day);e_new.value=s;return s;}return '';},attachLiveParser:function(s){if((s=$(s)))s.onkeypress=DateTime._liveParser;},_liveParser:function(ev){function has31d(s){s=Dec.parse(s);a=[0,31,29,31,30,31,30,31,31,30,31,30,31];return(s>=1&&s<=12)?a[s]==31:false;};ev||(ev=window.event);var c=ev.keyCode||ev.charCode,d=c?String.fromCharCode(c):'not',e=ev.currentTarget||ev.srcElement,b=e.value,f=b.length,g=d=='-';if((d=='-'||(d>='0'&&d<='9'))&&e){c=true;switch(f){case 0:c=/[1-2]/.test(d);break;case 1:if(!/[1-2]/.test(b))c=0;else{c=(b=='1'?/[8-9]/:/[0]/).test(d);}break;case 2:if(!/(19)|(20)/.test(b))c=0;else{c=(b=='20'?/[0]/:/[0-9]/).test(d);}break;case 3:if(!/(19[0-9])|(200)/.test(b))c=0;else{c=/[0-9]/.test(d);}break;case 4:if(!/(19[0-9][0-9])|(200[0-9])/.test(b))c=0;else{if(!g){e.value+='-';if(!/[0-1]/.test(d))e.value+='0';c=/[0-9]/.test(d);}}break;case 5:if(!/(19[0-9][0-9]-)|(200[0-9]-)/.test(b))c=0;else{if(!/[0-1]/.test(d))e.value+='0';c=/[0-9]/.test(d);}break;case 6:if(!/(19[0-9][0-9]-[0-1])|(200[0-9]-[0-1])/.test(b))c=0;else{if(g&&b.substr(5,1)!='0')e.value=b.substr(0,5)+'0'+b.substr(5,1);else c=(b.substr(5,1)=='1'?/[0-2]/:/[1-9]/).test(d);}break;case 7:if(!/(19[0-9][0-9]-[0-1][0-9])|(200[0-9]-[0-1][0-9])/.test(b))c=0;else{if(!g){e.value+='-';if(!(b.substr(5,2)=='02'?/[0-2]/:/[0-3]/).test(d))e.value+='0';c=/[0-9]/.test(d);}}break;case 8:if(!/(19[0-9][0-9]-[0-1][0-9]-)|(200[0-9]-[0-1][0-9]-)/.test(b))c=0;else{if(!(b.substr(5,2)=='02'?/[0-2]/:/[0-3]/).test(d))e.value+='0';c=/[0-9]/.test(d);}break;case 9:if(!/(19[0-9][0-9]-[0-1][0-9]-[0-3])|(200[0-9]-[0-1][0-9]-[0-3])/.test(b))c=0;else{var y=Dec.parse(b.substr(0,4)),m=Dec.parse(b.substr(5,2));if(m==2)c=(b.substr(8,1)=='2'?(DateTime.isLeapYear(y)?/[0-9]/:/[0-8]/):/[0-9]/).test(d);else c=(b.substr(8,1)=='3'?(DateTime.daysInMonth(m,y)==31?/[0-1]/:/[0]/):/[0-9]/).test(d);}break;default:return false;break;}}else{c=(d>='0'&&d<='9')||d=='-'||d=='not'||Kbd.isEditKey(c);}if(!c)alert("Oops, please enter a valid date 'YYYY-MM-DD'");return c;}};var Dbl={parse:function(s){s=parseFloat(s);return isNaN(s)?0:s;},parseBounded:function(s,min,max,b_allow_empty,b_money){if(typeof(b_money)=='undefined')b_money=false;var re_1,re_2,b_not_num,b_bounds,b_neg=false;s=Str.trim(s);if(s=='')return b_allow_empty?'':false;if(s.substr(0,1)=='-'){b_neg=true;s=s.substr(1);}if(b_money){re_1=/^([0-9]+)[,.]*([0-9]{0,2})$/;re_2=/^[0-9]+[\.]*[0-9]{0,2}%?$/;}else{re_1=/^([0-9]+)[,.]*([0-9]{0,5})$/;re_2=/^[0-9]+[\.]*[0-9]{0,5}%?$/;}s=s.replace(re_1,'$1.$2'). replace(/^([0-9]+)[,.]*$/,'$1');b_not_num=s.match(re_2)==null;b_bounds=b_not_num?false:(max>min?(Dbl.parse(s)>max||Dbl.parse(s)<min):false);if(b_not_num||b_bounds)return false;return b_neg?'-'+s:s;},toStr:function(v,s_on_zero){if(v>-0.005&&v<0.005)return s_on_zero;v+=v>0?0.005:-0.005;v=''+v;var n=v.indexOf('.');if(n>0)return v.substr(0,n)+'.'+(v.substr(n+1)+'00').substr(0,2);return v+'.00';},toUsd:function(v){v=Dbl.toStr(v,'0.00');var m=v.indexOf('-')>=0?1:0,n=v.indexOf('.');if(n-m>3)v=v.substr(0,n-3)+','+v.substr(n-3);return v;},validate:function(s_field,o_changed,e_min,e_max,b_allow_empty,s_name,b_must_change,b_money){if(typeof(b_money)=='undefined')b_money=false;var s,e_new,e_old,b_same;if((e_new=$(s_field))){if(o_changed&&!o_changed.b_undo&&(e_old=$('z_'+s_field.substr(2))))o_changed.b_undo=Str.trim(e_new.value)!=Str.trim(e_old.value);b_same=(e_old=$('o_'+s_field.substr(2)))&&(s=Str.trim(e_new.value))==Str.trim(e_old.value);if(b_same&&!b_must_change)return s;s=Validate.checkEmptiness(e_new,b_allow_empty,s_name);if(s===false)return false;if(!e_old&&s=='')b_same=true;s=Dbl.parseBounded(s,e_min,e_max,b_allow_empty,b_money);if(s===false){Validate.warn(e_new,true,true,s_name+' must be a number between '+e_min+' and '+e_max+' with up to '+(b_money?'two':'five')+' decimal digits.\nYou entered "'+e_new.value+'".',false);return false;}if(o_changed&&!o_changed.b_changed)o_changed.b_changed=!b_same;e_new.value=s;return s;}return '';}};var Dec={parse:function(s){s=parseInt(s,10);return isNaN(s)?0:s;},parseBounded:function(s,min,max,b_allow_empty){s=Str.trim(s);if(s=='')return b_allow_empty?'':false;var b_not_num=s.match(/^[+-]?[0-9]+$/)==null;var b_bounds=b_not_num?false:(max>min?(Dec.parse(s)>max||Dec.parse(s)<min):false);if(b_not_num||b_bounds)return false;return s;},validateN:function(s_field,n_cnt,o_changed,e_min,e_max,b_allow_empty,s_name,b_must_change){var i,b;for(i=0,b=true;b!==false&&i<n_cnt;i++)b=Dec.validate(s_field+i,o_changed,e_min,e_max,i?1:b_allow_empty,i?s_name+(i+1):Str.trim(s_name),i?0:b_must_change);return b!==false;},validate:function(s_field,o_changed,e_min,e_max,b_allow_empty,s_name,b_must_change){var s,e_new,e_old,b_same;if((e_new=$(s_field))){if(o_changed&&!o_changed.b_undo&&(e_old=$('z_'+s_field.substr(2))))o_changed.b_undo=Str.trim(e_new.value)!=Str.trim(e_old.value);b_same=(e_old=$('o_'+s_field.substr(2)))&&(s=Str.trim(e_new.value))==Str.trim(e_old.value);if(((s!=''&&s!='0')||b_allow_empty)&&b_same&&!b_must_change)return s;s=Validate.checkEmptiness(e_new,b_allow_empty,s_name);if(s===false)return false;if(!e_old&&s=='')b_same=true;s=Dec.parseBounded(s,e_min,e_max,b_allow_empty);if(s===false){Validate.warn(e_new,true,true,s_name+' must be an integer'+(e_max>e_min?(' between '+e_min+' and '+e_max):'')+'.\nYou entered "'+e_new.value+'".',false);return false;}if(o_changed&&!o_changed.b_changed)o_changed.b_changed=!b_same;e_new.value=s;return s;}return '';}};var Dom={getParentByType:function(e,t){if(!t)return null;t=t.toLowerCase();while(e&&e.tagName&&e.tagName.toLowerCase()!=t)e=e.parentNode;return(e&&e.tagName&&e.tagName.toLowerCase()==t)?e:null;},getChildrenByType:function(e,t){var a=[],i;if(t)t=t.toLowerCase();if(t&&e&&e.firstChild){for(i=e.firstChild;i;i=i.nextSibling){if(i.nodeType!=1)continue;if(!t||t==i.tagName.toLowerCase())a[a.length]=i;}}return a;},getFirstChildByType:function(e,t){if(t)t=t.toLowerCase();if(t&&e&&e.firstChild){for(var i=e.firstChild;i;i=i.nextSibling){if(i.nodeType!=1)continue;if(!t||t==i.tagName.toLowerCase())return i;}}return null;},decodeHtmlForInput:function(s){if(!s)return '';var d=document.createElement('div');d.innerHTML=s.replace(/<br\x20?\/?>/g,'_ed_magick_');s=document.all?d.innerText:d.textContent;return s.replace(/_ed_magick_/g,'\n');},decodeHtmlEntities:function(s){if(!s)return '';var d=document.createElement('div');d.innerHTML=s;return document.all?d.innerText:d.textContent;},stripTags:function(s){return s.replace(/[<].*?[>]/g,'');},flipHidden:function(s){var e=$(s),f=$(s+'_sav');if(e&&f){s=f.innerHTML;f.innerHTML=e.innerHTML;e.innerHTML=s;return s!='';}return false;},getElementWidth:function(e){if(typeof e.clip!='undefined')return e.clip.width;if(e.style.pixelWidth)return e.style.pixelWidth;return e.offsetWidth;},getElementHeight:function(e){if(typeof this.clip!='undefined')return this.clip.height;if(this.style.pixelHeight)return this.style.pixelHeight;return this.offsetHeight;}};function $(e){return document.getElementById(e);};function $s(e){return typeof(e)=='string'?document.getElementById(e):(typeof(e)=='object'?e:null);}var Filmaf={baseDomain:'',cookieDomain:'',userCollection:'',viewCollection:'',presentationMode:'',reqPageSize:50,firstRowNo:1,rowsShown:0,onMenuPopup:null,objId:0,lastMoveFolder:'',hasRelWeek:0,loadMainFloat:0,loadContextMenu:0,loadSearchMenu:0,attachExplains:0,contextStr:'',contextMed:'',contextForm:'',inputLine:0,contextRow:0,updatePriceComp:0,config:function(c){var s={s:''},a=$('s_alert'),e=$('context-menu'),r=$('search');if(!c.baseDomain){alert('Missing baseDomain on Filmaf.config');return;}Filmaf.baseDomain=c.baseDomain;if(c.userCollection)Filmaf.userCollection=c.userCollection=='guest'?'':c.userCollection;if(c.viewCollection)Filmaf.viewCollection=c.viewCollection=='www'?'':c.viewCollection;if(c.presentationMode)Filmaf.presentationMode=c.presentationMode;if(c.reqPageSize)Filmaf.reqPageSize=c.reqPageSize;if(c.firstRowNo)Filmaf.firstRowNo=c.firstRowNo;if(c.rowsShown)Filmaf.rowsShown=c.rowsShown;Filmaf.onPopup=c.onPopup?c.onPopup:null;if(c.objId)Filmaf.objId=c.objId;Filmaf.lastMoveFolder=decodeURIComponent(Cookie.get('move'));if(c.hasRelWeek)Filmaf.hasRelWeek=1;if(c.ulExplain)Filmaf.attachExplains=1;if(c.imgPreLoad)Img.preLoad(c.imgPreLoad);if(r)Search.create(0,0);if(c.optionsTag)DropDown.replaceOptions('sel_folder',c.optionsTag);if($('nav_bop'))Menus.cloneNav();if(c.imgHandlers||c.cartHandlers)Img.attach();if(c.cartHandlers)Price.attach();if(c.cartHandlers)Cart.highlight(false);if(c.preloadImgPop)setTimeout('ImgPop.getImgDiv();',200);if(e){if(c.ulAspect)ulAspect(s);if(c.ulBlog)ulBlog(s);if(c.ulBirth)ulBirth(s);if(c.ulCountry)ulCountry(s);if(c.ulDir)ulDir(s);if(c.ulDvd)ulDvd(s);if(c.ulDvdComments)ulDvdComments(s);if(c.ulDvdMany)ulDvdMany(s);if(c.ulDvdOne)ulDvdOne(s);if(c.ulDvdPic)ulDvdPic(s);if(c.ulDvdTitle)ulDvdTitle(s);if(c.ulExplain)ulExplain(s);if(c.ulFilmRating)ulFilmRating(s);if(c.ulGenre)ulGenre(s);if(c.ulHome)ulHome(s);if(c.ulJump)ulJump(s);if(c.ulLang)ulLang(s);if(c.ulPageSize)ulPageSize(s);if(c.ulPerson)ulPerson(s);if(c.ulPicComments)ulPicComments(s);if(c.ulPicMngt)ulPicMngt(s);if(c.ulPub)ulPub(s);if(c.ulRegion)ulRegion(s);if(r)ulSearch(s);if(c.ulStars)ulStars(s);e.innerHTML=s.s;}if(a)alert(a.innerHTML);if(c.splash)splash_me(1);},_getCookieDomain:function(){var c=document.domain?document.domain.match(/\..*\.com$/)||document.domain.match(/\..*\.net$/)||document.domain.match(/\..*\.mil$/)||document.domain.match(/\..*\.edu$/)||document.domain.match(/\..*\.gov$/):'';return typeof(c)=='object'&&c[0]?c[0]:c;}};Filmaf.cookieDomain=Filmaf._getCookieDomain();var Edit={getStr:function(e){return(e=$s(e))?e.value:'';},getStrCmp:function(e,o_changed){var s=Edit.getStr(e);if(!o_changed.b_changed&&(e=$('o_'+e.substr(2))))o_changed.b_changed=s==e.value;return s;},getInt:function(e){return Dec.parse(Edit.getStr(e));},getDbl:function(e){return Dbl.parse(Edit.getStr(e));},setStr:function(e,s){if((e=$s(e)))e.value=s;},setPrefixed:function(name,s){var e;if((e=$('n_'+name)))e.value=s;if((e=$('o_'+name)))e.value=s;if((e=$('d_'+name)))e.innerHTML=s;return s;},countDown:function(e,n){if((e=$(e))){if(n>50)e.innerHTML=n;else if(n<0)e.innerHTML="<span style='color:#bd0b0b;font-weight:bold'>"+n+"</span>";else e.innerHTML="<span style='font-weight:bold'>"+n+"</span>";}},insertAtCursor:function(e,v){var a,b,s;if(document.selection){e.focus();s=document.selection.createRange();s.text=v;}else if(e.selectionStart||e.selectionStart=='0'){a=e.selectionStart;b=e.selectionEnd;e.value=e.value.substring(0,a)+v+e.value.substring(b,e.value.length);}else{e.value+=v;}},getSel:function(e){var s='';if(window.getSelection)s=window.getSelection().toString();else if(document.getSelection)s=document.getSelection().toString();else if(document.selection)s=document.selection.createRange().text;if(!s&&e){e.focus();s=Edit.getSel(null);}return s;}};var Explain={_asAlert:0,attach:function(){var e=window.self.document.getElementsByTagName('img'),i,x;for(i=e.length;--i>=0;){x=e[i];if(x.id&&x.id.substr(0,3)=='ex_'){Context.attach(x,false,'menu-explain-pop');e.onmouseover=function(ev){Img.mouseOver(ev,this,5);};e.onmouseout=function(){Img.mouseOut(this,5);};}}},show:function(s,b_popup){Explain._asAlert=b_popup?0:1;s=s.replace(/_[0-9]+$/,'').replace(/^ex_/,'');Ajax.asynch('explain','Explain.__paint','?s='+s,0,100);var e=$('explain_div');if(e)e.innerHTML='&nbsp;';},__paint:function(){function parse(s,t){var i,u,v;s=s.split('\t');for(i=0;i<s.length;i+=2){u=s[i+1];v=Dom.decodeHtmlForInput(u);switch(s[i]){case 'keyword':t.keyword=u;break;case 'width':t.width=Dec.parse(u);break;case 'explain':t.explain=u;break;}}return typeof(t.explain)=='string';};if(Ajax.ready()){var a=Ajax.getLines(),b={},e,s,w;if(a.length>=3&&parse(a[2],b)){if(b.explain=='Not found')s='Need to write "Explain" for '+b.keyword+'.';else s=b.explain;}else{s='"Explain" is experiencing problems.\nPlease try again soon or report the issue at http://dvdaf.net.\n\nSorry for the inconvenience.';}if(!Explain._asAlert&&(e=$('explain_div'))){e.innerHTML="<div>"+s+"<div style='margin:4px 0 4px 0;text-align:right'><input type='button' value='close' onclick='Context.close()'></div></div>";}else{alert(s);}}},nav:function(s){Explain.show(s,true);}};var Img={buttons:{},_buttonsLoaded:0,_buttonsInd:{},preLoad:function(s){if(!document.images)return;var s=s.split('.'),i,a;for(i=0;i<s.length;i++){switch(s[i]){case 'pin':a=Img.buttons[0]={};a.b00=new Image();a.b00.src='http://dv1.us/d1/00/bp00.gif';a.b01=new Image();a.b01.src='http://dv1.us/d1/00/bp01.gif';a.b10=new Image();a.b10.src='http://dv1.us/d1/00/bp10.gif';a.b11=new Image();a.b11.src='http://dv1.us/d1/00/bp11.gif';a.onClick=null;a.afterClick=Search.savePin;break;case 'cart':a=Img.buttons[1]={};a.b00=new Image();a.b00.src='http://dv1.us/d1/00/bc00.png';a.b01=new Image();a.b01.src='http://dv1.us/d1/00/bc01.png';a.b10=new Image();a.b10.src='http://dv1.us/d1/00/bc10.png';a.b11=new Image();a.b11.src='http://dv1.us/d1/00/bc11.png';a.onClick=Cart.click;a.afterClick=null;break;case 'price':a=Img.buttons[2]={};a.b00=new Image();a.b00.src='http://dv1.us/d1/00/bd00.png';a.b01=new Image();a.b01.src='http://dv1.us/d1/00/bd01.png';a.b10=new Image();a.b10.src='http://dv1.us/d1/00/bd10.png';a.b11=new Image();a.b11.src='http://dv1.us/d1/00/bd11.png';a.onClick=Price.click;a.afterClick=null;break;case 'help':a=Img.buttons[3]={};a.b00=new Image();a.b00.src='http://dv1.us/d1/00/bm00.gif';a.b01=a.b00;a.b10=new Image();a.b10.src='http://dv1.us/d1/00/bm10.gif';a.b11=a.b10;a.onClick=null;a.afterClick=null;break;case 'spin':a=Img.buttons[4]={};a.b00=new Image();a.b00.src='http://dv1.us/d1/00/pn00.gif';a.b10=new Image();a.b10.src='http://dv1.us/d1/00/pn10.gif';a.b11=new Image();a.b11.src='http://dv1.us/d1/00/pn11.gif';a.onClick=ImgSpin.click;a.afterClick=null;break;case 'spin_hoz':a=Img.buttons[8]={};a.b00=new Image();a.b00.src='http://dv1.us/d1/00/ph00.gif';a.b10=new Image();a.b10.src='http://dv1.us/d1/00/ph10.gif';a.b11=new Image();a.b11.src='http://dv1.us/d1/00/ph11.gif';a.onClick=ImgSpin.click;a.afterClick=null;break;case 'explain':a=Img.buttons[5]={};a.b00=new Image();a.b00.src='http://dv1.us/d1/00/bq00.png';a.b10=new Image();a.b10.src='http://dv1.us/d1/00/bq10.png';a.onClick=Explain.show;a.afterClick=null;break;case 'drop':a=Img.buttons[6]={};a.b00=new Image();a.b00.src='http://dv1.us/d1/00/dp00.gif';a.b01=a.b00;a.b10=new Image();a.b10.src='http://dv1.us/d1/00/dp10.gif';a.b11=a.b10;a.onClick=null;a.afterClick=null;break;case 'undo':a=Img.buttons[7]={};a.b00=new Image();a.b00.src='http://dv1.us/d1/1.gif';a.b10=new Image();a.b10.src='http://dv1.us/d1/00/ud01.gif';a.b11=new Image();a.b11.src='http://dv1.us/d1/00/ud11.gif';a.b20=new Image();a.b20.src='http://dv1.us/d1/00/rd01.gif';a.b21=new Image();a.b21.src='http://dv1.us/d1/00/rd11.gif';a.onClick=Undo.click;a.afterClick=null;break;case 'pagesize':a=Img.buttons[9]={};a.b00=new Image();a.b00.src='http://dv1.us/d1/00/sz00.gif';a.b01=a.b00;a.b10=new Image();a.b10.src='http://dv1.us/d1/00/sz10.gif';a.b11=a.b10;a.onClick=null;a.afterClick=null;break;case 'aleft':a=Img.buttons[10]={};a.b00=new Image();a.b00.src='http://dv1.us/d1/00/al00.gif';a.b01=a.b00;a.b10=new Image();a.b10.src='http://dv1.us/d1/00/al10.gif';a.b11=a.b10;a.onClick=null;a.afterClick=null;break;case 'aright':a=Img.buttons[11]={};a.b00=new Image();a.b00.src='http://dv1.us/d1/00/ar00.gif';a.b01=a.b00;a.b10=new Image();a.b10.src='http://dv1.us/d1/00/ar10.gif';a.b11=a.b10;a.onClick=null;a.afterClick=null;break;case 'astop':a=Img.buttons[12]={};a.b00=new Image();a.b00.src='http://dv1.us/d1/00/as00.gif';a.b01=a.b00;a.b10=new Image();a.b10.src='http://dv1.us/d1/00/as10.gif';a.b11=a.b10;a.onClick=null;a.afterClick=null;break;case 'across':a=Img.buttons[13]={};a.b00=new Image();a.b00.src='http://dv1.us/d1/00/ax00.gif';a.b01=a.b00;a.b10=new Image();a.b10.src='http://dv1.us/d1/00/ax10.gif';a.b11=a.b10;a.onClick=null;a.afterClick=null;break;case 'acheck':a=Img.buttons[14]={};a.b00=new Image();a.b00.src='http://dv1.us/d1/00/ak00.gif';a.b01=a.b00;a.b10=new Image();a.b10.src='http://dv1.us/d1/00/ak10.gif';a.b11=a.b10;a.onClick=null;a.afterClick=null;break;case 'aplus':a=Img.buttons[15]={};a.b00=new Image();a.b00.src='http://dv1.us/d1/00/ap00.gif';a.b01=a.b00;a.b10=new Image();a.b10.src='http://dv1.us/d1/00/ap10.gif';a.b11=a.b10;a.onClick=null;a.afterClick=null;break;case 'adown':a=Img.buttons[16]={};a.b00=new Image();a.b00.src='http://dv1.us/d1/00/ad00.gif';a.b01=a.b00;a.b10=new Image();a.b10.src='http://dv1.us/d1/00/ad10.gif';a.b11=a.b10;a.onClick=null;a.afterClick=null;break;case 'tabbk':Img._buttonsInd[0]=new Image();Img._buttonsInd[0].src='http://dv1.us/d1/00/header-back-small.jpg';break;case 'spun':a=Img.buttons[17]={};a.b00=new Image();a.b00.src='http://dv1.us/d1/00/pn00.gif';a.b10=new Image();a.b10.src='http://dv1.us/d1/00/pn10.gif';a.b11=new Image();a.b11.src='http://dv1.us/d1/00/pn11.gif';a.onClick=ImgSpun.click;a.afterClick=null;break;case 'home':a=Img.buttons[18]={};a.b00=new Image();a.b00.src='http://dv1.us/d1/00/fbh0.png';a.b01=a.b00;a.b10=new Image();a.b10.src='http://dv1.us/d1/00/fbh1.png';a.b11=a.b10;a.onClick=null;a.afterClick=null;break;case 'coll':a=Img.buttons[19]={};a.b00=new Image();a.b00.src='http://dv1.us/d1/00/fbf0.png';a.b01=a.b00;a.b10=new Image();a.b10.src='http://dv1.us/d1/00/fbf1.png';a.b11=a.b10;a.onClick=null;a.afterClick=null;break;}}Img._buttonsLoaded=true;},getMouseY:function(ev,e){return Img.getCoord(ev,e).y;},getMouseX:function(ev,e){return Img.getCoord(ev,e).x;},setPin:function(e,b){Img.check(e,0,b);},getPin:function(e){return Img.isChecked(e,0);},attach:function(){var e=window.self.document.getElementsByTagName('img'),i,x;for(i=e.length;--i>=0;){x=e[i];if(x.id){switch(x.id.substr(0,3)){case 'ic_':x.onmouseover=function(ev){Img.mouseOver(ev,this,1);};x.onmouseout=function(){Img.mouseOut(this,1);};x.onclick=function(ev){Img.click(ev,this,1,this.id.substr(3));};break;case 'id_':x.onmouseover=function(ev){Img.mouseOver(ev,this,2);};x.onmouseout=function(){Img.mouseOut(this,2);};x.onclick=function(ev){Img.click(ev,this,2,this.id.substr(3));};break;case 'is_':ImgSpin.attachSpinV(x);break;case 'ex_':x.onmouseover=function(ev){Img.mouseOver(ev,this,5);};x.onmouseout=function(){Img.mouseOut(this,5);};x.onclick=function(ev){Img.click(ev,this,5,this.id.substr(3));};break;case 'dp_':x.onmouseover=function(ev){Img.mouseOver(ev,this,6);};x.onmouseout=function(){Img.mouseOut(this,6);};x.onclick=function(ev){Img.click(ev,this,6,this.id.substr(3));};break;case 'zi_':x.onmouseover=function(ev){Img.mouseOver(ev,this,7);};x.onmouseout=function(){Img.mouseOut(this,7);};x.onclick=function(ev){Img.click(ev,this,7,this.id.substr(3));};Undo.setImg(x,false);Undo.attach(x);break;case 'ih_':ImgSpin.attachSpinH(x);break;case 'sz_':x.onmouseover=function(ev){Img.mouseOver(ev,this,9);};x.onmouseout=function(){Img.mouseOut(this,9);};x.onclick=function(ev){Img.click(ev,this,9,this.id.substr(3));};break;case 'zo_':x.onmouseover=function(ev){ImgPop.show(this,0);};break;}}}},mouseOver:function(ev,img,type){if(!Img._buttonsLoaded)return;var a=Img.buttons[type],o;switch(type){case 0:case 1:case 2:case 3:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 18:case 19:o=Dec.parse(img.src.substr(img.src.length-5,1));img.src=o==2?a.b12.src:(o==1?a.b11.src:a.b10.src);img.style.cursor='pointer';break;case 4:case 17:o=Img.getMouseY(ev,img);if(o>=1&&o<=20){img.style.cursor='pointer';a=o>=11?a.b10.src:a.b11.src;if(a!=img.src)img.src=a;}break;case 5:case 6:case 9:img.style.cursor='pointer';img.src=a.b10.src;break;case 7:Undo.setImg(img,true);break;case 8:o=Img.getMouseX(ev,img);if(o>=1&&o<=20){img.style.cursor='pointer';a=o<10?a.b10.src:a.b11.src;if(a!=img.src)img.src=a;}break;}},mouseOut:function(img,type){if(!Img._buttonsLoaded)return;var a=Img.buttons[type],o;switch(type){case 0:case 1:case 2:case 3:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 18:case 19:o=Dec.parse(img.src.substr(img.src.length-5,1));img.src=o==2?a.b02.src:(o==1?a.b01.src:a.b00.src);img.style.cursor='pointer';break;case 4:case 8:case 17:img.src=a.b00.src;break;case 5:case 6:case 9:img.src=a.b00.src;break;case 7:Undo.setImg(img,false);break;}},click:function(ev,img,type,s_id){if(!Img._buttonsLoaded||!img)return;var a=Img.buttons[type],o,m,e;switch(type){case 0:if((e=ev.currentTarget||ev.srcElement))s_id=e.id;case 1:case 2:o=Dec.parse(img.src.substr(img.src.length-5,1));m=2;if(!a.onClick||a.onClick(s_id,(o+1)%m))o=(o+1)%m;if(type!=2)img.src=o==2?a.b12.src:(o==1?a.b11.src:a.b10.src);if(a.afterClick)a.afterClick(s_id);break;case 4:case 17:o=Img.getMouseY(ev,img);if(o>=1&&o<=20&&a.onClick)a.onClick(s_id,o<=10);break;case 5:case 6:case 7:case 9:if(a.onClick)a.onClick(s_id);break;case 8:o=Img.getMouseX(ev,img);if(o>=1&&o<=20&&a.onClick)a.onClick(s_id,o>10);break;}},isChecked:function(e,type){if(!(e=$s(e)))return 0;switch(type){case 0:case 1:case 2:return Dec.parse(e.src.substr(e.src.length-5,1));}return 0;},check:function(e,type,n_set){e=$s(e);if(!Img._buttonsLoaded||!e)return;switch(type){case 0:case 1:case 2:e.src=n_set==2?Img.buttons[type].b02.src:(n_set==1?Img.buttons[type].b01.src:Img.buttons[type].b00.src);break;}},getPicLoc:function(s,b_thumb){var c,p,k=s.indexOf('-');if(k>3){c=Dec.parse(s.substr(k-1,1));c='http://dv1.us';p=s.indexOf('/');if(p>=0)return c+(p>0?'/':'')+s;else if(b_thumb)return c+'/p0/'+s.substr(k-3,3)+'/'+s+'.gif';else return c+'/p1/'+s.substr(k-3,3)+'/'+s+'.jpg';}return '';},getCoord:function(ev,e){var a={x:0,y:0};if(typeof ev.pageY=='undefined'&&typeof ev.clientX=='number'&&document.documentElement){a.x=ev.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;a.y=ev.clientY+document.body.scrollTop+document.documentElement.scrollTop;}else{a.x=ev.pageX;a.y=ev.pageY;}if(e.offsetParent){a.x-=e.offsetLeft;a.y-=e.offsetTop;while(e=e.offsetParent){a.x-=e.offsetLeft;a.y-=e.offsetTop;}}return a;}};var ImgSpin={attachSpinV:function(e){e.onmouseover=function(ev){Img.mouseOver(ev,this,4);};e.onmousemove=function(ev){Img.mouseOver(ev,this,4);};e.onmousewheel=function(ev){ImgSpin._wheel(ev,this,4,this.id);};e.onmouseout=function(){Img.mouseOut(this,4);};e.onclick=function(ev){Img.click(ev,this,4,this.id);};e.ondblclick=function(ev){if(!ev)Img.click(ev,this,4,this.id);};},attachSpinH:function(e){e.onmouseover=function(ev){Img.mouseOver(ev,this,8);};e.onmousemove=function(ev){Img.mouseOver(ev,this,8);};e.onmousewheel=function(ev){ImgSpin._wheel(ev,this,8,this.id);};e.onmouseout=function(){Img.mouseOut(this,8);};e.onclick=function(ev){Img.click(ev,this,8,this.id);};e.ondblclick=function(ev){if(!ev)Img.click(ev,this,8,this.id);};},_wheel:function(ev,img,type,s_id){ev||(ev=window.event);if(ev.wheelDelta&&(!Img._buttonsLoaded||!img))return;if(ev.srcElement&&ev.srcElement.getAttribute('sp_inc')=='F')return;var a=Img.buttons[type],o=ev.wheelDelta;if(o!=0&&a.onClick)a.onClick(s_id,o>=0);ev.cancelBubble=true;ev.returnValue=false;},click:function(s,u){function ff_bounds(n,p,u){var a=p.getAttribute('sp_min'),b=p.getAttribute('sp_max');if(a&&b){switch(u){case 'int':a=Dec.parse(a);if(n<a)return a;b=Dec.parse(b);if(n>b)return b;break;case 'float':a=Dbl.parse(a);if(n<a)n=a;b=Dbl.parse(b);if(n>b)n=b;n=Dbl.toStr(n,'');break;}}return n;};var k,e,p=$(s);if(p){k=p.getAttribute('sp_inc');if(k=='F'){Folders.onSpin(s,u);}else{if((e=$('n_'+s.substr(5)))){switch(k){case '0':s=Edit.getInt(e)+(u?1:-1);u='int';break;case '1':s=Edit.getInt(e)+(u?10:-10);u='int';break;case '2':s=Edit.getInt(e)+(u?100:-100);u='int';break;case '3':s=Edit.getInt(e)+(u?1000:-1000);u='int';break;case '4':s=Edit.getInt(e)+(u?10000:-10000);u='int';break;case 'a':s=Math.floor(Edit.getInt(e)/10)*10+(u?10:-10);u='int';break;case 'b':s=Math.floor(Edit.getInt(e)/100)*100+(u?100:-100);u='int';break;case 'c':s=Math.floor(Edit.getInt(e)/1000)*1000+(u?1000:-1000);u='int';break;case 'd':s=Math.floor(Edit.getInt(e)/10000)*10000+(u?10000:-10000);u='int';break;case 'e':s=Math.floor(Edit.getInt(e)/100000)*100000+(u?100000:-100000);u='int';break;case 'A':s=Edit.getDbl(e)+(u?0.01:-0.01);u='float';break;case 'B':s=Edit.getDbl(e)+(u?0.1:-0.1);u='float';break;case 'C':s=Edit.getDbl(e)+(u?1:-1);u='float';break;case 'D':s=Edit.getDbl(e)+(u?10:-10);u='float';break;case 'E':s=Edit.getDbl(e)+(u?100:-100);u='float';break;default:return;}e.value=ff_bounds(s,p,u);Undo.change(e);}}}}};var Menus={setup:function(){if($('main-menu'))DynarchMenu.setup('main-menu',{lazy:true,electric:1000,tooltips:true,scrolling:true});if($('context-menu'))Context.setup();if($('search'))Search.setup(1);if(Filmaf.attachExplains)Explain.attach();},cloneNav:function(){var e,f;if((e=$('nav_top'))&&(f=$('nav_bop'))){f.innerHTML=e.innerHTML.replace(/<td width=.8%.><select.*\/select><\/td>/i,'').replace(/sz_page_0/,'sz_page_1').replace(/ex_www_titles_disks_0/,'ex_www_titles_disks_1').replace(/ex_www_dvd_cart_0/,'ex_www_dvd_cart_1').replace(/cart_count_0/,'cart_count_1').replace(/dp_jump_0/,'dp_jump_1');}}};var Seed={_ip:'',_time_offset:0,init:function(){var e;if((e=$('h_ip')))Seed._ip=e.value;else alert('ERROR on Seed.init(): Missing h_ip reference value');if((e=$('h_time')))Seed._time_offset=Edit.getInt(e)-(new Date()).getTime();else alert('ERROR on Seed.init(): Missing h_time reference value');},get:function(){var d=new Date();d.setTime(d.getTime()+Seed._time_offset);return DateTime.toTimeStr(d)+' '+Seed._ip;}};var Str={trim:function(s){return s.replace(/^[\s]+/,''). replace(/[\s]+$/,''). replace(/[\t\r\x20]+/g,' '). replace(/\x20\n/g,'\n').replace(/\n\x20/g,'\n');},trimR:function(s){return s.replace(/[\s]+$/,''). replace(/[\t\r\x20]+/g,' '). replace(/\x20\n/g,'\n').replace(/\n\x20/g,'\n');},trimL:function(s){return s.replace(/^[\s]+/,''). replace(/[\t\r\x20]+/g,' '). replace(/\x20\n/g,'\n').replace(/\n\x20/g,'\n');},firstLine:function(s){var n;s=s.replace(/^[\s]+/,'');if((n=s.indexOf('\n'))>1)s=s.substr(0,n);return s.replace(/[\s]+$/,''). replace(/[\s]+/g,' ');},ucFirst:function(s){return s.substr(0,1).toUpperCase()+s.substr(1);},ucWords:function(s){return(s).replace(/^(.)|\s(.)/g,function($1){return $1.toUpperCase();});},ucTitle:function(s){var x=s.split(' '),t=x.length,i,w;for(i=0,s='';i<t;i++){w=x[i];s+=' '+(i&&',the,a,an,aboard,about,above,across,after,against,along,amid,among,anti,around,as,at,before,behind,below,beneath,beside,besides,between,beyond,but,by,concerning,considering,despite,down,during,except,excepting,excluding,following,for,from,in,inside,into,like,minus,near,of,off,on,onto,opposite,outside,over,past,per,plus,regarding,round,save,since,than,through,to,toward,towards,under,underneath,unlike,until,up,upon,vs,versus,via,with,within,without,and,but,for,nor,or,so,yet,to,'.indexOf(','+w+',')>=0?w:w.substr(0,1).toUpperCase()+w.substr(1));}return s.substr(1);},hasSameVal:function(e,f){if((e=$s(e))&&(f=$s(f))&&Str.trim(e.value)!=Str.trim(f.value)){f.style.color='red';f.style.background='#ffcccc';Validate.warn(e,true,true,'The password and the password confirmation fields do not match.',false);return false;}return true;},validateN:function(s_field,n_cnt,o_changed,n_min_len,n_max_len,b_allow_empty,s_name,b_must_change){var i,b;for(i=0,b=true;b!==false&&i<n_cnt;i++)b=Str.validate(s_field+i,o_changed,n_min_len,n_max_len,i?1:b_allow_empty,i?s_name+(i+1):Str.trim(s_name),i?0:b_must_change);return b!==false;},validate:function(s_field,o_changed,n_min_len,n_max_len,b_allow_empty,s_name,b_must_change){var s,n,e_new,e_old,b_same;if((e_new=$(s_field))){if(o_changed&&!o_changed.b_undo&&(e_old=$('z_'+s_field.substr(2))))o_changed.b_undo=Str.trim(e_new.value)!=Str.trim(e_old.value);b_same=(e_old=$('o_'+s_field.substr(2)))&&(s=Str.trim(e_new.value))==Str.trim(e_old.value);if(b_same&&!b_must_change)return s;s=Validate.checkEmptiness(e_new,b_allow_empty,s_name);if(s===false)return false;if(!e_old&&s=='')b_same=true;n=s.length;if(n_max_len>0&&n>n_max_len){Validate.warn(e_new,true,true,s_name+' must have no more than '+n_max_len+' characters. You entered '+n+'.',false);return false;}if(n_min_len>0&&n<n_min_len){Validate.warn(e_new,true,true,s_name+' must have at least '+n_min_len+' characters. You entered '+n+'.',false);return false;}if(o_changed&&!o_changed.b_changed)o_changed.b_changed=!b_same;e_new.value=s;return s;}return '';}};var Undo={_redo:{},setImg:function(x,b){var e,f,n,z,s,t='';s=x.id.substr(3);e=$('n_'+s);f=$('z_'+s);if(!e||!f)return;if(e&&e.type=='radio')return;n=e?(e.type=='checkbox'?(e.checked?'Y':'N'):e.value):'';z=f?f.value:'';if(n!=z){s=b?Img.buttons[7].b11.src:Img.buttons[7].b10.src;t='Undo';}else{if(n==Undo._getRedo(s)){s=Img.buttons[7].b00.src;}else{s=b?Img.buttons[7].b21.src:Img.buttons[7].b20.src;t='Redo';}}if(s!=x.src)x.src=s;x.title=t;},attach:function(x){var e,i,n='n'+x.id.substr(2);if((e=$(n))&&e.id==n){switch(e.tagName){case 'INPUT':switch(e.type){case 'text':e.onchange=e.onkeyup=e.onpaste=e.onblur=e.onmouseout=function(){Undo.change(this);};break;case 'checkbox':e.onclick=function(){Undo.change(this);};break;case 'hidden':break;default:alert('Missing attachUndo:1('+e.type+') for '+e.id);break;}break;case 'TEXTAREA':e.onchange=e.onkeyup=e.onpaste=e.onblur=e.onmouseout=function(){Undo.change(this);};break;case 'SELECT':e.onchange=function(){Undo.change(this);};break;default:alert('Missing attachUndo:2('+e.tagName+') for '+e.id);break;}}},set:function(e,v){if((e=$s(e))){switch(e.tagName){case 'INPUT':switch(e.type){case 'text':e.value=v;Undo.change(e);break;case 'hidden':e.value=v;Undo.change(e);Undo._updateDecode('g'+e.id.substr(1),v);break;case 'checkbox':e.checked=v!='N';Undo.change(e);break;default:alert('Missing Undo.set('+e.type+') for '+e.id);break;}break;case 'TEXTAREA':e.value=v;Undo.change(e);break;case 'SELECT':DropDown.selectFromVal(e,v);Undo.change(e);break;default:alert('Missing Undo.set('+e.tagName+') for '+e.id);break;}if(typeof(e.notifySet)=='function')e.notifySet();}},change:function(e){e=e.type=='radio'?e.id.substr(1,e.id.length-3):e.id.substr(1);e=$('zi'+e);if(e)Undo.setImg(e,false);},click:function(s,u){var n,z,g,nv,zv,ov;n=$('n_'+s);nv=n?(n.type=='checkbox'?(n.checked?'Y':'N'):n.value):'';z=$('z_'+s);zv=z?z.value:'';g=$('g_'+s);ov=Undo._getRedo(s);if(n&&z){if(nv!=zv){Undo._redo[s]=nv;Undo.set(n,zv);if(g)Undo.set(g,Decode.field(n.id,zv));}else{if(nv!=ov){Undo.set(n,ov);if(g)Undo.set(g,Decode.field(n.id,ov));}}}},_getRedo:function(s){if(typeof(Undo._redo[s])!="undefined")return Undo._redo[s];s=$('o_'+s);return s?(s.type=='checkbox'?(s.checked?'Y':'N'):s.value):'';},_updateDecode:function(e,s){if((e=$s(e)))if((s=Decode.field(e.id,s)))e.value=s;}};var Url={test:function(ev){ev||(ev=window.event);var s=ev.currentTarget||ev.srcElement,e,u;if(ev&&s&&(e=$('n'+s.id.substr(1)))){u=Url.parse(e.value);if(u===false||u.substr(0,7)!='http://')alert('The URL you provided did not start with\nhttp://');else Win.openStd(u,'url');}},getVal:function(key,href){var u=(href||location.href),i=u.indexOf('?');if(i>=0){u='&'+u.substr(i+1);i=u.indexOf('&'+key+'=');if(i>=0){u=u.substr(i+key.length+2);i=u.indexOf('&');if(i>=0)u=u.substr(0,i);return decodeURIComponent(u);}else{i=u.indexOf('&amp;'+key+'=');if(i>=0){u=u.substr(i+key.length+6);i=u.indexOf('&amp;');if(i>=0)u=u.substr(0,i);return decodeURIComponent(u);}}}return '';},setVal:function(key,val,href){var u=(href||location.href),i=u.indexOf('?'),p=i>=0?'&'+u.substr(i+1).replace('/&amp;/','&'):'',s=val!==''?'&'+key+'='+val:'';if(i>=0)u=u.substr(0,i);p=p.indexOf('&'+key+'=')>=0?p.replace(new RegExp('&'+key+'=[^&]*'),s):p+s;return(u+(p?'?'+p.substr(1):'')).replace('/&/','&amp;');},getDec:function(key,href){return Dec.parse(Url.getVal(key,href));},fromStr:function(s){return escape(Str.firstLine(s)).replace(/\+/g,'%2B'). replace(/%20+/g,'\+'). replace(/%26+/g,'\&amp;'). replace(/\&/g,'\&amp;');},parse:function(s){var m;if((s=Str.trim(s))!=''&&s!='http://'){m=new RegExp("^http:\/\/[a-zA-Z0-9_\.,@?^=%&;:/~\+#\(\)-]*$");if(m.test(s))return s=='http://'?'':s;return false;}return '';},validate:function(s_field,s_start,o_changed,n_max_len,b_allow_empty,s_name,b_must_change){var s,e_new,e_old,b_same;if((e_new=$(s_field))){if(o_changed&&!o_changed.b_undo&&(e_old=$('z_'+s_field.substr(2))))o_changed.b_undo=Str.trim(e_new.value)!=Str.trim(e_old.value);b_same=(e_old=$('o_'+s_field.substr(2)))&&(s=Str.trim(e_new.value))==Str.trim(e_old.value);if(b_same&&!b_must_change)return s;s=Validate.checkEmptiness(e_new,b_allow_empty,s_name);if(s===false)return false;if(!e_old&&s=='')b_same=true;s=Url.parse(s);if(s===false||(s!=''&&(s_start&&s.substr(0,s_start.length)!=s_start))){if(!s_start)s_start='http://';Validate.warn(e_new,true,true,"Your "+s_name+" seems to be invalid.\n\nWe expected something starting with:\n        "+s_start+"\n\nDo you want to fix it?",false);return false;}n=s.length;if(n_max_len>0&&n>n_max_len){Validate.warn(e_new,true,true,s_name+' must have no more than '+n_max_len+' characters. You entered '+n+'.',false);return false;}if(o_changed&&!o_changed.b_changed)o_changed.b_changed=!b_same;e_new.value=s;return s;}return '';}};var Validate={checkEmptiness:function(e_new,b_allow_empty,s_name){var s=Str.trim(e_new.value),a;if(s==''&&!b_allow_empty){a='aeiou'.indexOf(s.substr(0,1).toLowerCase())>=0?'an':'a';Validate.warn(e_new,true,true,'Please enter '+a+' '+s_name.toLowerCase()+'.',false);return false;}return s;},reset:function(s_field){var a=s_field.split(','),e,i;for(i=0;i<a.length;i++){if((e=$(a[i]))){e.style.color='';e.style.background='';}}},makeResetStr:function(s_field,n){var s='',i;for(i=0;i<n;i++)s+=s_field+n+',';return s;},warn:function(o_focus,b_focus,b_fatal,s_alert,b_allow_overwrite){var y=false;if(o_focus&&o_focus.type=='hidden'){var e=$('g'+o_focus.id.substr(1));o_focus=(e&&e.focus&&e.type!='hidden')?e:null;}if(b_focus&&o_focus!=null){if(b_fatal){o_focus.style.color='red';o_focus.style.background='#ffcccc';}else{if(o_focus.style.color!='red'){o_focus.style.color='green';o_focus.style.background='#ccffcc';}}}if(b_allow_overwrite)y=confirm(s_alert+'\n\nDo you wish to ignore this error?\n\nOK=Yes - Cancel=No');else alert(s_alert);if(o_focus!=null&&o_focus.focus){if(b_focus)o_focus.focus();if(o_focus.select)o_focus.select();}return y;},reload:function(s_url){var y=confirm('Discard changes and reaload data?\n\nOK=Yes - Cancel=No');if(y){location.href=s_url;return true;}return false;},save:function(b_alert_no_change,n_nav,c){var f=$('myform'),b,e;if(f){if(n_nav&&n_nav!=0)f.action+=(f.action.indexOf('?')>=0?'&':'?')+'pg='+n_nav;if(c.b_changed){if(!c.b_undo){b=confirm('The fields in this submission are the same as the current information for this title.\n\nDo you wish to withdraw this submission request?\n\nOK=Yes - Cancel=No');if(b&&(e=$('act'))){e.value='del_sub';f.action=location.href;}}f.submit();}else{location.href=f.action;if(b_alert_no_change)alert('No changes detected.  Nothing to save.');}}}};var Win={openPop:function(b_refresh,s_target,s_url,n_width,n_height,b_reduced,b_scroll){s_url=s_url.replace(/\&amp;/g,'&');b_scroll=b_scroll?'1':'0';if(b_refresh){var t=new Date();s_url=s_url+(s_url.indexOf('?')<0?'?':'&')+'refresh='+t.getTime();}var o_wnd=window.open(s_url,s_target,(b_reduced?'resizable=1,menubar=0,toolbar=0,location=0,directories=0,scrollbars='+b_scroll+',status=0,titlebar=0'+(n_width>0&&n_height>0?',width='+n_width+'px,height='+n_height+'px':''):''));if(o_wnd)o_wnd.focus();return false;},openStd:function(s_url,w){s_url=s_url.replace(/\&amp;/g,'&');if(typeof(w)=='object')if(!w||w.closed)w=window.open(s_url);else w.location=s_url;else w=window.open(s_url,w);if(w)w.focus();return true;},openDyn:function(s_target,s_title,n_width,n_height,b_reduced,s_inc,s_onload,b_scroll){b_scroll=b_scroll?'1':'0';var o_wnd=window.open('',s_target,(b_reduced?'resizable=0,menubar=0,toolbar=0,location=0,directories=0,scrollbars='+b_scroll+',status=0,titlebar=0'+(n_width>0&&n_height>0?',width='+n_width+'px,height='+n_height+'px':''):''));if(o_wnd){o_wnd.document.writeln("<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'DTD/xhtml1-transitional.dtd'>\n<html xmlns='http://www.w3.org/1999/xhtml' xml:lang='en' lang='en'>\n<head>\n<title>"+s_title+"</title>\n<meta http-equiv='Content-type' content='text/html; charset=UTF-8' />\n"+s_inc+"</head>\n<body onload='"+(s_onload?s_onload+';':'')+"self.focus()'>");}return o_wnd;},endDyn:function(o_wnd){if(o_wnd){o_wnd.document.writeln("</body>\n</html>");o_wnd.document.close();}},showPic:function(s_pic){Win.openPop(false,'large_pic',Filmaf.baseDomain+'/utils/lp.html?pic='+s_pic,354,468,1,0);},reauth:function(s_redirect){if(!s_redirect)s_redirect='/utils/close.html%3Fmsg%3D1';Win.openPop(0,'_blank','/utils/login.html?redirect='+s_redirect,680,520,1,0);},findFrame:function(s_id){var i;for(i=0;i<parent.frames.length;i++){var elid;try{elid=parent.frames[i].frameElement.id}catch(e){elid='verbotten';}if(elid==s_id)return parent.frames[i].document;}return 0;}};function ulExplain(s){s.s+="<li id='menu-explain-pop' class='context-class-a-explain'><ul id='explain_pop'><li><div style='margin:4px 0 4px 0;width:300px'><form id='mform_explain' name='mform_explain' onsubmit='return false' action=''><div id='explain_div' style='margin:4px 0 4px 0'><div><div style='margin:4px 0 4px 0;text-align:right'><input type='button' value='close' onclick='Context.close()'></div></div></div></form></div></li></ul></li>";};function ulPicComments(s){s.s+="<li id='menu-modpic' onclick='onMenuClick(this)'><ul id='help_mpi'><li id='hm_mpi_11'><a><div style='color:blue'>THANKS:</div><div style='width:300px;font-size:9px' id='mpi11'>Thanks!</div></a></li><li></li><li id='hm_mpi_21'><a><div style='color:orange'>PLS UP BETTER PIC SOON:</div><div style='width:300px;font-size:9px' id='mpi21'>Okay for now. Please upload a better version of the artwork as soon as you can. Thanks.</div></a></li><li></li><li id='hm_mpi_31'><a><div style='color:red'>PIC WATERMARKED:</div><div style='width:300px;font-size:9px' id='mpi31'>Sorry, the uploaded picture is watermarked.</div></a></li><li></li><li id='hm_mpi_32'><a><div style='color:red'>PIC TOO POOR:</div><div style='width:300px;font-size:9px' id='mpi32'>Sorry, the uploaded picture is too poor.</div></a></li><li></li><li id='hm_mpi_33'><a><div style='color:red'>PIC TOO SMALL:</div><div style='width:300px;font-size:9px' id='mpi33'>Sorry, the uploaded picture is too small.</div></a></li><li></li><li id='hm_mpi_34'><a><div style='color:red'>ALREADY IN - RECENT:</div><div style='width:300px;font-size:9px' id='mpi34'>Sorry, we just approved another submission for this picture.</div></a></li><li></li><li id='hm_mpi_35'><a><div style='color:red'>DIFFERENT EDITION:</div><div style='width:300px;font-size:9px' id='mpi35'>The picture you uploaded seems to belong to a different edition. If you can not find that edition in the database please submit it as a new title. Thanks!</div></a></li></ul></li>";};function ulPicMngt(s){s.s+="<li class='context-class-input-mp'><ul id='help_pic' onclick='onMenuClick(this)'><li id='hm_pic_lg'>Show larger picture</li><li></li><li id='hm_pic_ed'>Edit</li><li id='hm_pic_de'>Delete</li><li id='hm_pic_be'>Replace with better quality pic<ul><li><div class='pop_div' style='white-space:nowrap;text-align:center;width:288px;padding-bottom:6px'><form enctype='multipart/form-data' id='beform' name='beform' method='post' action='/utils/x-pic-edit.html' target='target_pic'><div style='background-color:#144067;padding:4px 0 2px 0;font:bold 11px \"Trebuchet MS\";color:#fff;margin-bottom:10px'>Replace Picture with One of Better Quality</div>Please select the picture you wish to upload:<div style='margin:10px 0 10px 0'><input type='file' name='file' size='30' /></div><input type='hidden' id='act' name='act' value='rep' /><input type='hidden' id='step' name='step' value='upload' /><input type='hidden' id='pic' name='pic' value='' /><input type='hidden' id='pic_edit' name='pic_edit' value='' /><input type='hidden' id='obj_type_r' name='obj_type' value='' /><input type='hidden' id='obj_r' name='obj' value='' /><input type='hidden' id='obj_edit_r' name='obj_edit' value='' /><input type='hidden' id='seed_r' name='seed' value='' /><input type='hidden' id='replace_pic' name='replace_pic' value='' /><input type='submit' value='Upload' style='width:100px' /></form></div></li></ul></li><li id='hm_pic_wi'>Withdraw request</li><li></li><li id='hm_pic_df'>Make default picture</li></ul></li><li id='menu-pic' onclick='onMenuClick(this)'><ul id='help_new'><li><div class='pop_div' style='white-space:nowrap;text-align:center;width:288px;padding-bottom:6px'><form enctype='multipart/form-data' id='nwform' name='nwform' method='post' action='/utils/x-pic-edit.html' target='target_pic'><div style='background-color:#144067;padding:4px 0 2px 0;font:bold 11px \"Trebuchet MS\";color:#fff;margin-bottom:10px'>Add New Picture</div>Please select the picture you wish to upload:<div style='margin:10px 0 10px 0'><input type='file' name='file' size='30' /></div><input type='hidden' id='act' name='act' value='new' /><input type='hidden' id='step' name='step' value='upload' /><input type='hidden' id='obj_type_n' name='obj_type' value='' /><input type='hidden' id='obj_n' name='obj' value='' /><input type='hidden' id='obj_edit_n' name='obj_edit' value='' /><input type='hidden' id='seed_n' name='seed' value='' /><input type='submit' value='Upload' style='width:100px' /></form></div></li></ul></li>";};var PicEdit={setup:function(){if((e=$('myform'))){Img.attach();Menus.setup();Context.attach('mod_txt',false,'menu-modpic');}},onPopup:function(el){if(!this.id)return;var i=this.menu.items,t=this.menu.target,z=this;switch(this.id){default:z.filmaf=ObjEdit.onPopup;z.filmaf(this,el);break;}},onClick:function(action){if(action.info&&action.info.id){var id=action.info.id;switch(id.substr(0,7)){case 'hm_mpi_':PicEdit._prependReviwerNotes(id.substr(7));break;}}},_prependReviwerNotes:function(e){var f=$('n_p_reviewer_notes');if(f&&(e=$('mpi'+e)))f.value=e.innerHTML;},reject:function(){var b=true,c={b_changed:false},e=$('n_p_reviewer_notes'),f=$('modjust'),g=$('rjform');if(!e||!f||!g)return true;Validate.reset('n_p_reviewer_notes');if(Str.validate('n_p_reviewer_notes',c,0,1000,false,'Reviewer notes',true)!==false){f.value=e.value;PicMngt._picEdit(PicMngt._getpicEditUrl('rej',0,Url.getVal('pic_edit')),'',g);}},deleteApproval:function(){PicMngt._picEdit(PicMngt._getpicEditUrl('dap',Url.getVal('pic'),Url.getVal('pic_edit')),'',0);},reset:function(){var e;if((e=$('n_p_img_treatment_B')))e.checked=true;if((e=$('n_p_rot_degrees')))e.value='0';if((e=$('n_p_rot_degrees_x')))e.value='0';if((e=$('n_p_crop_fuzz')))e.value='0';if((e=$('n_p_crop_x1')))e.value='0';if((e=$('n_p_crop_x2')))e.value='0';if((e=$('n_p_crop_y1')))e.value='0';if((e=$('n_p_crop_y2')))e.value='0';if((e=$('n_p_black_pt')))e.value='0';if((e=$('n_p_white_pt')))e.value='100';if((e=$('n_p_gamma')))e.value='1.0';},validate:function(b_save,b_as_new){var b=true,c={b_changed:false},d={b_changed:false},e,f,pn,rn,mod;if(!(f=$('myform')))return true;pn=(e=$('n_p_proposer_notes'))&&!e.readOnly;rn=(e=$('n_p_reviewer_notes'))&&!e.readOnly;mod=(e=$('mod'))&&e.value=='1';Validate.reset((pn?'n_p_proposer_notes,':'')+(rn?'n_p_reviewer_notes,':'')+'n_p_copy_holder,n_p_copy_year,n_p_caption,n_p_rot_degrees,n_p_rot_degrees_x,n_p_crop_fuzz,n_p_crop_x1,n_p_crop_x2,n_p_crop_y1,n_p_crop_y2,n_p_black_pt,n_p_white_pt,n_p_gamma');if(Str.validate('n_p_copy_holder',c,0,100,1,'Copyright holder',1)!==false)if(Dec.validate('n_p_copy_year',c,1880,new Date().getFullYear(),1,'Copyright year',1)!==false)if(Str.validate('n_p_caption',c,0,1000,1,'Picture caption text',1)!==false)if(Dbl.validate('n_p_rot_degrees',d,-360,360,1,'Rotation in degrees',1,0)!==false)if(Dec.validate('n_p_rot_degrees_x',d,-100,100,1,'Rotation in Y pixels',1)!==false)if(Dbl.validate('n_p_crop_fuzz',d,0,100,1,'Autocrop fuzz',1,0)!==false)if(Dec.validate('n_p_crop_x1',d,0,2000,1,'Left margin',1)!==false)if(Dec.validate('n_p_crop_x2',d,0,2000,1,'Right margin',1)!==false)if(Dec.validate('n_p_crop_y1',d,0,2000,1,'Top margin',1)!==false)if(Dec.validate('n_p_crop_y2',d,0,2000,1,'Bottom margin',1)!==false)if(Dec.validate('n_p_black_pt',d,0,90,1,'Levels black point',1)!==false)if(Dec.validate('n_p_white_pt',d,10,100,1,'Levels white point',1)!==false)if(Dbl.validate('n_p_gamma',d,0.10,3,1,'Gamma adjustment',1,0)!==false)if(!pn||Str.validate('n_p_proposer_notes',c,0,1000,mod,'Justification',!mod)!==false)if(!rn||Str.validate('n_p_reviewer_notes',c,0,1000,1,'Reviewer notes',1)!==false){if((e=$('z_p_pic_type'))&&(e=$('n_p_pic_type_'+e.value))&&!e.checked)c.b_changed=true;if((e=$('z_p_img_treatment'))&&(e=$('n_p_img_treatment_'+e.value))&&!e.checked)d.b_changed=true;var b_text=c.b_changed,b_img=d.b_changed;if((e=$('step')))e.value=b_save?'save':'preview';if(b_save){b_save=b_text||b_img;if(!b_save&&(e=$('preview')))b_save=e.value=='1';if(!b_save&&(e=$('act')))b_save=e.value=='rep'||e.value=='new';if(!b_save)b_save=mod;if(b_save){if(b_as_new){if((e=$('act')))e.value='asnew';if((e=$('pic')))e.value='0';}f.submit();}else{alert('No changes detected.  Nothing to save.');}}else{if(b_img)f.submit();else alert('No image changes detected.  Preview already reflects chosen transforms.');}}return false;}};var PicMngt={inputPicName:'',inputPicDispo:'',inputPicReq:'',inputPicMod:'',inputPicId:0,inputPicEditId:0,setup:function(){var e;if((e=$('myform'))){Menus.setup();Context.attach('b_add',false,'menu-pic');Seed.init();}},onPopup:function(el){if(!this.id)return;var i=this.menu.items,t=this.menu.target,d=true,e,a;switch(this.id){case 'help_pic':a=(Filmaf.inputLine=t.id).split('_');PicMngt.inputPicName=a[1];PicMngt.inputPicId=a[2];PicMngt.inputPicEditId=a[3];PicMngt.inputPicDispo=a[4];PicMngt.inputPicReq=a[5];PicMngt.inputPicMod=a[6];if((e=$('def_pic')))d=e.value==PicMngt.inputPicId;e=PicMngt.inputPicEditId!=0;i.hm_pic_lg.disable(PicMngt.inputPicReq=='D');i.hm_pic_ed.disable(PicMngt.inputPicReq=='D');i.hm_pic_de.disable(e||d);i.hm_pic_be.disable(e);i.hm_pic_wi.disable(PicMngt.inputPicMod=='M'||!e);i.hm_pic_df.disable(e||d);if((e=$('pic')))e.value=PicMngt.inputPicId;if((e=$('pic_edit')))e.value=PicMngt.inputPicEditId;if((e=$('obj_type_r')))e.value=Url.getVal('obj_type');if((e=$('obj_r')))e.value=Url.getVal('obj');if((e=$('obj_edit_r')))e.value=Url.getVal('obj_edit');if((e=$('seed_r')))e.value=Seed.get();if((e=$('replace_pic')))e.value=PicMngt.inputPicName;break;case 'help_new':Filmaf.inputLine='new';if((e=$('obj_type_n')))e.value=Url.getVal('obj_type');if((e=$('obj_n')))e.value=Url.getVal('obj');if((e=$('obj_edit_n')))e.value=Url.getVal('obj_edit');if((e=$('seed_n')))e.value=Seed.get();break;case 'explain_pop':Explain.show(t.id,true);break;}},onClick:function(action){if(action.info&&action.info.id){var id=action.info.id;switch(id.substr(0,7)){case 'hm_pic_':switch(id.substr(7)){case 'lg':Win.showPic(PicMngt.inputPicName);break;case 'ed':PicMngt._picEdit(PicMngt._getpicEditUrl(0,PicMngt.inputPicId,PicMngt.inputPicEditId),'',0);break;case 'de':PicMngt._picEdit(PicMngt._getpicEditUrl('del',PicMngt.inputPicId,0),'Are you sure this picture is incorrectly assigned to this title?\n\nOK=Yes - Cancel=No',0);break;case 'wi':PicMngt._picEdit(PicMngt._getpicEditUrl('wdr',0,PicMngt.inputPicEditId),'Are you sure you want to withdraw your request?\nThere is no going back.\n\nOK=Yes - Cancel=No',0);break;case 'df':PicMngt._picEdit(PicMngt._getpicEditUrl('def',PicMngt.inputPicId,PicMngt.inputPicEditId),'Are you sure you want to make this the default picture for this listing?\n\nOK=Yes - Cancel=No',0);break;}break;}}},_getpicEditUrl:function(s_act,n_pic,n_pic_edit){var n_obj_edit=Url.getDec('obj_edit'),n_obj=Url.getDec('obj'),n_pdvd=Url.getDec('pdvd'),s_obj_type=Url.getVal('obj_type'),s_parm;if(typeof(n_pic)=='string')n_pic=Dec.parse(n_pic);if(typeof(n_pic_edit)=='string')n_pic_edit=Dec.parse(n_pic_edit);s_parm=(s_act?'&act='+s_act:'')+(n_pic?'&pic='+n_pic:'')+(n_pic_edit?'&pic_edit='+n_pic_edit:'')+(s_obj_type?'&obj_type='+s_obj_type:'')+(n_obj?'&obj='+n_obj:'')+(n_obj_edit?'&obj_edit='+n_obj_edit:'')+(n_pdvd?'&pdvd='+n_pdvd:'');return '/utils/x-pic-edit.html?'+s_parm.substr(1);},_picEdit:function(s_url,s_ask,submit){var y=true;if(s_ask)y=confirm(s_ask);if(y){if(submit){submit.action=s_url;submit.submit();}else{Win.openStd(s_url,'target_pic');}}},undo:function(){var e,f;if((f=$('o_p_img_treatment')))if((e=$('n_p_img_treatment_'+f.value)))e.checked=true;if((e=$('n_p_rot_degrees'))&&(f=$('o_p_rot_degrees')))e.value=f.value;if((e=$('n_p_rot_degrees_x'))&&(f=$('o_p_rot_degrees_x')))e.value=f.value;if((e=$('n_p_crop_fuzz'))&&(f=$('o_p_crop_fuzz')))e.value=f.value;if((e=$('n_p_crop_x1'))&&(f=$('o_p_crop_x1')))e.value=f.value;if((e=$('n_p_crop_x2'))&&(f=$('o_p_crop_x2')))e.value=f.value;if((e=$('n_p_crop_y1'))&&(f=$('o_p_crop_y1')))e.value=f.value;if((e=$('n_p_crop_y2'))&&(f=$('o_p_crop_y2')))e.value=f.value;if((e=$('n_p_black_pt'))&&(f=$('o_p_black_pt')))e.value=f.value;if((e=$('n_p_white_pt'))&&(f=$('o_p_white_pt')))e.value=f.value;if((e=$('n_p_gamma'))&&(f=$('o_p_gamma')))e.value=f.value;}};var ObjEdit={onPopup:function(z,el){if(!z.id)return;var i=z.menu.items,t=z.menu.target;switch(z.id){case 'help_dir':case 'help_pub':Filmaf.inputLine=t.id;ObjEdit._contextPubDir(t);break;case 'help_rno':Filmaf.inputLine=t.id;ObjEdit._contextRegion(t);break;case 'help_gno':Filmaf.inputLine=t.id;ObjEdit._contextGenre(i,t);break;case 'explain_pop':Explain.show(t.id,true);break;default:Filmaf.inputLine=t.id;break;}},onClick:function(z,action){if(!action.info||!action.info.id)return;var id=action.info.id,md=id.substr(0,7),tg=Filmaf.inputLine.substr(2);if(!(id=id.substr(7)))return;switch(md){case 'hm_gno_':ObjEdit._setGenre(tg,action,id);break;case 'hm_fro_':ObjEdit._setRating(tg,action,id);break;case 'hm_cno_':case 'hm_lno_':ObjEdit._setCountryLang(tg,action,id);break;case 'hm_mas_':ObjEdit._setAspectRatio(tg,id);break;}},_contextPubDir:function(t){},_contextRegion:function(t){var e=$('n_a_media_type'),t='',i='';if(e){switch(DropDown.getSelValue(e)){case 'D':case 'V':t='Click on the map to select the appropriate DVD Region Code.';i="<img src='http://dv1.us/d1/region-dvd.gif' width='450' height='218' border='0' usemap='#region_dvd_map' style='img:focus:outline:none' />";break;case 'B':case '3':case '2':case 'R':t='Click on the map to select the appropriate Blu-ray Region Code.';i="<img src='http://dv1.us/d1/region-bd.gif' width='450' height='218' border='0' usemap='#region_bd_map' style='img:focus:outline:none' />";break;case 'H':case 'C':case 'T':case 'A':t='HD DVDs and DVD Audios do not have region code restrictions.';i="<img src='http://dv1.us/d1/region-sat.gif' width='450' height='218' border='0' usemap='#region_sat_map' style='img:focus:outline:none' />";break;case 'P':case 'O':default:t='Region codes are not applicable to this media type.';i="<img src='http://dv1.us/d1/region-sat.gif' width='450' height='218' border='0' usemap='#region_sat_map' style='img:focus:outline:none' />";break;}}if((e=$('help_rno_txt')))e.innerHTML=t;if((e=$('help_rno_img')))e.innerHTML=i;},_contextGenre:function(i,t){i.hm_gno_99999.label=t.id=='b_b_genre'?'Use Default Genre':'Unspecified Genre';i.hm_gno_99999.labelTD.innerHTML="<a><strong>"+i.hm_gno_99999.label+'</strong></a>';},_setGenre:function(tg,action,id){var e,i,j;if(id=='00000')i=id='';else{i=action.info.parent&&action.info.parent.parent_item&&action.info.parent.parent_item.label;j=action.info.label.substr(0,1)=='<'?false:action.info.label;i=j?(i?i+' / '+j:j):i;}if((e=$('g_'+tg)))e.value=i;if((e=$('n_'+tg))){e.value=id;Undo.change(e);}},_setRating:function(tg,action,id){var e,i,j;i=action.info.parent&&action.info.parent.parent_item&&action.info.parent.parent_item.label;j=action.info.label.substr(0,1)=='<'?false:action.info.label;i=j?(i?i+' / '+j:j):i;if((e=$('g_'+tg)))e.value=i;if((e=$('n_'+tg))){e.value=id;Undo.change(e);}},_setCountryLang:function(tg,action,id){var i,e;if(id=='xx')i=id='';else{i=Dom.stripTags(action.info.label);switch(id.substr(3)){case 'ch':i='Chinese-'+i;break;case 'in':i='Indian-'+i;break;}id=id.substr(0,2);}if((e=$('g_'+tg)))e.value=i;if((e=$('n_'+tg))){e.value=id;Undo.change(e);}},_setAspectRatio:function(tg,id){if((tg=$('n_'+tg)))tg.value=id.substr(0,1)+'.'+id.substr(1);},discard:function(msg,url){if(!msg||confirm(msg+'\n\nOK=Yes - Cancel=No'))location.href=url?url:location.href;},withdraw:function(msg){var e=$('act'),f=$('myform');if(e&&f&&confirm(msg+'\n\nOK=Yes - Cancel=No')){e.value='del_sub';f.action=location.href;f.submit();return 1;}return 0;},showHist:function(s_trg){var e=$('hist');if(e.style.visibility=='hidden'){e.innerHTML="<div style='margin:2px 6px 2px 2px'><iframe scrolling='yes' frameborder='0' src='"+Filmaf.baseDomain+"/utils/hist-"+s_trg+".html?frm=1&obj="+Filmaf.objId+"' style='width:100%;height:260px;padding:1px;border:solid 1px #abadb3'></iframe></div";e.style.visibility='visible';e='Hide history';}else{e.innerHTML='';e.style.visibility='hidden';e='Show history';}$('b_showhist').value=e;}};