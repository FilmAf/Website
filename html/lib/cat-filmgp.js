/* ---------------------------------------------------------------------------- *\
 *  Film Aficionado is public domain software. Promotional material images,
 *  if present, are copyrighted by the respective copyright owners and should
 *  only be used under the provisions dictated by those copyright holders.
 *  There are no warranties expressed on implied.
\* ---------------------------------------------------------------------------- */
var Ajax={_http:false,_uniSeed:'',_getHttpObj:function(){var h=false;if(window.XMLHttpRequest){try{h=new XMLHttpRequest();}catch(e){h=false;}}else{if(window.ActiveXObject){try{h=new ActiveXObject("Msxml2.XMLHTTP");}catch(e){try{h=new ActiveXObject("Microsoft.XMLHTTP");}catch(e){h=false;}}}}if(h.overrideMimeType)h.overrideMimeType('text/xml');return h;},_call:function(s_file,f_callback,s_get,s_post){if(!Ajax._http)Ajax._http=Ajax._getHttpObj();if(Ajax._http){Ajax._http.abort();Ajax._http.onreadystatechange=f_callback;if(s_post){Ajax._http.open('POST','/utils/ajax-'+s_file+'.php'+s_get,true);Ajax._http.setRequestHeader("Content-type","application/x-www-form-urlencoded");Ajax._http.setRequestHeader("Content-length",s_post.length);Ajax._http.setRequestHeader("Connection","close");Ajax._http.send(s_post);}else{Ajax._http.open('GET','/utils/ajax-'+s_file+'.php'+s_get,true);Ajax._http.send(null);}}},_uniCall:function(s_file,f_callback,s_get,s_post,s_seed){if(s_seed!=Ajax._uniSeed)return;Ajax._call(s_file,f_callback,s_get,s_post);},asynch:function(s_file,s_callback,s_get,s_post,n_delay){s_file="'"+s_file+"'";s_get=typeof(s_get)=='undefined'||!s_get?0:"'"+s_get.replace(/\x27/g,"\\'")+"'";s_post=typeof(s_post)=='undefined'||!s_post?0:"'"+s_post.replace(/\x27/g,"\\'")+"'";n_delay=typeof(n_delay)=='undefined'?200:n_delay;setTimeout("Ajax._call("+s_file+","+s_callback+","+s_get+","+s_post+")",n_delay);},asynchNoDup:function(s_file,s_callback,s_get,s_post,n_delay){s_file="'"+s_file+"'";s_get=typeof(s_get)=='undefined'||!s_get?0:"'"+s_get.replace(/\x27/g,"\\'")+"'";s_post=typeof(s_post)=='undefined'||!s_post?0:"'"+s_post.replace(/\x27/g,"\\'")+"'";n_delay=typeof(n_delay)=='undefined'?200:n_delay;Ajax._uniSeed=(new Date()).getTime()+','+Math.random();setTimeout("Ajax._uniCall("+s_file+","+s_callback+","+s_get+","+s_post+",'"+Ajax._uniSeed+"')",n_delay);},ready:function(){return Ajax._http.readyState==4&&Ajax._http.status==200;},getParms:function(o){o.sta=o.msg=o.err='';if(!Ajax.ready())return false;o.lines=Ajax.getLines();o.length=o.lines.length;if(o.length<2)return false;o.line1=o.lines[1];return Ajax.statusErr(o,o.line1);},statusErr:function(o,s){o.sta=Ajax.statusTxt(s,'status');o.msg=Ajax.statusTxt(s,'msg');o.err=o.sta=='SUCCESS'?'':(o.msg?o.msg:'ERROR');return o.err=='';},statusInt:function(s,v){var re=new RegExp(v+"='([^\x27]+)'");re=re.exec(s);return re&&re.index?Dec.parse(re[1]):0;},statusTxt:function(s,v){var re=new RegExp(v+"='([^\x27]+)'");re=re.exec(s);return re&&re.index?re[1]:'';},getText:function(){return Ajax._http.responseText;},getLines:function(){return Ajax._http.responseText.split('\n');},__ignore:function(s,t){}};var Context={_isFireFox:navigator.userAgent.match(/gecko/i),_menuHandle:null,setup:function(){if(Filmaf.onPopup)Context._menuHandle=DynarchMenu.setup('context-menu',{context:true,lazy:true,onPopup:Filmaf.onPopup,ctxbutton:1});else Context._menuHandle=DynarchMenu.setup('context-menu',{context:true,lazy:true,ctxbutton:1});},attach:function(click,edit,s_menu,n_calendar_id){var e=$s(click),f=$s(edit);if(Context._menuHandle&&s_menu&&(e||f)){if(s_menu=='calendar'){if(f)f.onclick=Search.calendars[n_calendar_id];if(e)e.onclick=Search.calendars[n_calendar_id];}else{if(f)f.onclick=f.onkeydown=Context._pressButton;if(e)DynarchMenu.setupContext(e,Context._menuHandle.items[s_menu]);}}},_pressButton:function(ev){ev||(ev=window.event);if(ev.keyCode!=9){var e=ev.currentTarget||ev.srcElement;if(e&&e.tagName=='INPUT')e.setAttribute('autocomplete','off');if(e&&e.id&&(e=$('h'+e.id.substr(1))))e.onclick(ev);else alert('Please use the [...] button next to this field to select an option.');}},getPopupPos:function(e,dx,dy){var r=DynarchMenu.getWinSize(),xi=DynarchMenu.psLeft(),yi=DynarchMenu.psTop(),xf=xi+r.x,yf=yi+r.y;r=Context.getPos(e);var xe=r.x,ye=r.y,zh=e.getAttribute('zoom_hoz'),dn=e.getAttribute('zoom_ver')=='down',lf=zh=='left',lo=zh=='leftoffset';r.beg_y=yi;r.end_y=yf;r.bot_y=0;r.x=lf?xe-dx:xe+(lo?0:e.offsetWidth);r.y=ye-1;r.y+=dn?e.offsetHeight:e.offsetHeight*85/100;if(!lf&&r.x+dx>xf)r.x=lo?r.x=xf-dx-1:r.x-e.offsetWidth-dx;if(r.x<xi)r.x=xi;if(r.y+dy>yf){r.bot_y=r.y-(dn?e.offsetHeight:e.offsetHeight*70/100);r.y=r.bot_y-dy;r.bot_y=r.end_y-r.bot_y;}if(r.y<yi)r.y=yi;r.x=Math.floor(r.x);r.y=Math.floor(r.y);return r;},getPos:function(e){var r={x:0,y:0},op,pn;if(e){r.x=e.offsetLeft;r.y=e.offsetTop;op=e.offsetParent;pn=e.parentNode;while(op){r.x+=op.offsetLeft;r.y+=op.offsetTop;if(op!=document.body&&op!=document.documentElement){r.x-=op.scrollLeft;r.y-=op.scrollTop;}if(Context._isFireFox){while(pn&&op!=pn){r.x-=pn.scrollLeft;r.y-=pn.scrollTop;pn=pn.parentNode;}}pn=op.parentNode;op=op.offsetParent;}}return r;},close:function(){if(window.top&&window.top.DynarchMenu)window.top.DynarchMenu._closeOtherMenus(null);}};var Cookie={get:function(n){var c=('; '+document.cookie).replace(/;\s*([A-Za-z0-9_]+\=)/g,';$1'),i=c.indexOf(';'+n+'=');if(i>=0){i+=n.length+2;n=c.indexOf(';',i);return n>i?c.substr(i,n-i):c.substr(i);}return '';},del:function(n){var c=new Date('January 1, 2001');c='; expires='+c.toGMTString()+'; path=/; domain='+Filmaf.cookieDomain;document.cookie=n+'='+c;},set:function(n,v,d){if(typeof(v)=='string'&&!(v=Str.trim(v).replace(/^,+/,'').replace(/,+$/,''))){Cookie.del(n);return;}if(d)if(d<0)d=0;else{var x=d;d=new Date();d.setDate(d.getDate()+x);}else d=new Date(new Date().setFullYear(new Date().getFullYear()+1));d=(d?'; expires='+d.toGMTString():'')+'; path=/; domain='+Filmaf.cookieDomain;document.cookie=n+'='+v+d;},reset:function(keepers){var z=document.cookie.split(';'),i,s,n;keepers='-,'+keepers.toLowerCase()+',';for(i=0;i<z.length;i++){s=Str.trim(z[i]);n=s.indexOf('=');if(n>=0){s=s.substr(0,n);if(keepers.indexOf(','+s.toLowerCase()+',')<0)Cookie.del(s);}}},amend:function(n,k,v){var c=Cookie.get(n).split('*'),s='',b=0,m,i;if(typeof(v)=='string'){if(v.indexOf('*')>0){v=v.replace(/\*/g,'');alert("Illegal character '*' removed from ammended cookie value");}if(v.indexOf('*')>0||v.indexOf('_')>0){k=k.replace(/\*/g,'').replace(/_/g,'');alert("Illegal characters '*' and/or '_' removed from ammended cookie value");}}for(i=0;i<c.length;i++){m=c[i].split('_',1)[0];if(k==m){if(v!='')s+='*'+k+'_'+v;b=1;}else{if(m!='')s+='*'+c[i];}}if(!b&&v!='')s+='*'+k+'_'+v;if(s=='')Cookie.del(n);else Cookie.set(n,s.slice(1));},extract:function(n,k,def){var c=Cookie.get(n).split('*'),i;for(i=0;i<c.length;i++){if(k==c[i].split('_',1)[0])return c[i].slice(k.length+1);}return typeof(def)=='undefined'?'':def;},extractFromStr:function(c,k,def){var i;c=c.split('*');for(i=0;i<c.length;i++){if(k==c[i].split('_',1)[0])return c[i].slice(k.length+1);}return typeof(def)=='undefined'?'':def;},explode:function(n,ints){var c=Cookie.get(n).split('*'),a=[],i;if(c=='')return '';for(i=0;i<c.length;i++){k=c[i].split('_',1)[0];v=c[i].slice(k.length+1);if(ints)a[i]={key:k,val:v};else a[k]=v;}return a;},explodeStr:function(c,ints){var c=c.split('*'),a=[],i;if(c=='')return '';for(i=0;i<c.length;i++){k=c[i].split('_',1)[0];v=c[i].slice(k.length+1);if(ints)a[i]={key:k,val:v};else a[k]=v;}return a;},clean:function(b_all){var b=confirm(b_all?'This action will log you off FilmAf, delete your shopping\ncart and a few other options. Do you wish to proceed?\n\nOK=Yes - Cancel=No':'This action will delete your shopping cart and\na few other options. Do you wish to proceed?\n\nOK=Yes - Cancel=No');if(b)Cookie.reset(b_all?'orig':'user,parm,orig');return b;}};var DateTime={parseBounded:function(s,yy_min,yy_max,empty){var re,y,m=1,d=1,o='invalid';s=Str.trim(s);if(s=='')return empty?'':false;re=/^([0-9]{4})$/.exec(s);if(re){y=Dec.parse(re[1]);if(y>=yy_min&&y<=yy_max)o='year';}else{re=/^([0-9]{4})[-]([0-9]{2})$/.exec(s);if(re){y=Dec.parse(re[1]);m=Dec.parse(re[2]);if(y>=yy_min&&y<=yy_max){if(m==0)o='year';else if(m>=1&&m<=12)o='month';}}else{re=/^([0-9]{4})[-]([0-9]{2})[-]([0-9]{2})$/.exec(s);if(re){y=Dec.parse(re[1]);m=Dec.parse(re[2]);d=Dec.parse(re[3]);if(y>=yy_min&&y<=yy_max){if(m==0&&d==0)o='year';else if(m>=1&&m<=12){if(d==0)o='month';else if(DateTime.isValid(y,m,d,yy_min,yy_max))o='day';}}}else{return false;}}}return{day:d,month:m-1,year:y,option:o};},isLeapYear:function(y){return y%4==0&&(y%100!=0||y%400==0);},daysInMonth:function(m,y){var dm=[0,31,29,31,30,31,30,31,31,30,31,30,31];if(m==2&&y>0)return DateTime.isLeapYear(y)?29:28;return(m>=1&&m<=12)?dm[m]:false;},isStrValid:function(s,yy_min,yy_max){var re=/^([0-9]{4})[-]([0-9]{2})[-]([0-9]{2})$/.exec(s);if(re){y=Dec.parse(re[1]);m=Dec.parse(re[2]);d=Dec.parse(re[3]);return DateTime.isValid(y,m,d,yy_min,yy_max);}return false;},isValid:function(y,m,d,yy_min,yy_max){y=Dec.parse(y);m=Dec.parse(m);d=Dec.parse(d);return y>=yy_min&&y<=yy_max&&m>=1&&m<=12&&d>=1&&d<=DateTime.daysInMonth(m,y);},IntToDateStr:function(y,m,d){m=m+1;if(m<10)m='0'+m;if(d<10)d='0'+d;return y+'-'+m+'-'+d;},toDateStr:function(dt){var m=dt.getMonth()+1,d=dt.getDate();if(m<10)m='0'+m;if(d<10)d='0'+d;return dt.getFullYear()+'-'+m+'-'+d;},toTimeStr:function(dt){var m=dt.getMonth()+1,d=dt.getDate(),h=dt.getHours(),i=dt.getMinutes(),s=dt.getSeconds();if(m<10)m='0'+m;if(d<10)d='0'+d;if(h<10)h='0'+h;if(i<10)i='0'+i;if(s<10)s='0'+s;return dt.getFullYear()+'-'+m+'-'+d+' '+h+':'+i+':'+s;},toTimeHHMM:function(dt,zeroPad,ampm){var h=dt.getHours(),i=dt.getMinutes(),b=h>11,m=ampm?(b?' PM':' AM'):'';if(m&&b)h-=12;if(h<10&&zeroPad)h='0'+h;if(i<10)i='0'+i;return h+':'+i+m;},getMonth:function(n){var a=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];if(n>=1&&n<=12)return a[n-1];},validate:function(s_field,o_date,o_changed,yy_min,yy_max,b_allow_empty,s_name,b_must_change){var s,e_new,e_old,b_same;o_date.day=0;o_date.month=0;o_date.year=0;if((e_new=$(s_field))){if(o_changed&&!o_changed.b_undo&&(e_old=$('z_'+s_field.substr(2))))o_changed.b_undo=Str.trim(e_new.value)!=Str.trim(e_old.value);b_same=(e_old=$('o_'+s_field.substr(2)))&&(s=Str.trim(e_new.value))==Str.trim(e_old.value);if(b_same&&!b_must_change)return s;s=Validate.checkEmptiness(e_new,b_allow_empty,s_name);if(s===false)return false;if(!e_old&&s=='')b_same=true;s=DateTime.parseBounded(s,yy_min,yy_max,b_allow_empty);if(s===false||(s.option&&s.option!='day')){Validate.warn(e_new,true,true,s_name+' must be a valid date between '+yy_min+' and '+yy_max+' expressed as YYYY-MM-DD.\nYou entered "'+e_new.value+'".',false);return false;}o_date.day=s.day;o_date.month=s.month;o_date.year=s.year;if(o_changed&&!o_changed.b_changed)o_changed.b_changed=!b_same;if(s!='')s=DateTime.IntToDateStr(s.year,s.month,s.day);e_new.value=s;return s;}return '';},attachLiveParser:function(s){if((s=$(s)))s.onkeypress=DateTime._liveParser;},_liveParser:function(ev){function has31d(s){s=Dec.parse(s);a=[0,31,29,31,30,31,30,31,31,30,31,30,31];return(s>=1&&s<=12)?a[s]==31:false;};ev||(ev=window.event);var c=ev.keyCode||ev.charCode,d=c?String.fromCharCode(c):'not',e=ev.currentTarget||ev.srcElement,b=e.value,f=b.length,g=d=='-';if((d=='-'||(d>='0'&&d<='9'))&&e){c=true;switch(f){case 0:c=/[1-2]/.test(d);break;case 1:if(!/[1-2]/.test(b))c=0;else{c=(b=='1'?/[8-9]/:/[0]/).test(d);}break;case 2:if(!/(19)|(20)/.test(b))c=0;else{c=(b=='20'?/[0]/:/[0-9]/).test(d);}break;case 3:if(!/(19[0-9])|(200)/.test(b))c=0;else{c=/[0-9]/.test(d);}break;case 4:if(!/(19[0-9][0-9])|(200[0-9])/.test(b))c=0;else{if(!g){e.value+='-';if(!/[0-1]/.test(d))e.value+='0';c=/[0-9]/.test(d);}}break;case 5:if(!/(19[0-9][0-9]-)|(200[0-9]-)/.test(b))c=0;else{if(!/[0-1]/.test(d))e.value+='0';c=/[0-9]/.test(d);}break;case 6:if(!/(19[0-9][0-9]-[0-1])|(200[0-9]-[0-1])/.test(b))c=0;else{if(g&&b.substr(5,1)!='0')e.value=b.substr(0,5)+'0'+b.substr(5,1);else c=(b.substr(5,1)=='1'?/[0-2]/:/[1-9]/).test(d);}break;case 7:if(!/(19[0-9][0-9]-[0-1][0-9])|(200[0-9]-[0-1][0-9])/.test(b))c=0;else{if(!g){e.value+='-';if(!(b.substr(5,2)=='02'?/[0-2]/:/[0-3]/).test(d))e.value+='0';c=/[0-9]/.test(d);}}break;case 8:if(!/(19[0-9][0-9]-[0-1][0-9]-)|(200[0-9]-[0-1][0-9]-)/.test(b))c=0;else{if(!(b.substr(5,2)=='02'?/[0-2]/:/[0-3]/).test(d))e.value+='0';c=/[0-9]/.test(d);}break;case 9:if(!/(19[0-9][0-9]-[0-1][0-9]-[0-3])|(200[0-9]-[0-1][0-9]-[0-3])/.test(b))c=0;else{var y=Dec.parse(b.substr(0,4)),m=Dec.parse(b.substr(5,2));if(m==2)c=(b.substr(8,1)=='2'?(DateTime.isLeapYear(y)?/[0-9]/:/[0-8]/):/[0-9]/).test(d);else c=(b.substr(8,1)=='3'?(DateTime.daysInMonth(m,y)==31?/[0-1]/:/[0]/):/[0-9]/).test(d);}break;default:return false;break;}}else{c=(d>='0'&&d<='9')||d=='-'||d=='not'||Kbd.isEditKey(c);}if(!c)alert("Oops, please enter a valid date 'YYYY-MM-DD'");return c;}};var Dec={parse:function(s){s=parseInt(s,10);return isNaN(s)?0:s;},parseBounded:function(s,min,max,b_allow_empty){s=Str.trim(s);if(s=='')return b_allow_empty?'':false;var b_not_num=s.match(/^[+-]?[0-9]+$/)==null;var b_bounds=b_not_num?false:(max>min?(Dec.parse(s)>max||Dec.parse(s)<min):false);if(b_not_num||b_bounds)return false;return s;},validateN:function(s_field,n_cnt,o_changed,e_min,e_max,b_allow_empty,s_name,b_must_change){var i,b;for(i=0,b=true;b!==false&&i<n_cnt;i++)b=Dec.validate(s_field+i,o_changed,e_min,e_max,i?1:b_allow_empty,i?s_name+(i+1):Str.trim(s_name),i?0:b_must_change);return b!==false;},validate:function(s_field,o_changed,e_min,e_max,b_allow_empty,s_name,b_must_change){var s,e_new,e_old,b_same;if((e_new=$(s_field))){if(o_changed&&!o_changed.b_undo&&(e_old=$('z_'+s_field.substr(2))))o_changed.b_undo=Str.trim(e_new.value)!=Str.trim(e_old.value);b_same=(e_old=$('o_'+s_field.substr(2)))&&(s=Str.trim(e_new.value))==Str.trim(e_old.value);if(((s!=''&&s!='0')||b_allow_empty)&&b_same&&!b_must_change)return s;s=Validate.checkEmptiness(e_new,b_allow_empty,s_name);if(s===false)return false;if(!e_old&&s=='')b_same=true;s=Dec.parseBounded(s,e_min,e_max,b_allow_empty);if(s===false){Validate.warn(e_new,true,true,s_name+' must be an integer'+(e_max>e_min?(' between '+e_min+' and '+e_max):'')+'.\nYou entered "'+e_new.value+'".',false);return false;}if(o_changed&&!o_changed.b_changed)o_changed.b_changed=!b_same;e_new.value=s;return s;}return '';}};var Dom={getParentByType:function(e,t){if(!t)return null;t=t.toLowerCase();while(e&&e.tagName&&e.tagName.toLowerCase()!=t)e=e.parentNode;return(e&&e.tagName&&e.tagName.toLowerCase()==t)?e:null;},getChildrenByType:function(e,t){var a=[],i;if(t)t=t.toLowerCase();if(t&&e&&e.firstChild){for(i=e.firstChild;i;i=i.nextSibling){if(i.nodeType!=1)continue;if(!t||t==i.tagName.toLowerCase())a[a.length]=i;}}return a;},getFirstChildByType:function(e,t){if(t)t=t.toLowerCase();if(t&&e&&e.firstChild){for(var i=e.firstChild;i;i=i.nextSibling){if(i.nodeType!=1)continue;if(!t||t==i.tagName.toLowerCase())return i;}}return null;},decodeHtmlForInput:function(s){if(!s)return '';var d=document.createElement('div');d.innerHTML=s.replace(/<br\x20?\/?>/g,'_ed_magick_');s=document.all?d.innerText:d.textContent;return s.replace(/_ed_magick_/g,'\n');},decodeHtmlEntities:function(s){if(!s)return '';var d=document.createElement('div');d.innerHTML=s;return document.all?d.innerText:d.textContent;},stripTags:function(s){return s.replace(/[<].*?[>]/g,'');},flipHidden:function(s){var e=$(s),f=$(s+'_sav');if(e&&f){s=f.innerHTML;f.innerHTML=e.innerHTML;e.innerHTML=s;return s!='';}return false;},getElementWidth:function(e){if(typeof e.clip!='undefined')return e.clip.width;if(e.style.pixelWidth)return e.style.pixelWidth;return e.offsetWidth;},getElementHeight:function(e){if(typeof this.clip!='undefined')return this.clip.height;if(this.style.pixelHeight)return this.style.pixelHeight;return this.offsetHeight;}};var Edit={getStr:function(e){return(e=$s(e))?e.value:'';},getStrCmp:function(e,o_changed){var s=Edit.getStr(e);if(!o_changed.b_changed&&(e=$('o_'+e.substr(2))))o_changed.b_changed=s==e.value;return s;},getInt:function(e){return Dec.parse(Edit.getStr(e));},getDbl:function(e){return Dbl.parse(Edit.getStr(e));},setStr:function(e,s){if((e=$s(e)))e.value=s;},setPrefixed:function(name,s){var e;if((e=$('n_'+name)))e.value=s;if((e=$('o_'+name)))e.value=s;if((e=$('d_'+name)))e.innerHTML=s;return s;},countDown:function(e,n){if((e=$(e))){if(n>50)e.innerHTML=n;else if(n<0)e.innerHTML="<span style='color:#bd0b0b;font-weight:bold'>"+n+"</span>";else e.innerHTML="<span style='font-weight:bold'>"+n+"</span>";}},insertAtCursor:function(e,v){var a,b,s;if(document.selection){e.focus();s=document.selection.createRange();s.text=v;}else if(e.selectionStart||e.selectionStart=='0'){a=e.selectionStart;b=e.selectionEnd;e.value=e.value.substring(0,a)+v+e.value.substring(b,e.value.length);}else{e.value+=v;}},getSel:function(e){var s='';if(window.getSelection)s=window.getSelection().toString();else if(document.getSelection)s=document.getSelection().toString();else if(document.selection)s=document.selection.createRange().text;if(!s&&e){e.focus();s=Edit.getSel(null);}return s;}};var Facebook={_uid:'',_accessToken:'',_when:'',post:function(act,id,med,msg,when,rate,tag){var a_post={'fb:explicitly_shared':true};switch(med){case 'b':a_post.bluray='http://www.filmaf.com/gp/'+id;break;case 'f':a_post.film='http://www.filmaf.com/gp/'+id;break;default:a_post.dvd='http://www.filmaf.com/gp/'+id;break;}msg=msg.replace(/\<br\/\>/g,"\n").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'");if(rate>0){a_post.rating=rate;msg=rate+" out of 5 stars\n"+msg;}if(msg!='')a_post.message=msg;if(when)a_post.start_time=when;if(tag!='')a_post.tags=tag;switch(act){case 'see':act='see';break;case 'wts':act='want_to_see';break;case 'rat':act='rate';break;case 'wan':act='want';break;case 'ord':act='order';break;case 'get':act='get';break;case 'blo':act='say';break;}var e=Facebook.getPostDiv();Pop.open(e,0,354,0,3);Facebook._login(Facebook.__post,'/me/filmafi:'+act,a_post);},__post:function(s_get,a_post,a_response,b_success){Facebook.closePostDiv();if(!b_success)return Facebook._error(a_response);var p,e,s='response='+a_response.id;for(p in a_post){switch(p){case 'message':case 'start_time':case 'rating':case 'tags':s+='&'+p+'='+encodeURIComponent(a_post[p]);break;case 'bluray':case 'film':case 'dvd':s+='&media='+p.substr(0,1);p=a_post[p].split('/');s+='&id='+p[p.length-1];break;}}Ajax.asynch('facebook','Facebook.__logged','?act=log',s.substr(1),100);return 1;},see:function(id,med){Facebook.post('see',id,med,'',0,'','');},want:function(id,med){Facebook.post('wan',id,med,'',0,'','');},order:function(id,med){Facebook.post('ord',id,med,'',0,'','');},get:function(id,med){Facebook.post('get',id,med,'',0,'','');},blog:function(id,med,msg){Facebook.post('blo',id,med,msg,0,'','');},__logged:function(){},getFriends:function(){Facebook._login(Facebook.__getFriends,'/me/friends',false);},__getFriends:function(s_get,a_post,a_response,b_success){if(!b_success)return Facebook._error(a_response);if(a_response.data)Facebook.popFriends(a_response.data);},ul:function(){return "<li id='cm_dvd_fb'>Publish to Facebook<ul id='context_dvd_fb'><li id='cm_dvd_fb_see'>I&#39;m seeing it</li><li id='cm_dvd_fb_want'>I want it</li><li id='cm_dvd_fb_order'>I&#39;ve ordered it</li><li id='cm_dvd_fb_got'>I got it</li><li></li><li>More<ul><li>"+Facebook.ulDiv()+"</li></ul></li></ul></li>";},ulDiv:function(){return "<div style='width:352px;margin:4px 0 4px 0'><form id='fb_form' name='mform_dvd_fb' action='javascript:Facebook.SubmitMore(0)'><div class='one_lbl' style='text-align:left'><table style='width:100%;white-space:nowrap'><tr><td>Select One:</td><td><table id='tab_fb' style='border-collapse:separate;border-spacing:0 2px 0 2px;white-space:nowrap'><tr><td class='td_opt' id='fb_sel_see'>Seeing</td><td class='td_opt' id='fb_sel_wts'>Want to see</td><td class='td_opt' id='fb_sel_rat'>Rate</td><td class='td_opt' id='fb_sel_wan'>Want it</td><td class='td_opt' id='fb_sel_ord'>Ordered it</td><td class='td_opt' id='fb_sel_get'>Got it</td></tr></table></td></tr></table><div><table style='width:100%;white-space:nowrap'><tr><td style='width:1px'>Opt msg: (<span id='fb_char'>500</span>)</td><td style='width:95%'><img src='http://dv1.us/d1/00/fbh0.png' width='14px' height='14ps' id='fbi_home' onclick='Facebook.insTest(0)' style='padding:0 2px 0 2px' title='Insert Home URL' /><img src='http://dv1.us/d1/00/fbf0.png' width='14px' height='14ps' id='fbi_coll' onclick='Facebook.insTest(1)' title='Insert /owned URL' /></td><td style='width:1px'><span id='fb_lbl_when'>When</span></td><td style='width:1px'><input id='fb_cb_when' type='checkbox' onclick='Facebook.ulUpdateDt()' /></td><td style='width:1px'><span id='fb_text_date'>0000-00-00</td><td style='width:1px;padding-right:4px'><img id='fb_spin_day' src='http://dv1.us/d1/00/pn00.gif' width='10px' height='17px' /></td><td style='width:1px'><span id='fb_text_time'>0:00 AM</td><td style='width:1px'><img id='fb_spin_hour' src='http://dv1.us/d1/00/pn00.gif' width='10px' height='17px' /></td><td style='width:1px'><img id='fb_spin_min' src='http://dv1.us/d1/00/pn00.gif' width='10px' height='17px' /></td><td style='width:1px'><img id='fb_spin_ampm' src='http://dv1.us/d1/00/pn00.gif' width='10px' height='17px' /></td><td style='width:1px;padding-left:6px'><span id='fb_lbl_tag'>Tag</span></td><td style='width:1px'><input id='fb_cb_tag' type='checkbox' /></td></tr></table></div><textarea id='fb_msg' style='width:100%;height:40px' maxlength='500' wrap='soft' onkeyup='Edit.countDown(\"fb_char\",500 - this.value.length)'></textarea><div><table style='width:100%;white-space:nowrap'><tr><td style='text-align:right'><span id='fb_lbl_rat'>Rate it:</span></td><td colspan='3'><span id='fb_rad1'><input id='fb_med' type='hidden' /><input id='fb_dvd' type='hidden' /><input id='fb_act' type='hidden' /><input name='fb_rad' id='fb_rad_5' value='5' type='radio' /><img src='http://dv1.us/s1/s5b9.png' /><input name='fb_rad' id='fb_rad_4' value='4' type='radio' /><img src='http://dv1.us/s1/s5b7.png' /><input name='fb_rad' id='fb_rad_3' value='3' type='radio' /><img src='http://dv1.us/s1/s5b5.png' /></span></td></tr><tr><td style='width:1px'>&nbsp;</td><td style='width:1px'><span id='fb_rad2'><input name='fb_rad' id='fb_rad_2' value='2' type='radio' /><img src='http://dv1.us/s1/s5b3.png' /><input name='fb_rad' id='fb_rad_1' value='1' type='radio' /><img src='http://dv1.us/s1/s5b1.png' /><input name='fb_rad' id='fb_rad_0' value='0' type='radio' /><span style='position:relative;top:-2px'>n/a</a></span></td><td style='width:95%;text-align:center'><a href='http://www.youtube.com/user/FilmAf' style='color:#de4141' target='yt'>yt</a></td><td style='width:1px'><input type='submit' style='width:36px;text-align:center' value='Post' /></td></tr></table></div></div></form></div>";},ulPre:function(i,m,n){$('fb_med').value=m;$('fb_dvd').value=n;TblMenu.attach('tab_fb',function(id,parm){Facebook.selectAction(id.substr(7),parm)});TblMenu.set($('fb_sel_see'),1);$('fb_rad_0').checked=true;$('fb_cb_when').checked=false;$('fb_cb_tag').checked=false;Facebook._when=new Date();Facebook._when.setSeconds(0);Facebook._when.setMilliseconds(0);Facebook._when.setMinutes(Facebook._when.getMinutes()-Facebook._when.getMinutes()%5);Facebook.ulUpdateDt();$('fb_spin_day').spun=Facebook.ulSpinDay;$('fb_spin_ampm').spun=Facebook.ulSpinAmPm;$('fb_spin_hour').spun=Facebook.ulSpinHour;$('fb_spin_min').spun=Facebook.ulSpinMin;ImgSpun.attachSpun($('fb_spin_day'));ImgSpun.attachSpun($('fb_spin_ampm'));ImgSpun.attachSpun($('fb_spin_hour'));ImgSpun.attachSpun($('fb_spin_min'));m=m=='f';$('fb_sel_wan').style.visibility=$('fb_sel_ord').style.visibility=$('fb_sel_get').style.visibility=m?'hidden':'visible';if(typeof(i.cm_dvd_fb)!='undefined'){if(typeof(i.cm_dvd_fb.submenu)=='function')i.cm_dvd_fb.submenu();i=i.cm_dvd_fb.submenu.menu.items;if(i.cm_dvd_fb_want)i.cm_dvd_fb_want.disable(m);if(i.cm_dvd_fb_order)i.cm_dvd_fb_order.disable(m);if(i.cm_dvd_fb_got)i.cm_dvd_fb_got.disable(m);}m=$('fbi_home');m.onmouseover=function(ev){Img.mouseOver(ev,this,18);};m.onmouseout=function(){Img.mouseOut(this,18);};m=$('fbi_coll');m.onmouseover=function(ev){Img.mouseOver(ev,this,19);};m.onmouseout=function(){Img.mouseOut(this,19);};},insTest:function(i){var e=$('fb_msg'),c=Filmaf.userCollection,u='http://'+(c?c:'www')+'.filmaf.com/';switch(i){case 0:Edit.insertAtCursor(e,u);break;case 1:Edit.insertAtCursor(e,u+(c?'owned':''));break;}e.focus();},ulSpinDay:function(d){d=d?1:-1;d*=60000*60*24;Facebook._when=new Date(Facebook._when.getTime()+d);Facebook.ulUpdateDt();},_ulSpinHour:function(d,k){var m=Facebook._when.getHours(),a=m>=12?12:0;i=m-a;switch(k){case 0:i=(i+(d?1:-1))%12;break;case 1:a=a?0:12;break;}Facebook._when.setHours(a+i);Facebook.ulUpdateDt();},ulSpinHour:function(d){Facebook._ulSpinHour(d,0);},ulSpinAmPm:function(d){Facebook._ulSpinHour(d,1);},ulSpinMin:function(d){var m=Facebook._when.getMinutes();m=(m+(d?5:-5))%60;Facebook._when.setMinutes(m);Facebook.ulUpdateDt();},ulUpdateDt:function(){var b=$('fb_cb_when').checked;$('fb_text_date').style.visibility=$('fb_spin_day').style.visibility=$('fb_text_time').style.visibility=$('fb_spin_ampm').style.visibility=$('fb_spin_hour').style.visibility=$('fb_spin_min').style.visibility=b?'visible':'hidden';if(b){$('fb_text_date').innerHTML=DateTime.toDateStr(Facebook._when);$('fb_text_time').innerHTML=DateTime.toTimeHHMM(Facebook._when,0,1);}},selectAction:function(id,parm){var w=0,t=0,r=0;$('fb_act').value=id;switch(id){case 'see':t=1;break;case 'wts':t=1;break;case 'rat':r=1;break;}v=w?'visible':'hidden';t=t?'visible':'hidden';r=r?'visible':'hidden';$('fb_lbl_when').style.visibility=$('fb_cb_when').style.visibility=v;if(w){Facebook.ulUpdateDt();}else{$('fb_text_date').style.visibility=$('fb_spin_day').style.visibility=$('fb_text_time').style.visibility=$('fb_spin_ampm').style.visibility=$('fb_spin_hour').style.visibility=$('fb_spin_min').style.visibility=v;}$('fb_lbl_tag').style.visibility=$('fb_cb_tag').style.visibility=t;$('fb_lbl_rat').style.visibility=$('fb_rad1').style.visibility=$('fb_rad2').style.visibility=r;},SubmitMore:function(i){var a=$('fb_act').value,m=$('fb_med').value,n=$('fb_dvd').value,w=$('fb_lbl_when').style.visibility=='visible',t=$('fb_lbl_tag').style.visibility=='visible',r=$('fb_lbl_rat').style.visibility=='visible',w1=w&&$('fb_cb_when').checked?Facebook._when.getTime()/1000:'';t1=t?$('fb_cb_tag').checked:false,r1=r?Radio.getVal('fb_rad'):0,m1=$('fb_msg').value;var e;Context.close();if(t1){e=Facebook.getFriendsDiv(a,m,n,w1,r1,m1);Pop.open(e,0,354,0,3);}else{Facebook.post(a,n,m,m1,w1,r1,'');}},getFriendsDiv:function(a,m,n,w1,r1,m1){var d=$('div_fb_friends'),f;if(!d){d=document.createElement('div');var s=d.style,b=document.getElementsByTagName('body').item(0);d.id='div_fb_friends';s.visibility='hidden';s.position='absolute';s.top=0;s.left=0;s.zIndex=7;b.appendChild(d);d.innerHTML="<div style='background:#0059a6'><div style='border:1px solid #6c8ba6;padding:3px'><div style='background:#ffffff;text-align:center;width:368px'><div><table class='img_bar' style='width:100%'><tr><td class='img_bar' style='border-bottom:solid 2px #0059a6;text-align:center'>Facebook - Tagging</td></tr></table></div><div style='padding:10px 0 4px 0'>Please select which friends were/will be there with you<div style='padding:10px 20px 6px 20px'><input id='fb2_med' type='hidden' /><input id='fb2_dvd' type='hidden' /><input id='fb2_act' type='hidden' /><input id='fb2_msg' type='hidden' /><input id='fb2_whn' type='hidden' /><input id='fb2_rad' type='hidden' /><iframe width='324' height='160' scrolling='yes' id='frame_fb' style='border: 1px solid'></iframe><div style='text-align:right;white-space:nowrap;padding-top:8px'><input type='button' value='Post without tagging' onclick='Facebook.closeFriendsDiv(1)' /> <input type='button' value='Post' onclick='Facebook.closeFriendsDiv(2)' id='fb2_post' /> <input type='button' value='Cancel' onclick='Facebook.closeFriendsDiv(0)' /></div></div></div></div></div></div>";}$('fb2_med').value=m;$('fb2_dvd').value=n;$('fb2_act').value=a;$('fb2_whn').value=w1;$('fb2_rad').value=r1;$('fb2_msg').value=m1;Button.enable('fb2_post',0);if((f=Win.findFrame('frame_fb'))){f.write("<html><head><link rel='stylesheet' type='text/css' href='/styles/00/filmaf.css' /><body style='background:#ffffff'><div style='text-align:center;padding-top:10px;color:#999999'>Waiting on Facebook<div style='text-align:center;padding-top:36px'><img src='http://dv1.us/d1/wait.gif' width='32px' height='32px' /></div></div></body></html>");f.close();}Facebook.getFriends();return d;},popFriends:function(a){var i,f,s='';a.sort(function(a,b){return a.name.toLocaleLowerCase().localeCompare(b.name.toLocaleLowerCase());});if((f=Win.findFrame('frame_fb'))){for(i=0;i<a.length;i++)s+="<div><input type='checkbox' id='fbf_"+a[i].id+"'> "+a[i].name+"</div>";f.write("<html><head><link rel='stylesheet' type='text/css' href='/styles/00/filmaf.css' /><body style='background:#ffffff'><div id='fb_list'>"+s+"</div></body></html>");f.close();Button.enable('fb2_post',1);}},getCheckedFriends:function(){var i,a,f,s='';if((f=Win.findFrame('frame_fb'))){a=f.getElementsByTagName('input');for(i=0;i<a.length;i++)if(a[i].type=='checkbox'&&a[i].checked)s+=','+a[i].id.substr(4);s=s.substr(1);}return s;},closeFriendsDiv:function(x){var a,n,m,s,w,r,t='';switch(x){case 2:t=Facebook.getCheckedFriends();case 1:a=$('fb2_act').value;n=$('fb2_dvd').value;m=$('fb2_med').value;s=$('fb2_msg').value;w=$('fb2_whn').value;r=$('fb2_rad').value;break;}Pop.close('div_fb_friends');if(x)Facebook.post(a,n,m,s,w,r,t);},getPostDiv:function(){var d=$('div_fb_post'),e,f;if(!d){d=document.createElement('div');var s=d.style,b=document.getElementsByTagName('body').item(0);d.id='div_fb_post';s.visibility='hidden';s.position='absolute';s.top=0;s.left=0;s.zIndex=7;b.appendChild(d);d.innerHTML="<div style='background:#0059a6'><div style='border:1px solid #6c8ba6;padding:3px'><div style='background:#ffffff;text-align:center;width:368px'><div><table class='img_bar' style='width:100%'><tr><td class='img_bar' style='border-bottom:solid 2px #0059a6;text-align:center'>Facebook - Posting</td></tr></table></div><div style='text-align:center;padding:10px 0 10px 0'><div id='div_fb_posted'></div></div></div></div></div>";}if((e=$('div_fb_posted'))){e.innerHTML="Waiting on Facebook<div style='text-align:center;padding:10px 0 10px 0'><img src='http://dv1.us/d1/wait.gif' width='32px' height='32px' /></div>";}return d;},closePostDiv:function(){Pop.close('div_fb_post');},_login:function(callback,s_get,a_post){FB.login(function(a_response){if(a_response.authResponse){if(a_post===false){FB.api(s_get,function(a_response){callback(s_get,a_post,a_response,a_response&&!a_response.error);});}else{FB.api(s_get,'post',a_post,function(a_response){callback(s_get,a_post,a_response,a_response&&!a_response.error);});}}},{scope:'publish_actions,read_friendlists'});},_error:function(a_response){if(a_response.error)alert('Error: '+a_response.error.message);else alert('Error occured');return 0;},parse:function(s){var m;if((s=Str.trim(s))!=''){if((m=Url.getVal('id',s))&&/^[0-9]*$/.test(m))return m;if((m=/^http:\/\/www\.facebook\.com\/people\/[^\/]*\/([0-9]*)$/.exec(s))&&m.length>1)return m[1];if(/^[0-9]*$/.test(s))return s;return false;}return '';},validate:function(s_field,o_changed,b_allow_empty,s_name,b_must_change){var s,e_new,e_old,b_same;if((e_new=$(s_field))){if(o_changed&&!o_changed.b_undo&&(e_old=$('z_'+s_field.substr(2))))o_changed.b_undo=Str.trim(e_new.value)!=Str.trim(e_old.value);b_same=(e_old=$('o_'+s_field.substr(2)))&&(s=Str.trim(e_new.value))==Str.trim(e_old.value);if(b_same&&!b_must_change)return s;s=Validate.checkEmptiness(e_new,b_allow_empty,s_name);if(s===false)return false;if(!e_old&&s=='')b_same=true;s=Facebook.parse(s);if(s===false){Validate.warn(e_new,true,true,"Your "+s_field+" seems to be invalid.\n\nWe expected:\n        A string with some 10 digits\n\nor a URL like one of these:\n        http://www.facebook.com/profile.php?id=7777777\n        http://www.facebook.com/people/User-Name/7777777",false);return false;}if(o_changed&&!o_changed.b_changed)o_changed.b_changed=!b_same;e_new.value=s;return s;}return '';}};window.fbAsyncInit=function(){FB.init({appId:'413057338766015',status:true,cookie:true,xfbml:true});};(function(d,debug){var js,id='facebook-jssdk',ref=d.getElementsByTagName('script')[0];if(d.getElementById(id)){return;}js=d.createElement('script');js.id=id;js.async=true;js.src="//connect.facebook.net/en_US/all"+(debug?"/debug":"")+".js";ref.parentNode.insertBefore(js,ref);}(document,true));var ImgSpun={attachSpun:function(e,cb){e.onmouseover=function(ev){Img.mouseOver(ev,this,17);};e.onmousemove=function(ev){Img.mouseOver(ev,this,17);};e.onmousewheel=function(ev){ImgSpun._wheel(ev,this,17,this.id,cb);};e.onmouseout=function(){Img.mouseOut(this,17);};e.onclick=function(ev){Img.click(ev,this,17,this.id);};e.ondblclick=function(ev){if(!ev)Img.click(ev,this,17,this.id);};},_wheel:function(ev,img,type,s_id,cb){ev||(ev=window.event);if(ev.wheelDelta&&(!Img._buttonsLoaded||!img))return;var a=Img.buttons[type],o=ev.wheelDelta;if(o!=0&&a.onClick)a.onClick(s_id,o>=0);ev.cancelBubble=true;ev.returnValue=false;},click:function(s,u){$(s).spun(u);}};var Tab={_length:[],_options:[],_wholepage:false,targetDiv:'',setup:function(tab_id,options){var el=$(tab_id);if(!el){alert('Could not find a tab control by the name "'+tab_id+'".');return;}var a=Dom.getChildrenByType(el,'ul');a=Dom.getChildrenByType(a.length>0?a[0]:el,'li');if(!(a.length>0)){alert('No tab definitions found for "'+tab_id+'".');return;}var k=Tab._length.length;Tab._length[k]=a.length;Tab._options[k]={};Tab._wholepage=(options&&typeof(options['wholepage'])!='undefined')?options['wholepage']=='1':false;Tab.getCmdOptions(Tab._options[k],options,'loadtab',0,0,a.length-1);Tab.getCmdOptions(Tab._options[k],options,'width');Tab.getCmdOptions(Tab._options[k],options,'background');Tab.getCmdOptions(Tab._options[k],options,'padding','8px');Tab.getCmdOptions(Tab._options[k],options,'populate',true);var op=Tab._options[k];var s="<table cellpadding='0' style='position:relative;"+(op.width?" width:"+op.width+";":'')+(op.background?" background:"+op.background+";":'')+(op.padding?" padding:"+op.padding+";":'')+"'><tr><td><table cellpadding='0' width='100%'><tr><td><table cellpadding='0'><tr style='position:relative;z-index:2'><tr>";var href=[];var hdiv=[];for(var i=0;i<a.length;i++){var b=Dom.getChildrenByType(a[i],'a');var label,dx;if(b.length>0){label=b[0].innerHTML;dx=b[0].offsetWidth+20+'px';href[i]=b[0].href;}else{b=Dom.getChildrenByType(a[i],'div');if(b.length>0){hdiv[i]=b[0].innerHTML;a[i].removeChild(a[i].lastChild);}label=a[i].innerHTML;a[i].innerHTML='<span>'+label+'</span>';b=Dom.getChildrenByType(a[i],'span');dx=b.length>0?b[0].offsetWidth+20+'px':'10em';}s+="<td><div class='tab-00' onmouseover='Tab.set("+k+","+i+",1,false);' onmouseout='Tab.set("+k+","+i+",0,false);' onclick='Tab.set("+k+","+i+",2,true);'><div class='tab-01'><div class='tab-10'><div class='tab-11'><div class='tab-xx'><div id='tab"+k+"_"+i+"' unselectable='on' style='width: "+dx+";padding:5px 0 4px 0'>"+label+"</div></div></div></div></div></div></td>";}s+="</tr></table></td></tr><tr><td><table cellpadding='0' width='100%'><tr style='position:relative;z-index:0'><tr><td><div class='cab-t'><div class='cab-b'><div class='cab-r'><div class='cab-l' id='tab"+k+"_div' >&nbsp;</div></div></div></div></td></tr></table></td></tr></table></td></tr></table>";el.innerHTML=s;for(var i=0;i<a.length;i++){el=$('tab'+k+'_'+i);if(el){if(href[i])el['tab_href']=href[i];if(hdiv[i])el['tab_hdiv']=hdiv[i];}}Tab.set(k,op.loadtab,2,op.populate);},set:function(n_tab,n_id,n_state,b_populate){var el=$('tab'+n_tab+'_'+n_id);var ch=n_state==2?'s':(n_state==1?'h':'t');var ol;if(!el)return;if(n_state==2){el['tab_selected']=1;for(var i=0;i<Tab._length[n_tab];i++){if(i==n_id)continue;ol=$('tab'+n_tab+'_'+i);if(ol&&ol.tab_selected==1){ol.tab_selected=0;Tab.set(n_tab,i,0,false);}}Tab.targetDiv='tab'+n_tab+'_div';if(b_populate){ol=$(Tab.targetDiv);if(ol){if(el.tab_hdiv){ol.innerHTML=el.tab_hdiv;}else{var href=el.tab_href?el.tab_href.replace(/%22/g,'"'):'about:blank';if(href.substr(0,11)=='javascript:'){eval(href.substr(11));}else{if(Tab._wholepage){location.href=href;}else{ol.innerHTML="<iframe id='tab"+n_tab+"_frame' scrolling='no' width='99%' frameborder='0' marginwidth='0' src='"+href+"'>Oops, your browser does not support iframes, please follow <a href='"+href+"'>this link</a>.</iframe>";}}}}}}else{if(el['tab_selected']==1)ch='s';}el=el.parentNode;el.className=ch+'ab-xx';el=el.parentNode;el.className=ch+'ab-11';el=el.parentNode;el.className=ch+'ab-10';el=el.parentNode;el.className=ch+'ab-01';el=el.parentNode;el.className=ch+'ab-00';},iframeResize:function(s_id){var el=$(s_id);if(el&&el.contentWindow&&el.contentWindow.document&&el.contentWindow.document.body&&el.contentWindow.document.body.scrollHeight){if(el.scrollHeight<el.contentWindow.document.body.scrollHeight+20)el.style.height=Dec.parse(el.contentWindow.document.body.scrollHeight)+20+'px';}},getCmdOptions:function(a,o,s_item,s_default,n_min,n_max){if(o&&typeof(o[s_item])!='undefined'){a[s_item]=o[s_item];if(n_min&&n_max&&(a[s_item]<n_min||a[s_item]>n_max))a[s_item]=s_default;}else{a[s_item]=s_default;}}};var TblMenu={attach:function(e,callback){if((e=$(e))){e._TblMenuSel=null;e._TblMenuCall=callback;var y=Dom.getFirstChildByType(e,'tbody'),x,i,j;if((y=Dom.getChildrenByType(y?y:e,'tr'))){for(j=y.length;--j>=0;){if((x=Dom.getChildrenByType(y[j],'td'))){for(i=x.length;--i>=0;){a=x[i];if(a.id){a._TblMenuCont=e;a.onmouseover=function(ev){TblMenu.mouseOver(ev,this);};a.onmouseout=function(){TblMenu.mouseOut(this);};a.onclick=function(ev){TblMenu.click(ev,this);};a.className='td_opt';}}}}}}},mouseOver:function(ev,td){if(td._TblMenuCont)if(td._TblMenuCont._TblMenuSel&&td._TblMenuCont._TblMenuSel.id!=td.id)td.className='td_hov';},mouseOut:function(td){if(td._TblMenuCont)if(td._TblMenuCont._TblMenuSel&&td._TblMenuCont._TblMenuSel.id!=td.id)td.className='td_opt';},click:function(ev,td){TblMenu.set(td,-2);},set:function(e,parm){if(e&&e._TblMenuCont){if(e._TblMenuCont._TblMenuSel&&e._TblMenuCont._TblMenuSel.id!=e.id)e._TblMenuCont._TblMenuSel.className='td_opt';(e._TblMenuCont._TblMenuSel=e).className='td_sel';e._TblMenuCont._TblMenuCall(e.id,parm);}}};var Button={enable:function(e,b){if((e=$s(e))){if(b){e.disabled=false;e.style.color='';}else{e.disabled=true;e.style.color='#999999';}}}};var Radio={getVal:function(e){if(typeof(e)=='string')e=document.getElementsByName(e);if(e)for(var i=0;i<e.length;i++)if(e[i].checked)return e[i].value;return '';},getValCmp:function(e,o_changed){var s=Radio.getVal(e);if(!o_changed.b_changed&&(e=$('o_'+e.substr(2))))o_changed.b_changed=s==e.value;return s;},setPrefixed:function(name,s,options){var e;if(options.indexOf(s)>=0){if((e=$('n_'+name+'_'+s)))e.checked=true;if((e=$('o_'+name)))e.value=s;return s;}return '';},validate:function(s_field,o_changed,b_must_change){var s,e_old,b_same;if((s=Radio.getVal(s_field))!=''){if(o_changed&&!o_changed.b_undo&&(e_old=$('z_'+s_field.substr(2))))o_changed.b_undo=s!=Str.trim(e_old.value);b_same=(e_old=$('o_'+s_field.substr(2)))&&s==Str.trim(e_old.value);if(b_same&&!b_must_change)return s;if(o_changed&&!o_changed.b_changed)o_changed.b_changed=!b_same;return s;}return '';}};function $(e){return document.getElementById(e);};function $s(e){return typeof(e)=='string'?document.getElementById(e):(typeof(e)=='object'?e:null);}var Filmaf={baseDomain:'',cookieDomain:'',userCollection:'',viewCollection:'',presentationMode:'',reqPageSize:50,firstRowNo:1,rowsShown:0,onMenuPopup:null,objId:0,lastMoveFolder:'',hasRelWeek:0,loadMainFloat:0,loadContextMenu:0,loadSearchMenu:0,attachExplains:0,contextStr:'',contextMed:'',contextForm:'',inputLine:0,contextRow:0,updatePriceComp:0,config:function(c){var s={s:''},a=$('s_alert'),e=$('context-menu'),r=$('search');if(!c.baseDomain){alert('Missing baseDomain on Filmaf.config');return;}Filmaf.baseDomain=c.baseDomain;if(c.userCollection)Filmaf.userCollection=c.userCollection=='guest'?'':c.userCollection;if(c.viewCollection)Filmaf.viewCollection=c.viewCollection=='www'?'':c.viewCollection;if(c.presentationMode)Filmaf.presentationMode=c.presentationMode;if(c.reqPageSize)Filmaf.reqPageSize=c.reqPageSize;if(c.firstRowNo)Filmaf.firstRowNo=c.firstRowNo;if(c.rowsShown)Filmaf.rowsShown=c.rowsShown;Filmaf.onPopup=c.onPopup?c.onPopup:null;if(c.objId)Filmaf.objId=c.objId;Filmaf.lastMoveFolder=decodeURIComponent(Cookie.get('move'));if(c.hasRelWeek)Filmaf.hasRelWeek=1;if(c.ulExplain)Filmaf.attachExplains=1;if(c.imgPreLoad)Img.preLoad(c.imgPreLoad);if(r)Search.create(0,0);if(c.optionsTag)DropDown.replaceOptions('sel_folder',c.optionsTag);if($('nav_bop'))Menus.cloneNav();if(c.imgHandlers||c.cartHandlers)Img.attach();if(c.cartHandlers)Price.attach();if(c.cartHandlers)Cart.highlight(false);if(c.preloadImgPop)setTimeout('ImgPop.getImgDiv();',200);if(e){if(c.ulAspect)ulAspect(s);if(c.ulBlog)ulBlog(s);if(c.ulBirth)ulBirth(s);if(c.ulCountry)ulCountry(s);if(c.ulDir)ulDir(s);if(c.ulDvd)ulDvd(s);if(c.ulDvdComments)ulDvdComments(s);if(c.ulDvdMany)ulDvdMany(s);if(c.ulDvdOne)ulDvdOne(s);if(c.ulDvdPic)ulDvdPic(s);if(c.ulDvdTitle)ulDvdTitle(s);if(c.ulExplain)ulExplain(s);if(c.ulFilmRating)ulFilmRating(s);if(c.ulGenre)ulGenre(s);if(c.ulHome)ulHome(s);if(c.ulJump)ulJump(s);if(c.ulLang)ulLang(s);if(c.ulPageSize)ulPageSize(s);if(c.ulPerson)ulPerson(s);if(c.ulPicComments)ulPicComments(s);if(c.ulPicMngt)ulPicMngt(s);if(c.ulPub)ulPub(s);if(c.ulRegion)ulRegion(s);if(r)ulSearch(s);if(c.ulStars)ulStars(s);e.innerHTML=s.s;}if(a)alert(a.innerHTML);if(c.splash)splash_me(1);},_getCookieDomain:function(){var c=document.domain?document.domain.match(/\..*\.com$/)||document.domain.match(/\..*\.net$/)||document.domain.match(/\..*\.mil$/)||document.domain.match(/\..*\.edu$/)||document.domain.match(/\..*\.gov$/):'';return typeof(c)=='object'&&c[0]?c[0]:c;}};Filmaf.cookieDomain=Filmaf._getCookieDomain();var Img={buttons:{},_buttonsLoaded:0,_buttonsInd:{},preLoad:function(s){if(!document.images)return;var s=s.split('.'),i,a;for(i=0;i<s.length;i++){switch(s[i]){case 'pin':a=Img.buttons[0]={};a.b00=new Image();a.b00.src='http://dv1.us/d1/00/bp00.gif';a.b01=new Image();a.b01.src='http://dv1.us/d1/00/bp01.gif';a.b10=new Image();a.b10.src='http://dv1.us/d1/00/bp10.gif';a.b11=new Image();a.b11.src='http://dv1.us/d1/00/bp11.gif';a.onClick=null;a.afterClick=Search.savePin;break;case 'cart':a=Img.buttons[1]={};a.b00=new Image();a.b00.src='http://dv1.us/d1/00/bc00.png';a.b01=new Image();a.b01.src='http://dv1.us/d1/00/bc01.png';a.b10=new Image();a.b10.src='http://dv1.us/d1/00/bc10.png';a.b11=new Image();a.b11.src='http://dv1.us/d1/00/bc11.png';a.onClick=Cart.click;a.afterClick=null;break;case 'price':a=Img.buttons[2]={};a.b00=new Image();a.b00.src='http://dv1.us/d1/00/bd00.png';a.b01=new Image();a.b01.src='http://dv1.us/d1/00/bd01.png';a.b10=new Image();a.b10.src='http://dv1.us/d1/00/bd10.png';a.b11=new Image();a.b11.src='http://dv1.us/d1/00/bd11.png';a.onClick=Price.click;a.afterClick=null;break;case 'help':a=Img.buttons[3]={};a.b00=new Image();a.b00.src='http://dv1.us/d1/00/bm00.gif';a.b01=a.b00;a.b10=new Image();a.b10.src='http://dv1.us/d1/00/bm10.gif';a.b11=a.b10;a.onClick=null;a.afterClick=null;break;case 'spin':a=Img.buttons[4]={};a.b00=new Image();a.b00.src='http://dv1.us/d1/00/pn00.gif';a.b10=new Image();a.b10.src='http://dv1.us/d1/00/pn10.gif';a.b11=new Image();a.b11.src='http://dv1.us/d1/00/pn11.gif';a.onClick=ImgSpin.click;a.afterClick=null;break;case 'spin_hoz':a=Img.buttons[8]={};a.b00=new Image();a.b00.src='http://dv1.us/d1/00/ph00.gif';a.b10=new Image();a.b10.src='http://dv1.us/d1/00/ph10.gif';a.b11=new Image();a.b11.src='http://dv1.us/d1/00/ph11.gif';a.onClick=ImgSpin.click;a.afterClick=null;break;case 'explain':a=Img.buttons[5]={};a.b00=new Image();a.b00.src='http://dv1.us/d1/00/bq00.png';a.b10=new Image();a.b10.src='http://dv1.us/d1/00/bq10.png';a.onClick=Explain.show;a.afterClick=null;break;case 'drop':a=Img.buttons[6]={};a.b00=new Image();a.b00.src='http://dv1.us/d1/00/dp00.gif';a.b01=a.b00;a.b10=new Image();a.b10.src='http://dv1.us/d1/00/dp10.gif';a.b11=a.b10;a.onClick=null;a.afterClick=null;break;case 'undo':a=Img.buttons[7]={};a.b00=new Image();a.b00.src='http://dv1.us/d1/1.gif';a.b10=new Image();a.b10.src='http://dv1.us/d1/00/ud01.gif';a.b11=new Image();a.b11.src='http://dv1.us/d1/00/ud11.gif';a.b20=new Image();a.b20.src='http://dv1.us/d1/00/rd01.gif';a.b21=new Image();a.b21.src='http://dv1.us/d1/00/rd11.gif';a.onClick=Undo.click;a.afterClick=null;break;case 'pagesize':a=Img.buttons[9]={};a.b00=new Image();a.b00.src='http://dv1.us/d1/00/sz00.gif';a.b01=a.b00;a.b10=new Image();a.b10.src='http://dv1.us/d1/00/sz10.gif';a.b11=a.b10;a.onClick=null;a.afterClick=null;break;case 'aleft':a=Img.buttons[10]={};a.b00=new Image();a.b00.src='http://dv1.us/d1/00/al00.gif';a.b01=a.b00;a.b10=new Image();a.b10.src='http://dv1.us/d1/00/al10.gif';a.b11=a.b10;a.onClick=null;a.afterClick=null;break;case 'aright':a=Img.buttons[11]={};a.b00=new Image();a.b00.src='http://dv1.us/d1/00/ar00.gif';a.b01=a.b00;a.b10=new Image();a.b10.src='http://dv1.us/d1/00/ar10.gif';a.b11=a.b10;a.onClick=null;a.afterClick=null;break;case 'astop':a=Img.buttons[12]={};a.b00=new Image();a.b00.src='http://dv1.us/d1/00/as00.gif';a.b01=a.b00;a.b10=new Image();a.b10.src='http://dv1.us/d1/00/as10.gif';a.b11=a.b10;a.onClick=null;a.afterClick=null;break;case 'across':a=Img.buttons[13]={};a.b00=new Image();a.b00.src='http://dv1.us/d1/00/ax00.gif';a.b01=a.b00;a.b10=new Image();a.b10.src='http://dv1.us/d1/00/ax10.gif';a.b11=a.b10;a.onClick=null;a.afterClick=null;break;case 'acheck':a=Img.buttons[14]={};a.b00=new Image();a.b00.src='http://dv1.us/d1/00/ak00.gif';a.b01=a.b00;a.b10=new Image();a.b10.src='http://dv1.us/d1/00/ak10.gif';a.b11=a.b10;a.onClick=null;a.afterClick=null;break;case 'aplus':a=Img.buttons[15]={};a.b00=new Image();a.b00.src='http://dv1.us/d1/00/ap00.gif';a.b01=a.b00;a.b10=new Image();a.b10.src='http://dv1.us/d1/00/ap10.gif';a.b11=a.b10;a.onClick=null;a.afterClick=null;break;case 'adown':a=Img.buttons[16]={};a.b00=new Image();a.b00.src='http://dv1.us/d1/00/ad00.gif';a.b01=a.b00;a.b10=new Image();a.b10.src='http://dv1.us/d1/00/ad10.gif';a.b11=a.b10;a.onClick=null;a.afterClick=null;break;case 'tabbk':Img._buttonsInd[0]=new Image();Img._buttonsInd[0].src='http://dv1.us/d1/00/header-back-small.jpg';break;case 'spun':a=Img.buttons[17]={};a.b00=new Image();a.b00.src='http://dv1.us/d1/00/pn00.gif';a.b10=new Image();a.b10.src='http://dv1.us/d1/00/pn10.gif';a.b11=new Image();a.b11.src='http://dv1.us/d1/00/pn11.gif';a.onClick=ImgSpun.click;a.afterClick=null;break;case 'home':a=Img.buttons[18]={};a.b00=new Image();a.b00.src='http://dv1.us/d1/00/fbh0.png';a.b01=a.b00;a.b10=new Image();a.b10.src='http://dv1.us/d1/00/fbh1.png';a.b11=a.b10;a.onClick=null;a.afterClick=null;break;case 'coll':a=Img.buttons[19]={};a.b00=new Image();a.b00.src='http://dv1.us/d1/00/fbf0.png';a.b01=a.b00;a.b10=new Image();a.b10.src='http://dv1.us/d1/00/fbf1.png';a.b11=a.b10;a.onClick=null;a.afterClick=null;break;}}Img._buttonsLoaded=true;},getMouseY:function(ev,e){return Img.getCoord(ev,e).y;},getMouseX:function(ev,e){return Img.getCoord(ev,e).x;},setPin:function(e,b){Img.check(e,0,b);},getPin:function(e){return Img.isChecked(e,0);},attach:function(){var e=window.self.document.getElementsByTagName('img'),i,x;for(i=e.length;--i>=0;){x=e[i];if(x.id){switch(x.id.substr(0,3)){case 'ic_':x.onmouseover=function(ev){Img.mouseOver(ev,this,1);};x.onmouseout=function(){Img.mouseOut(this,1);};x.onclick=function(ev){Img.click(ev,this,1,this.id.substr(3));};break;case 'id_':x.onmouseover=function(ev){Img.mouseOver(ev,this,2);};x.onmouseout=function(){Img.mouseOut(this,2);};x.onclick=function(ev){Img.click(ev,this,2,this.id.substr(3));};break;case 'is_':ImgSpin.attachSpinV(x);break;case 'ex_':x.onmouseover=function(ev){Img.mouseOver(ev,this,5);};x.onmouseout=function(){Img.mouseOut(this,5);};x.onclick=function(ev){Img.click(ev,this,5,this.id.substr(3));};break;case 'dp_':x.onmouseover=function(ev){Img.mouseOver(ev,this,6);};x.onmouseout=function(){Img.mouseOut(this,6);};x.onclick=function(ev){Img.click(ev,this,6,this.id.substr(3));};break;case 'zi_':x.onmouseover=function(ev){Img.mouseOver(ev,this,7);};x.onmouseout=function(){Img.mouseOut(this,7);};x.onclick=function(ev){Img.click(ev,this,7,this.id.substr(3));};Undo.setImg(x,false);Undo.attach(x);break;case 'ih_':ImgSpin.attachSpinH(x);break;case 'sz_':x.onmouseover=function(ev){Img.mouseOver(ev,this,9);};x.onmouseout=function(){Img.mouseOut(this,9);};x.onclick=function(ev){Img.click(ev,this,9,this.id.substr(3));};break;case 'zo_':x.onmouseover=function(ev){ImgPop.show(this,0);};break;}}}},mouseOver:function(ev,img,type){if(!Img._buttonsLoaded)return;var a=Img.buttons[type],o;switch(type){case 0:case 1:case 2:case 3:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 18:case 19:o=Dec.parse(img.src.substr(img.src.length-5,1));img.src=o==2?a.b12.src:(o==1?a.b11.src:a.b10.src);img.style.cursor='pointer';break;case 4:case 17:o=Img.getMouseY(ev,img);if(o>=1&&o<=20){img.style.cursor='pointer';a=o>=11?a.b10.src:a.b11.src;if(a!=img.src)img.src=a;}break;case 5:case 6:case 9:img.style.cursor='pointer';img.src=a.b10.src;break;case 7:Undo.setImg(img,true);break;case 8:o=Img.getMouseX(ev,img);if(o>=1&&o<=20){img.style.cursor='pointer';a=o<10?a.b10.src:a.b11.src;if(a!=img.src)img.src=a;}break;}},mouseOut:function(img,type){if(!Img._buttonsLoaded)return;var a=Img.buttons[type],o;switch(type){case 0:case 1:case 2:case 3:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 18:case 19:o=Dec.parse(img.src.substr(img.src.length-5,1));img.src=o==2?a.b02.src:(o==1?a.b01.src:a.b00.src);img.style.cursor='pointer';break;case 4:case 8:case 17:img.src=a.b00.src;break;case 5:case 6:case 9:img.src=a.b00.src;break;case 7:Undo.setImg(img,false);break;}},click:function(ev,img,type,s_id){if(!Img._buttonsLoaded||!img)return;var a=Img.buttons[type],o,m,e;switch(type){case 0:if((e=ev.currentTarget||ev.srcElement))s_id=e.id;case 1:case 2:o=Dec.parse(img.src.substr(img.src.length-5,1));m=2;if(!a.onClick||a.onClick(s_id,(o+1)%m))o=(o+1)%m;if(type!=2)img.src=o==2?a.b12.src:(o==1?a.b11.src:a.b10.src);if(a.afterClick)a.afterClick(s_id);break;case 4:case 17:o=Img.getMouseY(ev,img);if(o>=1&&o<=20&&a.onClick)a.onClick(s_id,o<=10);break;case 5:case 6:case 7:case 9:if(a.onClick)a.onClick(s_id);break;case 8:o=Img.getMouseX(ev,img);if(o>=1&&o<=20&&a.onClick)a.onClick(s_id,o>10);break;}},isChecked:function(e,type){if(!(e=$s(e)))return 0;switch(type){case 0:case 1:case 2:return Dec.parse(e.src.substr(e.src.length-5,1));}return 0;},check:function(e,type,n_set){e=$s(e);if(!Img._buttonsLoaded||!e)return;switch(type){case 0:case 1:case 2:e.src=n_set==2?Img.buttons[type].b02.src:(n_set==1?Img.buttons[type].b01.src:Img.buttons[type].b00.src);break;}},getPicLoc:function(s,b_thumb){var c,p,k=s.indexOf('-');if(k>3){c=Dec.parse(s.substr(k-1,1));c='http://dv1.us';p=s.indexOf('/');if(p>=0)return c+(p>0?'/':'')+s;else if(b_thumb)return c+'/p0/'+s.substr(k-3,3)+'/'+s+'.gif';else return c+'/p1/'+s.substr(k-3,3)+'/'+s+'.jpg';}return '';},getCoord:function(ev,e){var a={x:0,y:0};if(typeof ev.pageY=='undefined'&&typeof ev.clientX=='number'&&document.documentElement){a.x=ev.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;a.y=ev.clientY+document.body.scrollTop+document.documentElement.scrollTop;}else{a.x=ev.pageX;a.y=ev.pageY;}if(e.offsetParent){a.x-=e.offsetLeft;a.y-=e.offsetTop;while(e=e.offsetParent){a.x-=e.offsetLeft;a.y-=e.offsetTop;}}return a;}};var ImgPop={_zoomImg:null,_zoomDvd:0,_zoomSrc:'',_related:{},_onwership:false,_footer:false,skipShowOnWait:false,menuContext:'',setMenuText:function(e){if(Cookie.get('finder')=='N'){e.innerHTML='Edition Finder';ImgPop.menuContext='show';}else{e.innerHTML='Disable Edition Finder';ImgPop.menuContext='stop showing';}},show:function(e,ovr){if(ImgPop.skipShowOnWait)return;var auto=Cookie.get('finder')!='N';if(e&&(ovr||auto)){var f=ImgPop.getImgDiv(),g=$('img_zoom1'),h=$('img_zoom2'),s=e.src,z='',r,x,y,tx,ty,d,o,a,b;if(f&&g&&h){if(/^http:\/\/([a-z]\.)?dv1.us\/p0\/[0-9]{3}\/[0-9]{6}-d[0-9]+\.gif$/.test(s)){z=s.replace(/p0/,'p1').replace(/gif/,'jpg');y='http://dv1.us/d1/wait-big.gif';tx=356;ty=623;d=1;ImgPop._onwership=Filmaf.userCollection!=''&&(Filmaf.userCollection!=Filmaf.viewCollection||typeof(Home)!="undefined");}if(/^http:\/\/dv1.us\/usr\/[a-z-]\/[^\._]+_t\.jpg$/.test(s)){z=s.replace(/_t\./,'_p.');y='http://dv1.us/d1/wait.gif';tx=356;ty=289;d=0;ImgPop._onwership=false;}if(z&&ImgPop._zoomSrc!=z){if((r=$('pop_enable'))){if(auto){r.innerHTML='Disable Edition Finder';r.href='javascript:ImgPop.close(1)';}else{r.innerHTML='Enable Edition Finder';r.href='javascript:ImgPop.close(2)';}}ImgPop._zoomSrc=z;g.src=y;h.src='http://dv1.us/d1/1.gif';$('pop_text').innerHTML='';Pop.open(f,e,tx,ty,d);ImgPop._zoomImg=new Image();ImgPop._zoomImg.onload=function(){ImgPop._doneLoading();};ImgPop._zoomImg.src=z;if(d){ImgPop._zoomDvd=Dec.parse(e.id.substr(3));Ajax.asynchNoDup('img-pop','ImgPop.__paint','?dvd='+ImgPop._zoomDvd,0,250);}}}}},__paint:function(){var o={};if(!Ajax.getParms(o))return;var dvd=Ajax.statusInt(o.line1,'dvd'),y={has:false,amz:'&nbsp;',price:'&nbsp;',imdb:'&nbsp;',media:'&nbsp;',cnt:'&nbsp;',pub:'&nbsp;',rel:'&nbsp;'},s='',x={},i,same=0;if(ImgPop._zoomDvd!=dvd)return;ImgPop._related.same='';ImgPop._related.mine='';ImgPop._related.mine_count=0;ImgPop._related.other='';ImgPop._related.other_count=0;ImgPop._related.dvd=[];for(i=2;i<o.length&&ImgPop._parsePaint(o.lines[i],x);i++){ImgPop._related.dvd[i-1]=x.dvd;if(x.dvd==dvd){y.dvd=x.dvd;y.pic=x.pic;y.folder=x.folder;y.has=x.folder!='';y.amz=x.amz;y.price=x.price;y.imdb=x.imdb;y.media=x.media;y.cnt=x.cnt;y.pub=x.pub;y.rel=x.rel;ImgPop._paintGenAlternates(x,ImgPop._related,y.has?2:1);}else{ImgPop._paintGenAlternates(x,ImgPop._related,0);}}s+="<div id='pop_text2'>";if(ImgPop._onwership)if(y.has)s+=ImgPop.paintInColl(y.folder,'ImgPop.showAll()');else s+=ImgPop._paintAlternates(ImgPop._related,ImgPop._related.mine_count>0?1:0);else s+=ImgPop._paintAlternates(ImgPop._related,0);s+="</div><div style='overflow:hidden'><table class='img_bar' style='width:100%'><tr><td class='img_bar' style='border-right:solid 2px #0059a6;border-top:solid 2px #0059a6'>"+y.media+"</td><td class='img_bar' style='border-left:solid 2px #0059a6;border-right:solid 2px #0059a6;border-top:solid 2px #0059a6'>"+y.price+"</td><td class='img_bar' style='border-left:solid 2px #0059a6;border-right:solid 2px #0059a6;border-top:solid 2px #0059a6'>"+y.rel+"</td><td class='img_bar' style='border-left:solid 2px #0059a6;border-right:solid 2px #0059a6;border-top:solid 2px #0059a6'>"+y.amz+"</td><td class='img_bar' style='border-left:solid 2px #0059a6;border-top:solid 2px #0059a6'>"+y.imdb+"</td></tr><tr><td class='img_bar' style='border-right:solid 2px #0059a6;border-top:solid 2px #0059a6'>"+y.cnt+"</td><td class='img_bar' style='border-left:solid 2px #0059a6;border-top:solid 2px #0059a6;overflow:hidden' colspan='4'>"+y.pub+"</td></tr></table></div>";$('pop_text').innerHTML=s;Pop.open('div_zoom','',0,0,2);},__paintExpand:function(){var o={};if(!Ajax.getParms(o))return;var dvd=Ajax.statusInt(o.line1,'dvd'),x={},i;ImgPop._related.same='';ImgPop._related.mine='';ImgPop._related.mine_count=0;ImgPop._related.other='';ImgPop._related.other_count=0;ImgPop._related.dvd=[];for(i=2;i<o.length&&ImgPop._parsePaint(o.lines[i],x);i++){ImgPop._related.dvd[i-1]=x.dvd;ImgPop._paintGenAlternates(x,ImgPop._related,x.dvd==dvd?(x.folder!=''?2:1):0);}$('pop_text').innerHTML=ImgPop._paintAlternates(ImgPop._related,2);},showAll:function(){$('pop_text2').innerHTML=ImgPop._paintAlternates(ImgPop._related,2);Pop.open('div_zoom','',0,0,2);},_paintGenAlternates:function(x,h,same){var z=same?'*':'',f='0000000'+x.dvd;f=f.substr(f.length-6,6);f=Filmaf.baseDomain+"/search.html?has="+f+"&init_form=str0_has_"+f;f="<div class='img_float2'><a id='b_"+x.dvd+"' class='dvd_pic' href='"+f+"'><img src='"+(x.pic=='-'?'http://dv1.us/d1/00/pic-no.gif':Img.getPicLoc(x.pic,1))+"' width='63' height='90' /></a> <div class='img_text'>"+z;z+="</div></div>";if(x.folder!=''){f+=ImgPop._getFolderName(x.folder)+z;if(!same){h.mine+=f;h.mine_count++;}}else{f+=x.mediaSm+'/'+x.cntSm+z;if(!same){h.other+=f;h.other_count++;}}if(same)h.same=f;},paintInColl:function(f,s){return "<div><div><div style='float:right'><a href='javascript:"+s+"'>[+]</a></div>In your collection</div><img src='http://dv1.us/d1/"+ImgPop._getFolderImg(f)+"' width='90px' height='90px' /><div class='img_text'>"+ImgPop._getFolderName(f)+"</div></div>";},_paintAlternates:function(h,mine){var tit,cnt,str;switch(mine){case 0:return "<div style='padding:0 4px 4px 4px'><div style='float:right'><a href='javascript:ImgPop.showAll()'>[+]</a></div>&nbsp;</div>";break;case 1:tit="<div style='float:right'><a href='javascript:ImgPop.showAll()'>[+]</a></div>Alternate editions in your collection";cnt=h.mine_count;str=h.mine;break;case 2:tit="Alternate editions";cnt=1+h.mine_count+h.other_count;str=h.same+h.mine+h.other;break;}if(!cnt)return '';var w=cnt*(63+22),t=cnt>4?" style='overflow-x:scroll'":'',c=cnt>4?" ("+cnt+")":'';return "<div style='padding:0 4px 2px 4px'><div style='padding-bottom:2px'>"+tit+c+"</div><div"+t+"><div style='height:104px;width:"+w+"px'>"+str+"</div></div></div>";},_getFolderName:function(s){switch(s){case 'owne':return 'owned';case 'wish':return 'wish&nbsp;list';case 'on-o':return 'on&nbsp;order';case 'work':return 'work';case 'have':return 'have&nbsp;seen';}return '';},_getFolderImg:function(s){switch(s){case 'owne':return 'chk-g.gif';case 'wish':return 'chk-r.gif';case 'on-o':return 'chk-b.gif';case 'work':return 'chk-y.gif';case 'have':return 'chk-z.gif';}return '1.gif';},_getMediaType:function(s,z){switch(s){case '2':return z?'BD/D':'Blu-ray/DVD';case '3':return z?'BD3d':'Blu-ray 3D';case 'A':return z?'Aud':'DVD Audio';case 'B':return z?'BD':'Blu-Ray';case 'C':return z?'HD/D':'HD DVD/DVD';case 'D':return z?'D':'DVD';case 'H':return z?'HD':'HD DVD';case 'O':return z?'Ot':'Other';case 'P':return z?'Hold':'Placeholder';case 'R':return z?'BD-R':'BD-R';case 'T':return z?'HD/D':'HD DVD/DVD';case 'V':return z?'D-R':'DVD-R';}return '&nbsp;';},_parsePaint:function(s,t){var i,n;s=s.split('\t');if(s.length>=10){t.dvd=s[0];t.pic=s[1];t.folder=s[2];t.amz=s[3];t.price=s[4];t.imdb=s[5];t.media=s[6];t.cnt=s[7];t.pub=s[8];t.rel=s[9].trim();t.amz=t.amz!=0?"amz: <a href='"+Filmaf.baseDomain+"/rt.php?vd=amz"+t.dvd+"'>x</a>":'&nbsp;';t.price=t.price>0?"<a href='"+Filmaf.baseDomain+"/rt.php?vd=amz"+t.dvd+"'>$"+t.price+"</a>":'&nbsp;';t.rel=t.rel!='-'?t.rel.substr(0,4)+'-'+t.rel.substr(4,2)+'-'+t.rel.substr(6,2):'&nbsp;';t.cnt=t.cnt!='-'?t.cnt.substr(1,t.cnt.length-2).toUpperCase():'&nbsp;';t.cntSm=t.cnt.substr(0,2);n='0000000'+t.dvd;n=n.substr(n.length-7,7);t.mediaSm=ImgPop._getMediaType(t.media,1);t.media="<a href='"+Filmaf.baseDomain+"/search.html?has="+n+"&init_form=str0_has_"+n+"'>"+ImgPop._getMediaType(t.media,0)+"</a>";if(t.imdb){n=t.imdb;t.imdb='imdb: ';for(i=0;i<n;i++)t.imdb+="<a href='"+Filmaf.baseDomain+"/rt.php?vd=imd"+t.dvd+"-"+i+"'>x</a> ";}else{t.imdb='&nbsp;';}return true;}return false;},getImgDiv:function(){var e=$('div_zoom');if(e)return e;var d=document.createElement('div'),s=d.style,b=document.getElementsByTagName('body').item(0);d.id='div_zoom';s.visibility='hidden';s.position='absolute';s.top=0;s.left=0;s.zIndex=7;b.appendChild(d);d.innerHTML="<div style='background:#0059a6'><div style='border:1px solid #6c8ba6;padding:3px'><div style='background:#ffffff;text-align:center;width:348px'><div><table class='img_bar' style='width:100%'><tr><td class='img_bar' style='border-bottom:solid 2px #0059a6;text-align:left'><div style='float:right'><a href='javascript:ImgPop.close(0)'>Close</a></div><a id='pop_enable' href='javascript:ImgPop.close(1)'>Disable Edition Finder</a></td></tr></table></div><div style='padding:8px 0 4px 0'><img id='img_zoom1' src='http://dv1.us/d1/1.gif' onclick='ImgPop.close(0)' /><img id='img_zoom2' src='http://dv1.us/d1/1.gif' onclick='ImgPop.close(0)' /></div><div id='pop_text'></div></div></div></div>";return d;},close:function(p){if(Pop.close('div_zoom')){ImgPop._zoomImg=null;ImgPop._zoomSrc='';}switch(p){case 1:Cookie.set('finder','N');break;case 2:Cookie.del('finder');break;}},_doneLoading:function(){var g=$('img_zoom1'),h=$('img_zoom2');;if(g&&h){g.src='http://dv1.us/d1/1.gif';h.src=ImgPop._zoomImg.src;}}};var Menus={setup:function(){if($('main-menu'))DynarchMenu.setup('main-menu',{lazy:true,electric:1000,tooltips:true,scrolling:true});if($('context-menu'))Context.setup();if($('search'))Search.setup(1);if(Filmaf.attachExplains)Explain.attach();},cloneNav:function(){var e,f;if((e=$('nav_top'))&&(f=$('nav_bop'))){f.innerHTML=e.innerHTML.replace(/<td width=.8%.><select.*\/select><\/td>/i,'').replace(/sz_page_0/,'sz_page_1').replace(/ex_www_titles_disks_0/,'ex_www_titles_disks_1').replace(/ex_www_dvd_cart_0/,'ex_www_dvd_cart_1').replace(/cart_count_0/,'cart_count_1').replace(/dp_jump_0/,'dp_jump_1');}}};var Str={trim:function(s){return s.replace(/^[\s]+/,''). replace(/[\s]+$/,''). replace(/[\t\r\x20]+/g,' '). replace(/\x20\n/g,'\n').replace(/\n\x20/g,'\n');},trimR:function(s){return s.replace(/[\s]+$/,''). replace(/[\t\r\x20]+/g,' '). replace(/\x20\n/g,'\n').replace(/\n\x20/g,'\n');},trimL:function(s){return s.replace(/^[\s]+/,''). replace(/[\t\r\x20]+/g,' '). replace(/\x20\n/g,'\n').replace(/\n\x20/g,'\n');},firstLine:function(s){var n;s=s.replace(/^[\s]+/,'');if((n=s.indexOf('\n'))>1)s=s.substr(0,n);return s.replace(/[\s]+$/,''). replace(/[\s]+/g,' ');},ucFirst:function(s){return s.substr(0,1).toUpperCase()+s.substr(1);},ucWords:function(s){return(s).replace(/^(.)|\s(.)/g,function($1){return $1.toUpperCase();});},ucTitle:function(s){var x=s.split(' '),t=x.length,i,w;for(i=0,s='';i<t;i++){w=x[i];s+=' '+(i&&',the,a,an,aboard,about,above,across,after,against,along,amid,among,anti,around,as,at,before,behind,below,beneath,beside,besides,between,beyond,but,by,concerning,considering,despite,down,during,except,excepting,excluding,following,for,from,in,inside,into,like,minus,near,of,off,on,onto,opposite,outside,over,past,per,plus,regarding,round,save,since,than,through,to,toward,towards,under,underneath,unlike,until,up,upon,vs,versus,via,with,within,without,and,but,for,nor,or,so,yet,to,'.indexOf(','+w+',')>=0?w:w.substr(0,1).toUpperCase()+w.substr(1));}return s.substr(1);},hasSameVal:function(e,f){if((e=$s(e))&&(f=$s(f))&&Str.trim(e.value)!=Str.trim(f.value)){f.style.color='red';f.style.background='#ffcccc';Validate.warn(e,true,true,'The password and the password confirmation fields do not match.',false);return false;}return true;},validateN:function(s_field,n_cnt,o_changed,n_min_len,n_max_len,b_allow_empty,s_name,b_must_change){var i,b;for(i=0,b=true;b!==false&&i<n_cnt;i++)b=Str.validate(s_field+i,o_changed,n_min_len,n_max_len,i?1:b_allow_empty,i?s_name+(i+1):Str.trim(s_name),i?0:b_must_change);return b!==false;},validate:function(s_field,o_changed,n_min_len,n_max_len,b_allow_empty,s_name,b_must_change){var s,n,e_new,e_old,b_same;if((e_new=$(s_field))){if(o_changed&&!o_changed.b_undo&&(e_old=$('z_'+s_field.substr(2))))o_changed.b_undo=Str.trim(e_new.value)!=Str.trim(e_old.value);b_same=(e_old=$('o_'+s_field.substr(2)))&&(s=Str.trim(e_new.value))==Str.trim(e_old.value);if(b_same&&!b_must_change)return s;s=Validate.checkEmptiness(e_new,b_allow_empty,s_name);if(s===false)return false;if(!e_old&&s=='')b_same=true;n=s.length;if(n_max_len>0&&n>n_max_len){Validate.warn(e_new,true,true,s_name+' must have no more than '+n_max_len+' characters. You entered '+n+'.',false);return false;}if(n_min_len>0&&n<n_min_len){Validate.warn(e_new,true,true,s_name+' must have at least '+n_min_len+' characters. You entered '+n+'.',false);return false;}if(o_changed&&!o_changed.b_changed)o_changed.b_changed=!b_same;e_new.value=s;return s;}return '';}};function ulBlog(s){s.s+="<li class='context-class-a-blog_pop'><ul id='context_fb_blog'><li>"+ulBlogForm('','')+"</li></ul></li><li class='context-class-a-more_pop'><ul id='context_fb_more'><li>"+Facebook.ulDiv()+"</li></ul></li>";};function ulBlogForm(cls,but){if(cls=='')cls='one_lbl';if(but=='')but="<input type='button' id='b_blog_and_home' value='Blog and go to homepage' onclick='DvdList.blog(2)' style='width:180px;margin-right:10px'><input type='button' value='Blog' onclick='DvdList.blog(1)' style='width:80px;margin-right:10px'>";cls="<div style='margin:4px 0 4px 0'><form id='mform_dvd_blog' name='mform_dvd_blog' action='javascript:void(0)'><div class='"+cls+"' style='margin:10px 0 4px 0;text-align:left'><div><table style='width:100%;white-space:nowrap'><tr><td style='width:97%'>Blog it: (<span id='rem1'>500</span>)</td><td style='width:1%'>Publish to Facebook:</td><td style='width:1%'><input id='blogfb_cb' type='checkbox' onclick='DvdList.blogfb()' /><img id='blogfb_img' src='http://dv1.us/d1/fb0.png' /></td></tr></table></div><textarea id='n_dvd_blog' style='width:100%;height:40px' maxlength='500' wrap='soft' onkeyup='Edit.countDown(\"rem1\",500 - this.value.length)'></textarea></div><div style='text-align:right;margin:4px 0 4px 0;white-space:nowrap'>"+but+"<input type='button' value='Cancel' onclick='DvdList.blog(0)' style='width:72px'></div></form></div>";return cls;};var DvdList={setListFormat:function(prop,row,edit){if(row<=0)row=Filmaf.firstRowNo;if(!prop||prop==Filmaf.presentationMode)return;switch(prop){case 'one':break;case 'prn':row=1;break;case 'src':default:row=Math.floor((row+Filmaf.reqPageSize-1)/Filmaf.reqPageSize);prop='';break;}if(row<1)row=1;Cookie.set('pm',prop);location.href=Url.setVal('edit',edit?'1':'',Url.setVal('pg',row>1?row:''));},showLargePic:function(s){var i,e=$('a_'+s);if(e&&(e=Dom.getFirstChildByType(e,'img')))if((i=e.src.indexOf(s.substr(1)+'-'))>=0)if((e=e.src.substr(i)))if((e=e.substr(0,e.length-4)))Win.showPic(e);},picMngt:function(s){if(s)Win.openPop(false,'target_pic',Filmaf.baseDomain+'/utils/x-pic-mngt.html?obj_type=dvd&obj='+s,0,0,1,1);else alert('Sorry, we did not find any titles selected.');},onePagerFlip:function(edit){if(Filmaf.presentationMode=='one')DvdList.setListFormat('src',Filmaf.contextRow,0);else DvdList.setListFormat('one',Filmaf.contextRow,edit);},searchByDvdId:function(s){s=encodeURIComponent(s).replace(/(\%20)+/g,'+');if(s)location.href=Filmaf.baseDomain+"/search.html?has="+s+"&init_form=str0_has_"+s;},folderToMove:function(id){switch(id){case 'copy_last':return Filmaf.lastMoveFolder;case 'copy_owned':return 'owned';case 'copy_order':return 'on-order';case 'copy_wish':return 'wish-list';case 'copy_work':return 'work';case 'copy_seen':return 'have-seen';}return 0;},dvdAction:function(s_form,s_id,s_action,s_where){function __dvdListEdit(s){if(s)Win.openPop(false,'targetedit',Filmaf.baseDomain+'/utils/x-dvd-edit.html?dvd='+s,0,0,1,1);else alert('Sorry, we did not find any titles selected.');};function __dvdListDel(s){var f;if(s&&(f=$('f_act'))){f.act.value='del';f.sub.value=s;f.tar.value='';f.action=location.href;f.submit();}};function __dvdListWho(s){location.href=Filmaf.baseDomain+'/who.html?dvd='+s;};function __dvdListMove(s,d){var f;if(s&&d&&(f=$('f_act'))){f.act.value='move';f.sub.value=s;f.tar.value=d;f.action=location.href;f.submit();}return true;};var a,f,i,s='';if(s_form){if((f=$(s_form))){a=DvdList.getSelListings(1,f);for(i=0;i<a.length;i++)s+=a[i]+',';s=s.substr(0,s.length-1);if(s_action=='move'){if(!f.sel_folder)return;if(!s_where)s_where=DropDown.getSelValue(f.sel_folder);}}}else{s=Dec.parse(s_id.replace(/^0+/g,''));}if(s){switch(s_action){case 'edit':__dvdListEdit(s);break;case 'delete':__dvdListDel(s);break;case 'who':__dvdListWho(s);break;case 'move':__dvdListMove(s,s_where);break;}}return true;},cartAdd:function(child){var f=Dom.getParentByType(child,'form'),c=Cookie.get('cart'),a=DvdList.getSelListings(1,f),i,h;c=c?','+c+',':'';if(a.length){for(i=a.length-1;i>=0;i--){if(a[i]){h=c.match(new RegExp(','+a[i]+'-[a-z0-9]*,','g'));if(h)c=h[0]+c.replace(new RegExp(','+a[i]+'-[a-z0-9]*,','g'),',').substr(1);else c=','+a[i]+'-'+(c?c:',');}}Cookie.set('cart',c);Cart.highlight(true);}return false;},cartDel:function(child){var f=Dom.getParentByType(child,'form'),c=Cookie.get('cart'),a=DvdList.getSelListings(1,f),i,h,b;c=c?','+c+',':'';if(a.length){for(i=a.length-1;i>=0;i--)if(a[i])c=c.replace(new RegExp(','+a[i]+'-[a-z0-9]*,','g'),',');Cookie.set('cart',c);Cart.highlight(true);}return false;},dvdSelect:function(f,n){var e,i,b,x;if(f&&f.elements){e=f.elements;b=1;for(i=0;i<e.length;i++){x=e[i];if(x.type=='checkbox'&&x.id.substr(0,3)=='cb_'&&x.id!='cb_all'){x.checked=n==2?!x.checked:n!=0;if(!x.checked)b=0;}}if((x=$('cb_all')))x.checked=b;}},blog:function(n){var e=$('n_dvd_blog'),f=$('blogfb_cb'),s,b=false;if(n){if(e){if((s=Str.trim(e.value))){f=f&&f.checked?'1':'0';s_post='version=v1&blog='+encodeURIComponent(s)+'&pic_source=D&pic_name=-&pic_id=0&obj_id='+Filmaf.contextStr+'&obj_type=D&fb='+f;switch(n){case 1:case 2:Ajax.asynch('home','DvdList.__blog'+(n==1?'':'Home'),'?mode=blog&what=set&user='+Filmaf.userCollection,s_post);break;case 3:Ajax.asynch('home','MicroblogPainter.__paint','?mode=blog&what=set&user='+Filmaf.userCollection+'&view='+Filmaf.viewCollection,s_post);break;}b=true;}else{alert('Sorry, did not get your message.');}e.value='';}}else{b=true;}if(b)Context.close();},blogfb:function(){var e=$('blogfb_cb'),f=$('blogfb_img');if(e&&f){f.src='http://dv1.us/d1/fb'+(e.checked?'1':'0')+'.png';Button.enable('b_blog_and_home',!e.checked);}},__blog:function(){DvdList._blogMe('');},_blogMe:function(loc){var o={};if(!Ajax.getParms(o))return;var fb=Ajax.statusInt(o.line1,'fb'),b={};if(fb&&o.length>=4&&DvdList.parseBlogFb(o.lines[3],b))Facebook.blog(b.obj_id,b.media_type,b.blog);if(loc)location.href=loc;else if(!fb)alert('Posted!');},parseBlogFb:function(s,t){var i,u,v;s=s.split('\t');t.location='';for(i=0;i<s.length;i+=2){u=s[i+1];v=Dom.decodeHtmlForInput(u);switch(s[i]){case 'user_id':t.user_id=u;break;case 'location':t.location=u;break;case 'media_type':t.media_type=u;break;case 'blog_id':t.blog_id=Dec.parse(u);break;case 'reply_num':t.reply_num=Dec.parse(u);break;case 'obj_id':t.obj_id=Dec.parse(u);break;case 'blog':t.blog=u;break;}}return t.location=='B';},__dvdPicSelect:function(){function parse(s,t){var i,u,v;s=s.split('\t');t.images='';for(i=0;i<s.length;i+=2){u=s[i+1];v=Dom.decodeHtmlForInput(u);switch(s[i]){case 'dvd_id':t.dvd_id=Dec.parse(u);break;case 'images':t.images=u;break;}}return t.images!='';};var o={};if(!Ajax.getParms(o))return;var x=DvdListMenuPrep.dvdImgSel,b={},s='',a,e,i;if(o.length>=3&&parse(o.lines[2],b)&&(e=$('cm_dvd_spi_div'))&&b.dvd_id==x){a=b.images.split(',');for(i=0;i<a.length;i++){if(i&&i%5==0)s+='</div><div>';b=a[i];s+="<a href='javascript:void(DvdList.dvdPicSelected("+x+",\""+b+"\"))' style='padding:10px 4px 10px 4px'><img src='"+Img.getPicLoc(b,1)+"' style='padding:4px;border: 1px solid #b1d3ec' /></a>";}e.innerHTML="<div>Please click on one of the pictures below for it to be displayed in your collection.</div><div style='padding:4px 0 4px 0'>"+s+"</div><div style='float:right;margin-bottom:4px'><input type='button' value='Use FilmAf&#34;s default' onclick='DvdList.dvdPicSelected("+x+",0)' /></div>";}},dvdPicSelected:function(dvd,pic){Ajax.asynch('pics','DvdList.__dvdPicSelected','?what=selcollectionpic&dvd='+dvd+'&pic='+pic);},__dvdPicSelected:function(){function parse(s,t){var i,u,v;s=s.split('\t');t.pic_name='';for(i=0;i<s.length;i+=2){u=s[i+1];v=Dom.decodeHtmlForInput(u);switch(s[i]){case 'dvd_id':t.dvd_id=Dec.parse(u);break;case 'pic_name':t.pic_name=u;break;}}return t.pic_name!='';};var o={};if(!Ajax.getParms(o))return;var b={},e;if(o.length>=3&&parse(o.lines[2],b)){e='000000'+b.dvd_id;if((e=$('zo_'+e.substr(e.length-7,7)))){e.src=/jpg$/.test(e.src)?Img.getPicLoc(b.pic_name,0):Img.getPicLoc(b.pic_name,1);Context.close();ImgPop.close(0);}}},getSelListings:function(b_warn_on_none,f){var x=[],i,k,e;if(f&&f.elements){f=f.elements;for(i=0,k=0;i<f.length;i++){e=f[i].id;if(e.substr(0,3)=='cb_'&&e!='cb_all')if(f[i].checked)x[k++]=Dec.parse(e.substr(3).replace(/^0+/g,''));}if(k)return x;else if(b_warn_on_none)alert('Sorry, there are no listings selected. In order\nto select a listing click on the check box next to it.');}return false;},isAnyAllSelected:function(f){var e,i,n=1,a=1;if(f&&f.elements){f=f.elements;for(i=0;i<f.length;i++){e=f[i].id;if(e.substr(0,3)=='cb_'&&e!='cb_all')if(f[i].checked)n=0;else a=0;}}return n?0:(a?2:1);},check:function(cb){if(cb&&cb.form&&cb.form.cb_all)cb.form.cb_all.checked=false;return false;},uncheckAll:function(child){var f=Dom.getParentByType(child,'form'),e,i,x;if(f&&f.elements){e=f.elements;for(i=0;i<e.length;i++){x=e[i];if(x.type=='checkbox'&&x.id.substr(0,3)=='cb_'&&x.id!='cb_longtitles')x.checked=false;}}return false;},checkAll:function(f){var e,c,i,x;if(f&&f.elements){e=f.elements;c=f.cb_all?f.cb_all.checked:true;for(i=0;i<e.length;i++){x=e[i];if(x.type=='checkbox'&&x.id.substr(0,3)=='cb_'&&x.id!='cb_all'&&x.id!='cb_longtitles')x.checked=c;}}return false;},isDvdInCart:function(i){if(typeof(i)=='string')i=Dec.parse(i);if(i){var r=new RegExp(','+i+'-[0-9]*,'),c=','+Cookie.get('cart')+',';return r.test(c);}return false;},setLongTitles:function(x){Cookie.set('longtitles',x?'Y':'');var g=window.self.document.getElementsByTagName('div'),i,e,f,s;for(i=g.length;--i>=0;){e=g[i];if(e.id&&e.id.substr(0,3)=='tf_'){if((f=$(e.id+'_sav'))){if((e.innerHTML.length>f.innerHTML.length)==(!x?true:false)){s=f.innerHTML;f.innerHTML=e.innerHTML;e.innerHTML=s;}}}}},synchLongTitles:function(){var e=$('cb_longtitles');if(e)e.checked=Cookie.get('longtitles')=='Y';},selectIfOne:function(){if(Filmaf.rowsShown==1){var f=$('f_list'),e=$('cb_all');if(f&&e){e.checked=true;DvdList.checkAll(f);}}}};var FilmGp={owned:function(id){FilmGp._dvdAction(id,'owned');},wish:function(id){FilmGp._dvdAction(id,'wish-list');},order:function(id){FilmGp._dvdAction(id,'on-order');},work:function(id){FilmGp._dvdAction(id,'work');},seen:function(id){FilmGp._dvdAction(id,'have-seen');},del:function(id){FilmGp._dvdAction(id,'del');},blog:function(id){alert("Please sign in to blog.");},setup:function(){Filmaf.contextStr=Filmaf.objId;Filmaf.contextMed=$('obj_type').value;if(Filmaf.userCollection!='')Menus.setup();},onPopup:function(el){if(!this.id)return;var i=this.menu.items,t=this.menu.target,g=!(Filmaf.userCollection!=''),z=this,b;switch(this.id){case 'context_fb_blog':break;case 'context_fb_more':Facebook.ulPre(i,Filmaf.contextMed,Filmaf.contextStr);break;}},editions:function(n){Ajax.asynchNoDup('img-pop','ImgPop.__paintExpand','?dvd='+n,0,250);},_dvdAction:function(id,fld){if(Filmaf.userCollection!='')if(fld=='del')Ajax.asynch('dvd-action','FilmGp.__dvdActioned','?dvd='+id+'&action=del',0,10);else Ajax.asynch('dvd-action','FilmGp.__dvdActioned','?dvd='+id+'&action=mov&folder='+fld,0,10);else alert("Please sign in to update your film collection.");},__dvdActioned:function(){if(Ajax.ready()){var o={};if(Ajax.getParms(o)){var act=Ajax.statusTxt(o.line1,'action'),fld=Ajax.statusTxt(o.line1,'folder'),dvd=Ajax.statusTxt(o.line1,'dvd');FilmGp._updateStatus(act=='mov'?fld:'',dvd);}else{alert('Oops. The update failed.');}}},_updateStatus:function(f,n){var v=f!=''?'Move to ':'Add to ';$('f_owned').innerHTML=f=='owned'?"<span style='color:#de4141'>In owned</span>":"<a href='javascript:FilmGp.owned("+n+")'>"+v+"owned</a>";$('f_wish').innerHTML=f=='wish-list'?"<span style='color:#de4141'>In wish-list</span>":"<a href='javascript:FilmGp.wish("+n+")'>"+v+"wish-list</a>";$('f_order').innerHTML=f=='on-order'?"<span style='color:#de4141'>In on-order</span>":"<a href='javascript:FilmGp.order("+n+")'>"+v+"on-order</a>";$('f_work').innerHTML=f=='work'?"<span style='color:#de4141'>In work</span>":"<a href='javascript:FilmGp.work("+n+")'>"+v+"work</a>";$('f_have').innerHTML=f=='have-seen'?"<span style='color:#de4141'>In have-seen</span>":"<a href='javascript:FilmGp.seen("+n+")'>"+v+"have-seen</a>";$('f_del').innerHTML=f!=''?"<a href='javascript:FilmGp.del("+n+")'>Delete from collection</a>":'&nbsp;';$('pop_text').innerHTML=f!=''?ImgPop.paintInColl(f.substr(0,4),'FilmGp.editions('+n+')'):"<div style='padding:0 4px 4px 4px'><div style='float:right'><a href='javascript:FilmGp.editions("+n+")'>[+]</a></div>&nbsp;</div>";}};var Price={attach:function(){var e=window.self.document.getElementsByTagName('a');for(var i=e.length;--i>=0;)if(e[i].id&&e[i].id.substr(0,3)=='pc_')e[i].onclick=function(){Price.click(this.id.substr(3),0);};},click:function(dvd_id,b_set){Win.openPop(false,'price',Filmaf.baseDomain+'/price-one.html?dvd='+dvd_id,660,660,1,1);return true;}};var Cart={has:function(n){var c=','+Cookie.get('cart')+',';return c.indexOf(','+Dec.parse(n)+'-')>=0;},highlight:function(b_all){var c=','+Cookie.get('cart')+',',a=document.getElementsByTagName('img'),i,e,s;if(b_all)for(i=0;i<a.length;i++){e=a[i];if(e.id.substr(0,3)=='ic_'){s=','+Dec.parse(e.id.substr(3).replace(/^0+/g,''))+'-';Img.check(e,1,(c&&c.indexOf(s)>=0)?1:0);}}else if(c)for(i=0;i<a.length;i++){e=a[i];if(e.id.substr(0,3)=='ic_'){s=','+Dec.parse(e.id.substr(3).replace(/^0+/g,''))+'-';if(c.indexOf(s)>=0)Img.check(e,1,1);}}Cart._count(c);},count:function(){Cart._count(','+Cookie.get('cart')+',');},click:function(dvd_id,b_set,n_vendor){var c=Cookie.get('cart'),z=Cookie.get('saved'),b_vendor=typeof(n_vendor)!='undefined',b,d,x;dvd_id=Dec.parse(dvd_id.replace(/^0+/g,''));c=c?','+c+',':'';if(dvd_id>0){x=','+dvd_id+'-';b=c.indexOf(x);if(b_vendor&&n_vendor>=0)x+=n_vendor;d=c.indexOf(x+',');if(b_vendor&&b<0){return true;}if((b>=0&&!b_set)||(b<0&&b_set)){if(b_set)c=x+(c?c:',');else c=c.replace(new RegExp(','+dvd_id+'-[a-z0-9]*,','g'),',');}else{if(b_vendor&&d<0){b=c.indexOf('-',b);if(b>=0){d=c.indexOf(',',b);c=c.substr(0,b+1)+(n_vendor>=0?n_vendor:'')+(d?c.substr(d):'');}}else{Cart._count(c);return true;}}if(!z)z='';if(z.lenght+c.lenght>2300)alert('Sorry, your saved carts plus your current cart would be larger\nthan 2300 bytes. We can not complete this operation.');else Cookie.set('cart',c);Cart._count(c);}return true;},_count:function(c){var t=$('cart_count_0'),u=$('cart_count_1'),n=0;if(t||u){c=c.replace(/^,+/,'').replace(/,+$/,'');if(c)n=c.split(',').length;n=n>0?n+' item'+(n>1?'s':'')+' in your cart':'your cart is empty';if(t)t.innerHTML=n;if(u)u.innerHTML=n;}}};var Pop={open:function(e,f,dx,dy,hid){var r={},yi,yf;e=$s(e);if(hid==1)if(e.style.visibility!='hidden')e.style.visibility='hidden';switch(hid){case 0:case 1:f=$s(f);r=Context.getPopupPos(f,dx,dy);e.style.right='';e.style.left=r.x+'px';if(hid==1&&r.bot_y){e.style.top='';e.style.bottom=(r.bot_y-r.beg_y)+'px';}else{e.style.bottom='';e.style.top=r.y+'px';}break;case 2:yi=DynarchMenu.psTop();r=Context.getPos(e);if(r.y<yi){e.style.bottom='';e.style.top=yi+'px';}break;case 3:r.y=DynarchMenu.psTop()+10;r.x=DynarchMenu.psLeft()+(DynarchMenu.getWinSize().x-dx)/2;e.style.right='';e.style.left=r.x+'px';e.style.bottom='';e.style.top=r.y+'px';break;}if(hid!=1)if(e.style.visibility!='visible')e.style.visibility='visible';},close:function(e){if((e=$s(e))&&e.style.visibility!='hidden'){e.style.visibility='hidden';return true;}return false;}};var SearchMenuPrep={onPopup:function(el){if(!this.id)return;var i=this.menu.items,t=this.menu.target;switch(this.id){case 'help_dvd':case 'help_dir':case 'help_pub':case 'help_cnt':case 'help_gen':case 'help_rel':case 'help_lan':case 'help_src':case 'help_pic':case 'help_med':SearchMenuPrep._helpSearch(t,this.id.substr(5));break;case 'help_rdv':case 'help_rfm':SearchMenuPrep._helpStars(t);break;case 'help_gno':SearchMenuPrep._helpGenre(i,t);break;case 'explain_pop':Explain.show(t.id,true);break;case 'search_options':SearchMenuPrep._loadOptions();break;}},_loadOptions:function(){var c=Cookie.get('search'),e=$s('flipexclpins'),b=Filmaf.userCollection=='';DropDown.selectFromVal('myregion',Cookie.extractFromStr(c,'myregion','us'));DropDown.selectFromVal('mymedia',Cookie.extractFromStr(c,'mymedia','all'));CheckBox.setVal('isearch',!Cookie.extractFromStr(c,'noisearch'));CheckBox.setVal('save',Cookie.extractFromStr(c,'save'));CheckBox.setVal('expert',Cookie.extractFromStr(c,'expert'));CheckBox.setVal('flipexcl',b?'N':Cookie.extractFromStr(c,'flipexcl'));CheckBox.setVal('pins',b?'N':Cookie.extractFromStr(c,'pins'));if(e)e.style.visibility=b?'hidden':'visible';iSearch.close();},saveOptions:function(){if(!CheckBox.getVal_1('flipexcl')&&!Search.isXmyPined())Cookie.amend('search','incmine','');Cookie.amend('search','myregion',DropDown.getSelValue('myregion'));Cookie.amend('search','mymedia',DropDown.getSelValue('mymedia'));Cookie.amend('search','noisearch',!CheckBox.getVal_1('isearch')?'1':'');Cookie.amend('search','save',CheckBox.getVal_1('save')?'1':'');Cookie.amend('search','expert',CheckBox.getVal_1('expert')?'1':'');Cookie.amend('search','flipexcl',CheckBox.getVal_1('flipexcl')?'1':'');Cookie.amend('search','pins',CheckBox.getVal_1('pins')?'1':'');Context.close();Search.loadPreferences();if(!Search._pins||!Search.isRegPined())DropDown.selectFromVal('optR',Search._myregion);if(!Search._pins||!Search.isMedPined())DropDown.selectFromVal('optM',Search._mymedia);Search.paint(1,0);if(!CheckBox.getVal_1('pins'))Ajax.asynch('pin','Ajax.__ignore','?pin=cls');},restoreDefaults:function(){DropDown.selectFromVal('myregion','us');DropDown.selectFromVal('mymedia','all');CheckBox.setVal('isearch',1);CheckBox.setVal('save',0);CheckBox.setVal('expert',0);CheckBox.setVal('flipexcl',0);CheckBox.setVal('pins',0);},_helpSearch:function(t,f){Filmaf.inputLine=t.id.substr(2,1);var g=$('mform_'+f);if(g&&g.ropt&&g.ropt[1])g.ropt[0].checked=!(g.ropt[1].checked=Search.appending[f]);},_helpStars:function(t){Filmaf.inputLine=t.id;},_helpGenre:function(i,t){Filmaf.inputLine=t.id;switch(t.id){case 'b_b_genre':case 'b_a_genre':i.hm_gno_99999.label=t.id=='b_b_genre'?'Use Default Genre':'Unspecified Genre';i.hm_gno_99999.labelTD.innerHTML="<a><strong>"+i.hm_gno_99999.label+'</strong></a>';break;}}};function ulDvd(s){s.s+="<li id='menu-release-img' class='context-class-a-dvd_pic'><ul id='context_dvd' onclick='onMenuClick(this)'><li id='cm_dvd_large'>Show Large Pic</li><li id='cm_dvd_list'>Go to DVD listing</li><li id='cm_dvd_blog'>Blog it<ul><li>"+ulBlogForm('','')+"</li></ul></li>"+Facebook.ul()+"<li></li><li id='cm_dvd_copy'>Move to<ul id='context_dvd_copy'><li id='cm_dvd_copy_owned'>owned</li><li id='cm_dvd_copy_order'>on-order</li><li id='cm_dvd_copy_wish'>wish-list</li><li id='cm_dvd_copy_work'>work</li><li id='cm_dvd_copy_seen'>have-seen</li></ul></li><li id='cm_dvd_delete'>Delete from My Collection</li><li></li><li id='cm_dvd_cart_add'>Add to Cart</li><li id='cm_dvd_cart_del'>Remove from Cart</li><li id='cm_dvd_prices'>Compare Prices</li><li></li><li id='cm_dvd_edit'>Correct Listing Info</li><li id='cm_dvd_pic'>Upload or Edit Pictures</li></ul></li><li class='context-class-a-dvd_dir'><ul id='context_dir' onclick='onMenuClick(this)'><li></li><li id='cm_dir_pin1'><div style='position:relative;left:-16px'><strong>WARNING:</strong> Pinned criteria likely to<br />restrict contextual search results.</div></li><li id='cm_dir_pin2'></li><li id='cm_dir_title'><div>Director</div></li><li></li><li id='cm_dir_filmaf'>FilmAf Database</li><li id='cm_dir_mine'>My Collection</li><li id='cm_dir_xp'>Director Explorer</li></ul></li>";};var Win={openPop:function(b_refresh,s_target,s_url,n_width,n_height,b_reduced,b_scroll){s_url=s_url.replace(/\&amp;/g,'&');b_scroll=b_scroll?'1':'0';if(b_refresh){var t=new Date();s_url=s_url+(s_url.indexOf('?')<0?'?':'&')+'refresh='+t.getTime();}var o_wnd=window.open(s_url,s_target,(b_reduced?'resizable=1,menubar=0,toolbar=0,location=0,directories=0,scrollbars='+b_scroll+',status=0,titlebar=0'+(n_width>0&&n_height>0?',width='+n_width+'px,height='+n_height+'px':''):''));if(o_wnd)o_wnd.focus();return false;},openStd:function(s_url,w){s_url=s_url.replace(/\&amp;/g,'&');if(typeof(w)=='object')if(!w||w.closed)w=window.open(s_url);else w.location=s_url;else w=window.open(s_url,w);if(w)w.focus();return true;},openDyn:function(s_target,s_title,n_width,n_height,b_reduced,s_inc,s_onload,b_scroll){b_scroll=b_scroll?'1':'0';var o_wnd=window.open('',s_target,(b_reduced?'resizable=0,menubar=0,toolbar=0,location=0,directories=0,scrollbars='+b_scroll+',status=0,titlebar=0'+(n_width>0&&n_height>0?',width='+n_width+'px,height='+n_height+'px':''):''));if(o_wnd){o_wnd.document.writeln("<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'DTD/xhtml1-transitional.dtd'>\n<html xmlns='http://www.w3.org/1999/xhtml' xml:lang='en' lang='en'>\n<head>\n<title>"+s_title+"</title>\n<meta http-equiv='Content-type' content='text/html; charset=UTF-8' />\n"+s_inc+"</head>\n<body onload='"+(s_onload?s_onload+';':'')+"self.focus()'>");}return o_wnd;},endDyn:function(o_wnd){if(o_wnd){o_wnd.document.writeln("</body>\n</html>");o_wnd.document.close();}},showPic:function(s_pic){Win.openPop(false,'large_pic',Filmaf.baseDomain+'/utils/lp.html?pic='+s_pic,354,468,1,0);},reauth:function(s_redirect){if(!s_redirect)s_redirect='/utils/close.html%3Fmsg%3D1';Win.openPop(0,'_blank','/utils/login.html?redirect='+s_redirect,680,520,1,0);},findFrame:function(s_id){var i;for(i=0;i<parent.frames.length;i++){var elid;try{elid=parent.frames[i].frameElement.id}catch(e){elid='verbotten';}if(elid==s_id)return parent.frames[i].document;}return 0;}};var Main={_tabMed:'',_tabReg:'',_tabCol:'',_tabCat:'',_tabSub:0,_selGen:0,_cookie:'',setup:function(parms){Main._cookie=parms.cookie;Main.attachZoom();Main.attachTabs(parms);},load:function(tbl,opt,parm){if(parm!=1){switch(tbl){case 'med':Main._tabMed=opt;break;case 'reg':Main._tabReg=opt;break;case 'col':Main._tabCol=opt;break;case 'cat':Main._tabCat=opt;break;case 'sbg':Main._tabSub=opt;break;}Cookie.set(Main._cookie,Main._tabMed+'|'+Main._tabReg+'|'+Main._tabCol+'|'+Main._tabCat+'|'+Main._tabSub,0);location.href=location.href;}},attachTabs:function(parms){if(parms.med){Main._tabMed=parms.med;Main._tabReg=parms.reg;Main._tabCol=parms.col;Main._tabCat=parms.cat;Main._tabSub=parms.sbg;Main._selGen=parms.gen;TblMenu.attach('tab_med',function(id,parm){Main.load('med',id.substr(5),parm)});TblMenu.set($('stat_'+Main._tabMed),1);TblMenu.attach('tab_reg',function(id,parm){Main.load('reg',id.substr(5),parm)});TblMenu.set($('stat_'+Main._tabReg),1);TblMenu.attach('tab_col',function(id,parm){Main.load('col',id.substr(5),parm)});TblMenu.set($('stat_'+Main._tabCol),1);TblMenu.attach('tab_cat',function(id,parm){Main.load('cat',id.substr(5),parm)});TblMenu.set($('stat_'+Main._tabCat),1);if($('tab_sbg')){TblMenu.attach('tab_sbg',function(id,parm){Main.load('sbg',id.substr(4),parm)});TblMenu.set($('gno_'+(Main._tabSub?Main._tabSub:Main._selGen)),1);}}},attachZoom:function(){var e=window.self.document.getElementsByTagName('img'),i,x;for(i=e.length;--i>=0;)if(e[i].id&&e[i].id.substr(0,3)=='zo_')e[i].onmouseover=function(ev){ImgPop.show(this,0);};},onPopup:function(el){if(!this.id)return;var i=this.menu.items,t=this.menu.target,g=!(Filmaf.userCollection!=''),z=this,b;switch(this.id){case 'context_dvd':Main._contextDvd(i,t,g,el);break;case 'context_dir':Main._contextDir(i,t,g);break;default:z.filmaf=SearchMenuPrep.onPopup;z.filmaf(el);break;}},_contextDvd:function(i,t,g,el){Filmaf.contextStr=t.id.substr(2);Filmaf.contextMed=t.id.substr(0,1);if(!i.cm_dvd_large.visible)i.cm_dvd_large.display(true);ImgPop.setMenuText(i.cm_dvd_large.labelTD);i.cm_dvd_blog.disable(g);i.cm_dvd_copy.disable(g);i.cm_dvd_delete.disable(g);i.cm_dvd_edit.disable(g);i.cm_dvd_pic.disable(g);b=Cart.has(Filmaf.contextStr);i.cm_dvd_cart_add.disable(b);i.cm_dvd_cart_del.disable(!b);Facebook.ulPre(i,Filmaf.contextMed,Filmaf.contextStr);},_contextDir:function(i,t,g){var s=t.href,n=s.indexOf('/gd/');Filmaf.contextStr=decodeURIComponent(s.substr(n+4));i.cm_dir_title.labelTD.innerHTML="<span style='position:relative;left:-16px'>Search &quot;<strong>"+t.innerHTML+'</strong>&quot; in:</span>';i.cm_dir_mine.disable(g);var b=Search.isPinned();if(b!=i.cm_dir_pin1.visible)i.cm_dir_pin1.display(b);if(b!=i.cm_dir_pin2.visible)i.cm_dir_pin2.display(b);},onClick:function(action){if(!action.info||!action.info.id)return;var id=action.info.id,md=id.substr(0,7),z=this;if(!(id=id.substr(7)))retutn;switch(md){case 'cm_dvd_':Main._clickDvd(id);break;case 'cm_dir_':Main._clickText(id,md.substr(3,3));break;default:z.filmaf=SearchMenuAction.onClick;z.filmaf(action);break;}},_clickDvd:function(id){switch(id){case 'large':switch(ImgPop.menuContext){case 'show':ImgPop.show($('zo_'+Filmaf.contextStr),1);break;case 'stop showing':ImgPop.close(1);break;}break;case 'list':DvdList.searchByDvdId(Filmaf.contextStr);break;case 'blog':break;case 'cart_add':Cart.click(Filmaf.contextStr,true);break;case 'cart_del':Cart.click(Filmaf.contextStr,false);break;case 'prices':Price.click(Filmaf.contextStr,0);break;case 'pic':DvdList.picMngt(Filmaf.contextStr);break;case 'edit':DvdList.dvdAction('',Filmaf.contextStr,id,0);break;case 'delete':Main._dvdAction(Filmaf.contextStr,id,0);break;case 'fb_see':Facebook.see(Filmaf.contextStr,Filmaf.contextMed);break;case 'fb_want':Facebook.want(Filmaf.contextStr,Filmaf.contextMed);break;case 'fb_order':Facebook.order(Filmaf.contextStr,Filmaf.contextMed);break;case 'fb_got':Facebook.get(Filmaf.contextStr,Filmaf.contextMed);break;default:if((id=DvdList.folderToMove(id)))Main._dvdAction(Filmaf.contextStr,'move',id);break;}},_clickText:function(ctx,opt){if(!Filmaf.contextStr)return;switch(ctx){case 'xp':DirXp.open(Filmaf.contextStr);break;default:Search.setSearch(ctx,opt,Filmaf.contextStr);break;}},_dvdAction:function(s_id,s_action,s_where){ImgPop.skipShowOnWait=true;switch(s_action){case 'delete':Ajax.asynch('dvd-action','Main.__dvdActioned','?dvd='+s_id+'&action=del',0,10);break;case 'move':Ajax.asynch('dvd-action','Main.__dvdActioned','?dvd='+s_id+'&action=mov&folder='+s_where,0,10);break;}ImgPop.close(0);},__dvdActioned:function(){if(Ajax.ready()){var o={};if(Ajax.getParms(o))alert(o.msg.replace('.<br />','').replace('1 title','Title').replace('inserted','Added').replace('updated','Moved').replace('delete','Delete'));else alert('Oops. The update failed.');ImgPop.skipShowOnWait=false;}}};